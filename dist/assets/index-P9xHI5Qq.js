function bx(t,s){for(var r=0;r<s.length;r++){const n=s[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function vx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vd={exports:{}},Pa={},jd={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fn=Symbol.for("react.element"),jx=Symbol.for("react.portal"),Nx=Symbol.for("react.fragment"),wx=Symbol.for("react.strict_mode"),Cx=Symbol.for("react.profiler"),Sx=Symbol.for("react.provider"),Ex=Symbol.for("react.context"),kx=Symbol.for("react.forward_ref"),Tx=Symbol.for("react.suspense"),_x=Symbol.for("react.memo"),Dx=Symbol.for("react.lazy"),Io=Symbol.iterator;function Ax(t){return t===null||typeof t!="object"?null:(t=Io&&t[Io]||t["@@iterator"],typeof t=="function"?t:null)}var Nd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wd=Object.assign,Cd={};function pr(t,s,r){this.props=t,this.context=s,this.refs=Cd,this.updater=r||Nd}pr.prototype.isReactComponent={};pr.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};pr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sd(){}Sd.prototype=pr.prototype;function Mi(t,s,r){this.props=t,this.context=s,this.refs=Cd,this.updater=r||Nd}var Ii=Mi.prototype=new Sd;Ii.constructor=Mi;wd(Ii,pr.prototype);Ii.isPureReactComponent=!0;var Lo=Array.isArray,Ed=Object.prototype.hasOwnProperty,Li={current:null},kd={key:!0,ref:!0,__self:!0,__source:!0};function Td(t,s,r){var n,a={},l=null,i=null;if(s!=null)for(n in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)Ed.call(s,n)&&!kd.hasOwnProperty(n)&&(a[n]=s[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var c=Array(o),x=0;x<o;x++)c[x]=arguments[x+2];a.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:fn,type:t,key:l,ref:i,props:a,_owner:Li.current}}function Px(t,s){return{$$typeof:fn,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Ri(t){return typeof t=="object"&&t!==null&&t.$$typeof===fn}function Mx(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Ro=/\/+/g;function tl(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Mx(""+t.key):s.toString(36)}function Hn(t,s,r,n,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case fn:case jx:i=!0}}if(i)return i=t,a=a(i),t=n===""?"."+tl(i,0):n,Lo(a)?(r="",t!=null&&(r=t.replace(Ro,"$&/")+"/"),Hn(a,s,r,"",function(x){return x})):a!=null&&(Ri(a)&&(a=Px(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Ro,"$&/")+"/")+t)),s.push(a)),1;if(i=0,n=n===""?".":n+":",Lo(t))for(var o=0;o<t.length;o++){l=t[o];var c=n+tl(l,o);i+=Hn(l,s,r,c,a)}else if(c=Ax(t),typeof c=="function")for(t=c.call(t),o=0;!(l=t.next()).done;)l=l.value,c=n+tl(l,o++),i+=Hn(l,s,r,c,a);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function Sn(t,s,r){if(t==null)return t;var n=[],a=0;return Hn(t,n,"","",function(l){return s.call(r,l,a++)}),n}function Ix(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Be={current:null},Bn={transition:null},Lx={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:Bn,ReactCurrentOwner:Li};function _d(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:Sn,forEach:function(t,s,r){Sn(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return Sn(t,function(){s++}),s},toArray:function(t){return Sn(t,function(s){return s})||[]},only:function(t){if(!Ri(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=pr;K.Fragment=Nx;K.Profiler=Cx;K.PureComponent=Mi;K.StrictMode=wx;K.Suspense=Tx;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lx;K.act=_d;K.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=wd({},t.props),a=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=Li.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)Ed.call(s,c)&&!kd.hasOwnProperty(c)&&(n[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var x=0;x<c;x++)o[x]=arguments[x+2];n.children=o}return{$$typeof:fn,type:t.type,key:a,ref:l,props:n,_owner:i}};K.createContext=function(t){return t={$$typeof:Ex,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Sx,_context:t},t.Consumer=t};K.createElement=Td;K.createFactory=function(t){var s=Td.bind(null,t);return s.type=t,s};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:kx,render:t}};K.isValidElement=Ri;K.lazy=function(t){return{$$typeof:Dx,_payload:{_status:-1,_result:t},_init:Ix}};K.memo=function(t,s){return{$$typeof:_x,type:t,compare:s===void 0?null:s}};K.startTransition=function(t){var s=Bn.transition;Bn.transition={};try{t()}finally{Bn.transition=s}};K.unstable_act=_d;K.useCallback=function(t,s){return Be.current.useCallback(t,s)};K.useContext=function(t){return Be.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Be.current.useDeferredValue(t)};K.useEffect=function(t,s){return Be.current.useEffect(t,s)};K.useId=function(){return Be.current.useId()};K.useImperativeHandle=function(t,s,r){return Be.current.useImperativeHandle(t,s,r)};K.useInsertionEffect=function(t,s){return Be.current.useInsertionEffect(t,s)};K.useLayoutEffect=function(t,s){return Be.current.useLayoutEffect(t,s)};K.useMemo=function(t,s){return Be.current.useMemo(t,s)};K.useReducer=function(t,s,r){return Be.current.useReducer(t,s,r)};K.useRef=function(t){return Be.current.useRef(t)};K.useState=function(t){return Be.current.useState(t)};K.useSyncExternalStore=function(t,s,r){return Be.current.useSyncExternalStore(t,s,r)};K.useTransition=function(){return Be.current.useTransition()};K.version="18.3.1";jd.exports=K;var j=jd.exports;const Lt=vx(j),Rx=bx({__proto__:null,default:Lt},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox=j,Ux=Symbol.for("react.element"),Fx=Symbol.for("react.fragment"),zx=Object.prototype.hasOwnProperty,$x=Ox.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hx={key:!0,ref:!0,__self:!0,__source:!0};function Dd(t,s,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(n in s)zx.call(s,n)&&!Hx.hasOwnProperty(n)&&(a[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:Ux,type:t,key:l,ref:i,props:a,_owner:$x.current}}Pa.Fragment=Fx;Pa.jsx=Dd;Pa.jsxs=Dd;vd.exports=Pa;var e=vd.exports,Ad={exports:{}},st={},Pd={exports:{}},Md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(P,F){var H=P.length;P.push(F);e:for(;0<H;){var T=H-1>>>1,I=P[T];if(0<a(I,F))P[T]=F,P[H]=I,H=T;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var F=P[0],H=P.pop();if(H!==F){P[0]=H;e:for(var T=0,I=P.length,$=I>>>1;T<$;){var Y=2*(T+1)-1,B=P[Y],W=Y+1,Z=P[W];if(0>a(B,H))W<I&&0>a(Z,B)?(P[T]=Z,P[W]=H,T=W):(P[T]=B,P[Y]=H,T=Y);else if(W<I&&0>a(Z,H))P[T]=Z,P[W]=H,T=W;else break e}}return F}function a(P,F){var H=P.sortIndex-F.sortIndex;return H!==0?H:P.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],x=[],u=1,m=null,f=3,h=!1,g=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(P){for(var F=r(x);F!==null;){if(F.callback===null)n(x);else if(F.startTime<=P)n(x),F.sortIndex=F.expirationTime,s(c,F);else break;F=r(x)}}function C(P){if(b=!1,p(P),!g)if(r(c)!==null)g=!0,U(k);else{var F=r(x);F!==null&&M(C,F.startTime-P)}}function k(P,F){g=!1,b&&(b=!1,d(w),w=-1),h=!0;var H=f;try{for(p(F),m=r(c);m!==null&&(!(m.expirationTime>F)||P&&!_());){var T=m.callback;if(typeof T=="function"){m.callback=null,f=m.priorityLevel;var I=T(m.expirationTime<=F);F=t.unstable_now(),typeof I=="function"?m.callback=I:m===r(c)&&n(c),p(F)}else n(c);m=r(c)}if(m!==null)var $=!0;else{var Y=r(x);Y!==null&&M(C,Y.startTime-F),$=!1}return $}finally{m=null,f=H,h=!1}}var N=!1,S=null,w=-1,D=5,A=-1;function _(){return!(t.unstable_now()-A<D)}function L(){if(S!==null){var P=t.unstable_now();A=P;var F=!0;try{F=S(!0,P)}finally{F?E():(N=!1,S=null)}}else N=!1}var E;if(typeof y=="function")E=function(){y(L)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,O=R.port2;R.port1.onmessage=L,E=function(){O.postMessage(null)}}else E=function(){v(L,0)};function U(P){S=P,N||(N=!0,E())}function M(P,F){w=v(function(){P(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,U(k))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var H=f;f=F;try{return P()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,F){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var H=f;f=P;try{return F()}finally{f=H}},t.unstable_scheduleCallback=function(P,F,H){var T=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?T+H:T):H=T,P){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=H+I,P={id:u++,callback:F,priorityLevel:P,startTime:H,expirationTime:I,sortIndex:-1},H>T?(P.sortIndex=H,s(x,P),r(c)===null&&P===r(x)&&(b?(d(w),w=-1):b=!0,M(C,H-T))):(P.sortIndex=I,s(c,P),g||h||(g=!0,U(k))),P},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(P){var F=f;return function(){var H=f;f=F;try{return P.apply(this,arguments)}finally{f=H}}}})(Md);Pd.exports=Md;var Bx=Pd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=j,et=Bx;function z(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Id=new Set,Xr={};function Ls(t,s){ar(t,s),ar(t+"Capture",s)}function ar(t,s){for(Xr[t]=s,t=0;t<s.length;t++)Id.add(s[t])}var Rt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pl=Object.prototype.hasOwnProperty,qx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oo={},Uo={};function Wx(t){return Pl.call(Uo,t)?!0:Pl.call(Oo,t)?!1:qx.test(t)?Uo[t]=!0:(Oo[t]=!0,!1)}function Yx(t,s,r,n){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gx(t,s,r,n){if(s===null||typeof s>"u"||Yx(t,s,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Ve(t,s,r,n,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ie[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Ie[s]=new Ve(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ie[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ie[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ie[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ie[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ie[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ie[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ie[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oi=/[\-:]([a-z])/g;function Ui(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Oi,Ui);Ie[s]=new Ve(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Oi,Ui);Ie[s]=new Ve(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Oi,Ui);Ie[s]=new Ve(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ie[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ie[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fi(t,s,r,n){var a=Ie.hasOwnProperty(s)?Ie[s]:null;(a!==null?a.type!==0:n||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Gx(s,r,a,n)&&(r=null),n||a===null?Wx(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(s=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(s):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,s,r):t.setAttribute(s,r))))}var $t=Vx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,En=Symbol.for("react.element"),zs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),zi=Symbol.for("react.strict_mode"),Ml=Symbol.for("react.profiler"),Ld=Symbol.for("react.provider"),Rd=Symbol.for("react.context"),$i=Symbol.for("react.forward_ref"),Il=Symbol.for("react.suspense"),Ll=Symbol.for("react.suspense_list"),Hi=Symbol.for("react.memo"),Gt=Symbol.for("react.lazy"),Od=Symbol.for("react.offscreen"),Fo=Symbol.iterator;function Er(t){return t===null||typeof t!="object"?null:(t=Fo&&t[Fo]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,sl;function Rr(t){if(sl===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);sl=s&&s[1]||""}return`
`+sl+t}var rl=!1;function nl(t,s){if(!t||rl)return"";rl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(x){var n=x}Reflect.construct(t,[],s)}else{try{s.call()}catch(x){n=x}t.call(s.prototype)}else{try{throw Error()}catch(x){n=x}t()}}catch(x){if(x&&n&&typeof x.stack=="string"){for(var a=x.stack.split(`
`),l=n.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=o);break}}}finally{rl=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Rr(t):""}function Xx(t){switch(t.tag){case 5:return Rr(t.type);case 16:return Rr("Lazy");case 13:return Rr("Suspense");case 19:return Rr("SuspenseList");case 0:case 2:case 15:return t=nl(t.type,!1),t;case 11:return t=nl(t.type.render,!1),t;case 1:return t=nl(t.type,!0),t;default:return""}}function Rl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case zs:return"Portal";case Ml:return"Profiler";case zi:return"StrictMode";case Il:return"Suspense";case Ll:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rd:return(t.displayName||"Context")+".Consumer";case Ld:return(t._context.displayName||"Context")+".Provider";case $i:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hi:return s=t.displayName||null,s!==null?s:Rl(t.type)||"Memo";case Gt:s=t._payload,t=t._init;try{return Rl(t(s))}catch{}}return null}function Qx(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rl(s);case 8:return s===zi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ud(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Kx(t){var s=Ud(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),n=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function kn(t){t._valueTracker||(t._valueTracker=Kx(t))}function Fd(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),n="";return t&&(n=Ud(t)?t.checked?"true":"false":t.value),t=n,t!==r?(s.setValue(t),!0):!1}function ea(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ol(t,s){var r=s.checked;return he({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function zo(t,s){var r=s.defaultValue==null?"":s.defaultValue,n=s.checked!=null?s.checked:s.defaultChecked;r=ds(s.value!=null?s.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function zd(t,s){s=s.checked,s!=null&&Fi(t,"checked",s,!1)}function Ul(t,s){zd(t,s);var r=ds(s.value),n=s.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Fl(t,s.type,r):s.hasOwnProperty("defaultValue")&&Fl(t,s.type,ds(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function $o(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var n=s.type;if(!(n!=="submit"&&n!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Fl(t,s,r){(s!=="number"||ea(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Or=Array.isArray;function Js(t,s,r,n){if(t=t.options,s){s={};for(var a=0;a<r.length;a++)s["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=s.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ds(r),s=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function zl(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(z(91));return he({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ho(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(z(92));if(Or(r)){if(1<r.length)throw Error(z(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:ds(r)}}function $d(t,s){var r=ds(s.value),n=ds(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Bo(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Hd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $l(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Hd(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tn,Bd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(s,r,n,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Tn=Tn||document.createElement("div"),Tn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Tn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Qr(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jx=["Webkit","ms","Moz","O"];Object.keys(zr).forEach(function(t){Jx.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),zr[s]=zr[t]})});function Vd(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||zr.hasOwnProperty(t)&&zr[t]?(""+s).trim():s+"px"}function qd(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Vd(r,s[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var Zx=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(t,s){if(s){if(Zx[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(z(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(z(61))}if(s.style!=null&&typeof s.style!="object")throw Error(z(62))}}function Bl(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vl=null;function Bi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ql=null,Zs=null,er=null;function Vo(t){if(t=vn(t)){if(typeof ql!="function")throw Error(z(280));var s=t.stateNode;s&&(s=Oa(s),ql(t.stateNode,t.type,s))}}function Wd(t){Zs?er?er.push(t):er=[t]:Zs=t}function Yd(){if(Zs){var t=Zs,s=er;if(er=Zs=null,Vo(t),s)for(t=0;t<s.length;t++)Vo(s[t])}}function Gd(t,s){return t(s)}function Xd(){}var al=!1;function Qd(t,s,r){if(al)return t(s,r);al=!0;try{return Gd(t,s,r)}finally{al=!1,(Zs!==null||er!==null)&&(Xd(),Yd())}}function Kr(t,s){var r=t.stateNode;if(r===null)return null;var n=Oa(r);if(n===null)return null;r=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(z(231,s,typeof r));return r}var Wl=!1;if(Rt)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{Wl=!1}function eh(t,s,r,n,a,l,i,o,c){var x=Array.prototype.slice.call(arguments,3);try{s.apply(r,x)}catch(u){this.onError(u)}}var $r=!1,ta=null,sa=!1,Yl=null,th={onError:function(t){$r=!0,ta=t}};function sh(t,s,r,n,a,l,i,o,c){$r=!1,ta=null,eh.apply(th,arguments)}function rh(t,s,r,n,a,l,i,o,c){if(sh.apply(this,arguments),$r){if($r){var x=ta;$r=!1,ta=null}else throw Error(z(198));sa||(sa=!0,Yl=x)}}function Rs(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Kd(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function qo(t){if(Rs(t)!==t)throw Error(z(188))}function nh(t){var s=t.alternate;if(!s){if(s=Rs(t),s===null)throw Error(z(188));return s!==t?null:t}for(var r=t,n=s;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return qo(a),t;if(l===n)return qo(a),s;l=l.sibling}throw Error(z(188))}if(r.return!==n.return)r=a,n=l;else{for(var i=!1,o=a.child;o;){if(o===r){i=!0,r=a,n=l;break}if(o===n){i=!0,n=a,r=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===r){i=!0,r=l,n=a;break}if(o===n){i=!0,n=l,r=a;break}o=o.sibling}if(!i)throw Error(z(189))}}if(r.alternate!==n)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?t:s}function Jd(t){return t=nh(t),t!==null?Zd(t):null}function Zd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Zd(t);if(s!==null)return s;t=t.sibling}return null}var eu=et.unstable_scheduleCallback,Wo=et.unstable_cancelCallback,ah=et.unstable_shouldYield,lh=et.unstable_requestPaint,be=et.unstable_now,ih=et.unstable_getCurrentPriorityLevel,Vi=et.unstable_ImmediatePriority,tu=et.unstable_UserBlockingPriority,ra=et.unstable_NormalPriority,oh=et.unstable_LowPriority,su=et.unstable_IdlePriority,Ma=null,Et=null;function ch(t){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Ma,t,void 0,(t.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:mh,dh=Math.log,uh=Math.LN2;function mh(t){return t>>>=0,t===0?32:31-(dh(t)/uh|0)|0}var _n=64,Dn=4194304;function Ur(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function na(t,s){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,l=t.pingedLanes,i=r&268435455;if(i!==0){var o=i&~a;o!==0?n=Ur(o):(l&=i,l!==0&&(n=Ur(l)))}else i=r&~a,i!==0?n=Ur(i):l!==0&&(n=Ur(l));if(n===0)return 0;if(s!==0&&s!==n&&!(s&a)&&(a=n&-n,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(n&4&&(n|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=n;0<s;)r=31-ft(s),a=1<<r,n|=t[r],s&=~a;return n}function xh(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hh(t,s){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-ft(l),o=1<<i,c=a[i];c===-1?(!(o&r)||o&n)&&(a[i]=xh(o,s)):c<=s&&(t.expiredLanes|=o),l&=~o}}function Gl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ru(){var t=_n;return _n<<=1,!(_n&4194240)&&(_n=64),t}function ll(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function yn(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-ft(s),t[s]=r}function ph(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-ft(r),l=1<<a;s[a]=0,n[a]=-1,t[a]=-1,r&=~l}}function qi(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var n=31-ft(r),a=1<<n;a&s|t[n]&s&&(t[n]|=s),r&=~a}}var re=0;function nu(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var au,Wi,lu,iu,ou,Xl=!1,An=[],ts=null,ss=null,rs=null,Jr=new Map,Zr=new Map,Qt=[],gh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yo(t,s){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":Jr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(s.pointerId)}}function Tr(t,s,r,n,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},s!==null&&(s=vn(s),s!==null&&Wi(s)),t):(t.eventSystemFlags|=n,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function fh(t,s,r,n,a){switch(s){case"focusin":return ts=Tr(ts,t,s,r,n,a),!0;case"dragenter":return ss=Tr(ss,t,s,r,n,a),!0;case"mouseover":return rs=Tr(rs,t,s,r,n,a),!0;case"pointerover":var l=a.pointerId;return Jr.set(l,Tr(Jr.get(l)||null,t,s,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,Zr.set(l,Tr(Zr.get(l)||null,t,s,r,n,a)),!0}return!1}function cu(t){var s=ws(t.target);if(s!==null){var r=Rs(s);if(r!==null){if(s=r.tag,s===13){if(s=Kd(r),s!==null){t.blockedOn=s,ou(t.priority,function(){lu(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vn(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Ql(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Vl=n,r.target.dispatchEvent(n),Vl=null}else return s=vn(r),s!==null&&Wi(s),t.blockedOn=r,!1;s.shift()}return!0}function Go(t,s,r){Vn(t)&&r.delete(s)}function yh(){Xl=!1,ts!==null&&Vn(ts)&&(ts=null),ss!==null&&Vn(ss)&&(ss=null),rs!==null&&Vn(rs)&&(rs=null),Jr.forEach(Go),Zr.forEach(Go)}function _r(t,s){t.blockedOn===s&&(t.blockedOn=null,Xl||(Xl=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,yh)))}function en(t){function s(a){return _r(a,t)}if(0<An.length){_r(An[0],t);for(var r=1;r<An.length;r++){var n=An[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ts!==null&&_r(ts,t),ss!==null&&_r(ss,t),rs!==null&&_r(rs,t),Jr.forEach(s),Zr.forEach(s),r=0;r<Qt.length;r++)n=Qt[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Qt.length&&(r=Qt[0],r.blockedOn===null);)cu(r),r.blockedOn===null&&Qt.shift()}var tr=$t.ReactCurrentBatchConfig,aa=!0;function bh(t,s,r,n){var a=re,l=tr.transition;tr.transition=null;try{re=1,Yi(t,s,r,n)}finally{re=a,tr.transition=l}}function vh(t,s,r,n){var a=re,l=tr.transition;tr.transition=null;try{re=4,Yi(t,s,r,n)}finally{re=a,tr.transition=l}}function Yi(t,s,r,n){if(aa){var a=Ql(t,s,r,n);if(a===null)gl(t,s,n,la,r),Yo(t,n);else if(fh(a,t,s,r,n))n.stopPropagation();else if(Yo(t,n),s&4&&-1<gh.indexOf(t)){for(;a!==null;){var l=vn(a);if(l!==null&&au(l),l=Ql(t,s,r,n),l===null&&gl(t,s,n,la,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else gl(t,s,n,null,r)}}var la=null;function Ql(t,s,r,n){if(la=null,t=Bi(n),t=ws(t),t!==null)if(s=Rs(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Kd(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return la=t,null}function du(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ih()){case Vi:return 1;case tu:return 4;case ra:case oh:return 16;case su:return 536870912;default:return 16}default:return 16}}var Jt=null,Gi=null,qn=null;function uu(){if(qn)return qn;var t,s=Gi,r=s.length,n,a="value"in Jt?Jt.value:Jt.textContent,l=a.length;for(t=0;t<r&&s[t]===a[t];t++);var i=r-t;for(n=1;n<=i&&s[r-n]===a[l-n];n++);return qn=a.slice(t,1<n?1-n:void 0)}function Wn(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Pn(){return!0}function Xo(){return!1}function rt(t){function s(r,n,a,l,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Pn:Xo,this.isPropagationStopped=Xo,this}return he(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Pn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Pn)},persist:function(){},isPersistent:Pn}),s}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xi=rt(gr),bn=he({},gr,{view:0,detail:0}),jh=rt(bn),il,ol,Dr,Ia=he({},bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(il=t.screenX-Dr.screenX,ol=t.screenY-Dr.screenY):ol=il=0,Dr=t),il)},movementY:function(t){return"movementY"in t?t.movementY:ol}}),Qo=rt(Ia),Nh=he({},Ia,{dataTransfer:0}),wh=rt(Nh),Ch=he({},bn,{relatedTarget:0}),cl=rt(Ch),Sh=he({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Eh=rt(Sh),kh=he({},gr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Th=rt(kh),_h=he({},gr,{data:0}),Ko=rt(_h),Dh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ah={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mh(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ph[t])?!!s[t]:!1}function Qi(){return Mh}var Ih=he({},bn,{key:function(t){if(t.key){var s=Dh[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Wn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ah[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qi,charCode:function(t){return t.type==="keypress"?Wn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lh=rt(Ih),Rh=he({},Ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jo=rt(Rh),Oh=he({},bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qi}),Uh=rt(Oh),Fh=he({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),zh=rt(Fh),$h=he({},Ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hh=rt($h),Bh=[9,13,27,32],Ki=Rt&&"CompositionEvent"in window,Hr=null;Rt&&"documentMode"in document&&(Hr=document.documentMode);var Vh=Rt&&"TextEvent"in window&&!Hr,mu=Rt&&(!Ki||Hr&&8<Hr&&11>=Hr),Zo=" ",ec=!1;function xu(t,s){switch(t){case"keyup":return Bh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function qh(t,s){switch(t){case"compositionend":return hu(s);case"keypress":return s.which!==32?null:(ec=!0,Zo);case"textInput":return t=s.data,t===Zo&&ec?null:t;default:return null}}function Wh(t,s){if(Hs)return t==="compositionend"||!Ki&&xu(t,s)?(t=uu(),qn=Gi=Jt=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return mu&&s.locale!=="ko"?null:s.data;default:return null}}var Yh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Yh[t.type]:s==="textarea"}function pu(t,s,r,n){Wd(n),s=ia(s,"onChange"),0<s.length&&(r=new Xi("onChange","change",null,r,n),t.push({event:r,listeners:s}))}var Br=null,tn=null;function Gh(t){Eu(t,0)}function La(t){var s=qs(t);if(Fd(s))return t}function Xh(t,s){if(t==="change")return s}var gu=!1;if(Rt){var dl;if(Rt){var ul="oninput"in document;if(!ul){var sc=document.createElement("div");sc.setAttribute("oninput","return;"),ul=typeof sc.oninput=="function"}dl=ul}else dl=!1;gu=dl&&(!document.documentMode||9<document.documentMode)}function rc(){Br&&(Br.detachEvent("onpropertychange",fu),tn=Br=null)}function fu(t){if(t.propertyName==="value"&&La(tn)){var s=[];pu(s,tn,t,Bi(t)),Qd(Gh,s)}}function Qh(t,s,r){t==="focusin"?(rc(),Br=s,tn=r,Br.attachEvent("onpropertychange",fu)):t==="focusout"&&rc()}function Kh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return La(tn)}function Jh(t,s){if(t==="click")return La(s)}function Zh(t,s){if(t==="input"||t==="change")return La(s)}function e0(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var vt=typeof Object.is=="function"?Object.is:e0;function sn(t,s){if(vt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Pl.call(s,a)||!vt(t[a],s[a]))return!1}return!0}function nc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ac(t,s){var r=nc(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=s&&n>=s)return{node:r,offset:s-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nc(r)}}function yu(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?yu(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function bu(){for(var t=window,s=ea();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=ea(t.document)}return s}function Ji(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function t0(t){var s=bu(),r=t.focusedElem,n=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&yu(r.ownerDocument.documentElement,r)){if(n!==null&&Ji(r)){if(s=n.start,t=n.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!t.extend&&l>n&&(a=n,n=l,l=a),a=ac(r,l);var i=ac(r,n);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),l>n?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var s0=Rt&&"documentMode"in document&&11>=document.documentMode,Bs=null,Kl=null,Vr=null,Jl=!1;function lc(t,s,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jl||Bs==null||Bs!==ea(n)||(n=Bs,"selectionStart"in n&&Ji(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vr&&sn(Vr,n)||(Vr=n,n=ia(Kl,"onSelect"),0<n.length&&(s=new Xi("onSelect","select",null,s,r),t.push({event:s,listeners:n}),s.target=Bs)))}function Mn(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Vs={animationend:Mn("Animation","AnimationEnd"),animationiteration:Mn("Animation","AnimationIteration"),animationstart:Mn("Animation","AnimationStart"),transitionend:Mn("Transition","TransitionEnd")},ml={},vu={};Rt&&(vu=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function Ra(t){if(ml[t])return ml[t];if(!Vs[t])return t;var s=Vs[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in vu)return ml[t]=s[r];return t}var ju=Ra("animationend"),Nu=Ra("animationiteration"),wu=Ra("animationstart"),Cu=Ra("transitionend"),Su=new Map,ic="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,s){Su.set(t,s),Ls(s,[t])}for(var xl=0;xl<ic.length;xl++){var hl=ic[xl],r0=hl.toLowerCase(),n0=hl[0].toUpperCase()+hl.slice(1);xs(r0,"on"+n0)}xs(ju,"onAnimationEnd");xs(Nu,"onAnimationIteration");xs(wu,"onAnimationStart");xs("dblclick","onDoubleClick");xs("focusin","onFocus");xs("focusout","onBlur");xs(Cu,"onTransitionEnd");ar("onMouseEnter",["mouseout","mouseover"]);ar("onMouseLeave",["mouseout","mouseover"]);ar("onPointerEnter",["pointerout","pointerover"]);ar("onPointerLeave",["pointerout","pointerover"]);Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function oc(t,s,r){var n=t.type||"unknown-event";t.currentTarget=r,rh(n,s,void 0,t),t.currentTarget=null}function Eu(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var l=void 0;if(s)for(var i=n.length-1;0<=i;i--){var o=n[i],c=o.instance,x=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;oc(a,o,x),l=c}else for(i=0;i<n.length;i++){if(o=n[i],c=o.instance,x=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;oc(a,o,x),l=c}}}if(sa)throw t=Yl,sa=!1,Yl=null,t}function le(t,s){var r=s[ri];r===void 0&&(r=s[ri]=new Set);var n=t+"__bubble";r.has(n)||(ku(s,t,2,!1),r.add(n))}function pl(t,s,r){var n=0;s&&(n|=4),ku(r,t,n,s)}var In="_reactListening"+Math.random().toString(36).slice(2);function rn(t){if(!t[In]){t[In]=!0,Id.forEach(function(r){r!=="selectionchange"&&(a0.has(r)||pl(r,!1,t),pl(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[In]||(s[In]=!0,pl("selectionchange",!1,s))}}function ku(t,s,r,n){switch(du(s)){case 1:var a=bh;break;case 4:a=vh;break;default:a=Yi}r=a.bind(null,s,r,t),a=void 0,!Wl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(s,r,{capture:!0,passive:a}):t.addEventListener(s,r,!0):a!==void 0?t.addEventListener(s,r,{passive:a}):t.addEventListener(s,r,!1)}function gl(t,s,r,n,a){var l=n;if(!(s&1)&&!(s&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=ws(o),i===null)return;if(c=i.tag,c===5||c===6){n=l=i;continue e}o=o.parentNode}}n=n.return}Qd(function(){var x=l,u=Bi(r),m=[];e:{var f=Su.get(t);if(f!==void 0){var h=Xi,g=t;switch(t){case"keypress":if(Wn(r)===0)break e;case"keydown":case"keyup":h=Lh;break;case"focusin":g="focus",h=cl;break;case"focusout":g="blur",h=cl;break;case"beforeblur":case"afterblur":h=cl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Qo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Uh;break;case ju:case Nu:case wu:h=Eh;break;case Cu:h=zh;break;case"scroll":h=jh;break;case"wheel":h=Hh;break;case"copy":case"cut":case"paste":h=Th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Jo}var b=(s&4)!==0,v=!b&&t==="scroll",d=b?f!==null?f+"Capture":null:f;b=[];for(var y=x,p;y!==null;){p=y;var C=p.stateNode;if(p.tag===5&&C!==null&&(p=C,d!==null&&(C=Kr(y,d),C!=null&&b.push(nn(y,C,p)))),v)break;y=y.return}0<b.length&&(f=new h(f,g,null,r,u),m.push({event:f,listeners:b}))}}if(!(s&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&r!==Vl&&(g=r.relatedTarget||r.fromElement)&&(ws(g)||g[Ot]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(g=r.relatedTarget||r.toElement,h=x,g=g?ws(g):null,g!==null&&(v=Rs(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=x),h!==g)){if(b=Qo,C="onMouseLeave",d="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=Jo,C="onPointerLeave",d="onPointerEnter",y="pointer"),v=h==null?f:qs(h),p=g==null?f:qs(g),f=new b(C,y+"leave",h,r,u),f.target=v,f.relatedTarget=p,C=null,ws(u)===x&&(b=new b(d,y+"enter",g,r,u),b.target=p,b.relatedTarget=v,C=b),v=C,h&&g)t:{for(b=h,d=g,y=0,p=b;p;p=Us(p))y++;for(p=0,C=d;C;C=Us(C))p++;for(;0<y-p;)b=Us(b),y--;for(;0<p-y;)d=Us(d),p--;for(;y--;){if(b===d||d!==null&&b===d.alternate)break t;b=Us(b),d=Us(d)}b=null}else b=null;h!==null&&cc(m,f,h,b,!1),g!==null&&v!==null&&cc(m,v,g,b,!0)}}e:{if(f=x?qs(x):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=Xh;else if(tc(f))if(gu)k=Zh;else{k=Kh;var N=Qh}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Jh);if(k&&(k=k(t,x))){pu(m,k,r,u);break e}N&&N(t,f,x),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Fl(f,"number",f.value)}switch(N=x?qs(x):window,t){case"focusin":(tc(N)||N.contentEditable==="true")&&(Bs=N,Kl=x,Vr=null);break;case"focusout":Vr=Kl=Bs=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,lc(m,r,u);break;case"selectionchange":if(s0)break;case"keydown":case"keyup":lc(m,r,u)}var S;if(Ki)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Hs?xu(t,r)&&(w="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(mu&&r.locale!=="ko"&&(Hs||w!=="onCompositionStart"?w==="onCompositionEnd"&&Hs&&(S=uu()):(Jt=u,Gi="value"in Jt?Jt.value:Jt.textContent,Hs=!0)),N=ia(x,w),0<N.length&&(w=new Ko(w,t,null,r,u),m.push({event:w,listeners:N}),S?w.data=S:(S=hu(r),S!==null&&(w.data=S)))),(S=Vh?qh(t,r):Wh(t,r))&&(x=ia(x,"onBeforeInput"),0<x.length&&(u=new Ko("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:x}),u.data=S))}Eu(m,s)})}function nn(t,s,r){return{instance:t,listener:s,currentTarget:r}}function ia(t,s){for(var r=s+"Capture",n=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Kr(t,r),l!=null&&n.unshift(nn(t,l,a)),l=Kr(t,s),l!=null&&n.push(nn(t,l,a))),t=t.return}return n}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cc(t,s,r,n,a){for(var l=s._reactName,i=[];r!==null&&r!==n;){var o=r,c=o.alternate,x=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&x!==null&&(o=x,a?(c=Kr(r,l),c!=null&&i.unshift(nn(r,c,o))):a||(c=Kr(r,l),c!=null&&i.push(nn(r,c,o)))),r=r.return}i.length!==0&&t.push({event:s,listeners:i})}var l0=/\r\n?/g,i0=/\u0000|\uFFFD/g;function dc(t){return(typeof t=="string"?t:""+t).replace(l0,`
`).replace(i0,"")}function Ln(t,s,r){if(s=dc(s),dc(t)!==s&&r)throw Error(z(425))}function oa(){}var Zl=null,ei=null;function ti(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var si=typeof setTimeout=="function"?setTimeout:void 0,o0=typeof clearTimeout=="function"?clearTimeout:void 0,uc=typeof Promise=="function"?Promise:void 0,c0=typeof queueMicrotask=="function"?queueMicrotask:typeof uc<"u"?function(t){return uc.resolve(null).then(t).catch(d0)}:si;function d0(t){setTimeout(function(){throw t})}function fl(t,s){var r=s,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),en(s);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);en(s)}function ns(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function mc(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var fr=Math.random().toString(36).slice(2),St="__reactFiber$"+fr,an="__reactProps$"+fr,Ot="__reactContainer$"+fr,ri="__reactEvents$"+fr,u0="__reactListeners$"+fr,m0="__reactHandles$"+fr;function ws(t){var s=t[St];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Ot]||r[St]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=mc(t);t!==null;){if(r=t[St])return r;t=mc(t)}return s}t=r,r=t.parentNode}return null}function vn(t){return t=t[St]||t[Ot],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Oa(t){return t[an]||null}var ni=[],Ws=-1;function hs(t){return{current:t}}function oe(t){0>Ws||(t.current=ni[Ws],ni[Ws]=null,Ws--)}function ae(t,s){Ws++,ni[Ws]=t.current,t.current=s}var us={},Fe=hs(us),Ge=hs(!1),Ts=us;function lr(t,s){var r=t.type.contextTypes;if(!r)return us;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===s)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=s[l];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function Xe(t){return t=t.childContextTypes,t!=null}function ca(){oe(Ge),oe(Fe)}function xc(t,s,r){if(Fe.current!==us)throw Error(z(168));ae(Fe,s),ae(Ge,r)}function Tu(t,s,r){var n=t.stateNode;if(s=s.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(z(108,Qx(t)||"Unknown",a));return he({},r,n)}function da(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||us,Ts=Fe.current,ae(Fe,t),ae(Ge,Ge.current),!0}function hc(t,s,r){var n=t.stateNode;if(!n)throw Error(z(169));r?(t=Tu(t,s,Ts),n.__reactInternalMemoizedMergedChildContext=t,oe(Ge),oe(Fe),ae(Fe,t)):oe(Ge),ae(Ge,r)}var At=null,Ua=!1,yl=!1;function _u(t){At===null?At=[t]:At.push(t)}function x0(t){Ua=!0,_u(t)}function ps(){if(!yl&&At!==null){yl=!0;var t=0,s=re;try{var r=At;for(re=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}At=null,Ua=!1}catch(a){throw At!==null&&(At=At.slice(t+1)),eu(Vi,ps),a}finally{re=s,yl=!1}}return null}var Ys=[],Gs=0,ua=null,ma=0,at=[],lt=0,_s=null,Pt=1,Mt="";function bs(t,s){Ys[Gs++]=ma,Ys[Gs++]=ua,ua=t,ma=s}function Du(t,s,r){at[lt++]=Pt,at[lt++]=Mt,at[lt++]=_s,_s=t;var n=Pt;t=Mt;var a=32-ft(n)-1;n&=~(1<<a),r+=1;var l=32-ft(s)+a;if(30<l){var i=a-a%5;l=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Pt=1<<32-ft(s)+a|r<<a|n,Mt=l+t}else Pt=1<<l|r<<a|n,Mt=t}function Zi(t){t.return!==null&&(bs(t,1),Du(t,1,0))}function eo(t){for(;t===ua;)ua=Ys[--Gs],Ys[Gs]=null,ma=Ys[--Gs],Ys[Gs]=null;for(;t===_s;)_s=at[--lt],at[lt]=null,Mt=at[--lt],at[lt]=null,Pt=at[--lt],at[lt]=null}var Ze=null,Je=null,de=!1,pt=null;function Au(t,s){var r=it(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function pc(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ze=t,Je=ns(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ze=t,Je=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=_s!==null?{id:Pt,overflow:Mt}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=it(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,Ze=t,Je=null,!0):!1;default:return!1}}function ai(t){return(t.mode&1)!==0&&(t.flags&128)===0}function li(t){if(de){var s=Je;if(s){var r=s;if(!pc(t,s)){if(ai(t))throw Error(z(418));s=ns(r.nextSibling);var n=Ze;s&&pc(t,s)?Au(n,r):(t.flags=t.flags&-4097|2,de=!1,Ze=t)}}else{if(ai(t))throw Error(z(418));t.flags=t.flags&-4097|2,de=!1,Ze=t}}}function gc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ze=t}function Rn(t){if(t!==Ze)return!1;if(!de)return gc(t),de=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!ti(t.type,t.memoizedProps)),s&&(s=Je)){if(ai(t))throw Pu(),Error(z(418));for(;s;)Au(t,s),s=ns(s.nextSibling)}if(gc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){Je=ns(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}Je=null}}else Je=Ze?ns(t.stateNode.nextSibling):null;return!0}function Pu(){for(var t=Je;t;)t=ns(t.nextSibling)}function ir(){Je=Ze=null,de=!1}function to(t){pt===null?pt=[t]:pt.push(t)}var h0=$t.ReactCurrentBatchConfig;function Ar(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var n=r.stateNode}if(!n)throw Error(z(147,t));var a=n,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,t))}return t}function On(t,s){throw t=Object.prototype.toString.call(s),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function fc(t){var s=t._init;return s(t._payload)}function Mu(t){function s(d,y){if(t){var p=d.deletions;p===null?(d.deletions=[y],d.flags|=16):p.push(y)}}function r(d,y){if(!t)return null;for(;y!==null;)s(d,y),y=y.sibling;return null}function n(d,y){for(d=new Map;y!==null;)y.key!==null?d.set(y.key,y):d.set(y.index,y),y=y.sibling;return d}function a(d,y){return d=os(d,y),d.index=0,d.sibling=null,d}function l(d,y,p){return d.index=p,t?(p=d.alternate,p!==null?(p=p.index,p<y?(d.flags|=2,y):p):(d.flags|=2,y)):(d.flags|=1048576,y)}function i(d){return t&&d.alternate===null&&(d.flags|=2),d}function o(d,y,p,C){return y===null||y.tag!==6?(y=Sl(p,d.mode,C),y.return=d,y):(y=a(y,p),y.return=d,y)}function c(d,y,p,C){var k=p.type;return k===$s?u(d,y,p.props.children,C,p.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Gt&&fc(k)===y.type)?(C=a(y,p.props),C.ref=Ar(d,y,p),C.return=d,C):(C=Zn(p.type,p.key,p.props,null,d.mode,C),C.ref=Ar(d,y,p),C.return=d,C)}function x(d,y,p,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==p.containerInfo||y.stateNode.implementation!==p.implementation?(y=El(p,d.mode,C),y.return=d,y):(y=a(y,p.children||[]),y.return=d,y)}function u(d,y,p,C,k){return y===null||y.tag!==7?(y=ks(p,d.mode,C,k),y.return=d,y):(y=a(y,p),y.return=d,y)}function m(d,y,p){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Sl(""+y,d.mode,p),y.return=d,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case En:return p=Zn(y.type,y.key,y.props,null,d.mode,p),p.ref=Ar(d,null,y),p.return=d,p;case zs:return y=El(y,d.mode,p),y.return=d,y;case Gt:var C=y._init;return m(d,C(y._payload),p)}if(Or(y)||Er(y))return y=ks(y,d.mode,p,null),y.return=d,y;On(d,y)}return null}function f(d,y,p,C){var k=y!==null?y.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return k!==null?null:o(d,y,""+p,C);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case En:return p.key===k?c(d,y,p,C):null;case zs:return p.key===k?x(d,y,p,C):null;case Gt:return k=p._init,f(d,y,k(p._payload),C)}if(Or(p)||Er(p))return k!==null?null:u(d,y,p,C,null);On(d,p)}return null}function h(d,y,p,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return d=d.get(p)||null,o(y,d,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case En:return d=d.get(C.key===null?p:C.key)||null,c(y,d,C,k);case zs:return d=d.get(C.key===null?p:C.key)||null,x(y,d,C,k);case Gt:var N=C._init;return h(d,y,p,N(C._payload),k)}if(Or(C)||Er(C))return d=d.get(p)||null,u(y,d,C,k,null);On(y,C)}return null}function g(d,y,p,C){for(var k=null,N=null,S=y,w=y=0,D=null;S!==null&&w<p.length;w++){S.index>w?(D=S,S=null):D=S.sibling;var A=f(d,S,p[w],C);if(A===null){S===null&&(S=D);break}t&&S&&A.alternate===null&&s(d,S),y=l(A,y,w),N===null?k=A:N.sibling=A,N=A,S=D}if(w===p.length)return r(d,S),de&&bs(d,w),k;if(S===null){for(;w<p.length;w++)S=m(d,p[w],C),S!==null&&(y=l(S,y,w),N===null?k=S:N.sibling=S,N=S);return de&&bs(d,w),k}for(S=n(d,S);w<p.length;w++)D=h(S,d,w,p[w],C),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?w:D.key),y=l(D,y,w),N===null?k=D:N.sibling=D,N=D);return t&&S.forEach(function(_){return s(d,_)}),de&&bs(d,w),k}function b(d,y,p,C){var k=Er(p);if(typeof k!="function")throw Error(z(150));if(p=k.call(p),p==null)throw Error(z(151));for(var N=k=null,S=y,w=y=0,D=null,A=p.next();S!==null&&!A.done;w++,A=p.next()){S.index>w?(D=S,S=null):D=S.sibling;var _=f(d,S,A.value,C);if(_===null){S===null&&(S=D);break}t&&S&&_.alternate===null&&s(d,S),y=l(_,y,w),N===null?k=_:N.sibling=_,N=_,S=D}if(A.done)return r(d,S),de&&bs(d,w),k;if(S===null){for(;!A.done;w++,A=p.next())A=m(d,A.value,C),A!==null&&(y=l(A,y,w),N===null?k=A:N.sibling=A,N=A);return de&&bs(d,w),k}for(S=n(d,S);!A.done;w++,A=p.next())A=h(S,d,w,A.value,C),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?w:A.key),y=l(A,y,w),N===null?k=A:N.sibling=A,N=A);return t&&S.forEach(function(L){return s(d,L)}),de&&bs(d,w),k}function v(d,y,p,C){if(typeof p=="object"&&p!==null&&p.type===$s&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case En:e:{for(var k=p.key,N=y;N!==null;){if(N.key===k){if(k=p.type,k===$s){if(N.tag===7){r(d,N.sibling),y=a(N,p.props.children),y.return=d,d=y;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Gt&&fc(k)===N.type){r(d,N.sibling),y=a(N,p.props),y.ref=Ar(d,N,p),y.return=d,d=y;break e}r(d,N);break}else s(d,N);N=N.sibling}p.type===$s?(y=ks(p.props.children,d.mode,C,p.key),y.return=d,d=y):(C=Zn(p.type,p.key,p.props,null,d.mode,C),C.ref=Ar(d,y,p),C.return=d,d=C)}return i(d);case zs:e:{for(N=p.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===p.containerInfo&&y.stateNode.implementation===p.implementation){r(d,y.sibling),y=a(y,p.children||[]),y.return=d,d=y;break e}else{r(d,y);break}else s(d,y);y=y.sibling}y=El(p,d.mode,C),y.return=d,d=y}return i(d);case Gt:return N=p._init,v(d,y,N(p._payload),C)}if(Or(p))return g(d,y,p,C);if(Er(p))return b(d,y,p,C);On(d,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,y!==null&&y.tag===6?(r(d,y.sibling),y=a(y,p),y.return=d,d=y):(r(d,y),y=Sl(p,d.mode,C),y.return=d,d=y),i(d)):r(d,y)}return v}var or=Mu(!0),Iu=Mu(!1),xa=hs(null),ha=null,Xs=null,so=null;function ro(){so=Xs=ha=null}function no(t){var s=xa.current;oe(xa),t._currentValue=s}function ii(t,s,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),t===r)break;t=t.return}}function sr(t,s){ha=t,so=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(We=!0),t.firstContext=null)}function dt(t){var s=t._currentValue;if(so!==t)if(t={context:t,memoizedValue:s,next:null},Xs===null){if(ha===null)throw Error(z(308));Xs=t,ha.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return s}var Cs=null;function ao(t){Cs===null?Cs=[t]:Cs.push(t)}function Lu(t,s,r,n){var a=s.interleaved;return a===null?(r.next=r,ao(s)):(r.next=a.next,a.next=r),s.interleaved=r,Ut(t,n)}function Ut(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Xt=!1;function lo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ru(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function It(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function as(t,s,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var a=n.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s,Ut(t,r)}return a=n.interleaved,a===null?(s.next=s,ao(n)):(s.next=a.next,a.next=s),n.interleaved=s,Ut(t,r)}function Yn(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,qi(t,r)}}function yc(t,s){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?a=l=s:l=l.next=s}else a=l=s;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function pa(t,s,r,n){var a=t.updateQueue;Xt=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,x=c.next;c.next=null,i===null?l=x:i.next=x,i=c;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==i&&(o===null?u.firstBaseUpdate=x:o.next=x,u.lastBaseUpdate=c))}if(l!==null){var m=a.baseState;i=0,u=x=c=null,o=l;do{var f=o.lane,h=o.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,b=o;switch(f=s,h=r,b.tag){case 1:if(g=b.payload,typeof g=="function"){m=g.call(h,m,f);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=b.payload,f=typeof g=="function"?g.call(h,m,f):g,f==null)break e;m=he({},m,f);break e;case 2:Xt=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=a.effects,f===null?a.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(x=u=h,c=m):u=u.next=h,i|=f;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;f=o,o=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=x,a.lastBaseUpdate=u,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);As|=i,t.lanes=i,t.memoizedState=m}}function bc(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var n=t[s],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(z(191,a));a.call(n)}}}var jn={},kt=hs(jn),ln=hs(jn),on=hs(jn);function Ss(t){if(t===jn)throw Error(z(174));return t}function io(t,s){switch(ae(on,s),ae(ln,t),ae(kt,jn),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:$l(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=$l(s,t)}oe(kt),ae(kt,s)}function cr(){oe(kt),oe(ln),oe(on)}function Ou(t){Ss(on.current);var s=Ss(kt.current),r=$l(s,t.type);s!==r&&(ae(ln,t),ae(kt,r))}function oo(t){ln.current===t&&(oe(kt),oe(ln))}var ue=hs(0);function ga(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var bl=[];function co(){for(var t=0;t<bl.length;t++)bl[t]._workInProgressVersionPrimary=null;bl.length=0}var Gn=$t.ReactCurrentDispatcher,vl=$t.ReactCurrentBatchConfig,Ds=0,me=null,Ce=null,ke=null,fa=!1,qr=!1,cn=0,p0=0;function Re(){throw Error(z(321))}function uo(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!vt(t[r],s[r]))return!1;return!0}function mo(t,s,r,n,a,l){if(Ds=l,me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Gn.current=t===null||t.memoizedState===null?b0:v0,t=r(n,a),qr){l=0;do{if(qr=!1,cn=0,25<=l)throw Error(z(301));l+=1,ke=Ce=null,s.updateQueue=null,Gn.current=j0,t=r(n,a)}while(qr)}if(Gn.current=ya,s=Ce!==null&&Ce.next!==null,Ds=0,ke=Ce=me=null,fa=!1,s)throw Error(z(300));return t}function xo(){var t=cn!==0;return cn=0,t}function Ct(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?me.memoizedState=ke=t:ke=ke.next=t,ke}function ut(){if(Ce===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var s=ke===null?me.memoizedState:ke.next;if(s!==null)ke=s,Ce=t;else{if(t===null)throw Error(z(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},ke===null?me.memoizedState=ke=t:ke=ke.next=t}return ke}function dn(t,s){return typeof s=="function"?s(t):s}function jl(t){var s=ut(),r=s.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var n=Ce,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var o=i=null,c=null,x=l;do{var u=x.lane;if((Ds&u)===u)c!==null&&(c=c.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),n=x.hasEagerState?x.eagerState:t(n,x.action);else{var m={lane:u,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};c===null?(o=c=m,i=n):c=c.next=m,me.lanes|=u,As|=u}x=x.next}while(x!==null&&x!==l);c===null?i=n:c.next=o,vt(n,s.memoizedState)||(We=!0),s.memoizedState=n,s.baseState=i,s.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do l=a.lane,me.lanes|=l,As|=l,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Nl(t){var s=ut(),r=s.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,l=s.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do l=t(l,i.action),i=i.next;while(i!==a);vt(l,s.memoizedState)||(We=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,n]}function Uu(){}function Fu(t,s){var r=me,n=ut(),a=s(),l=!vt(n.memoizedState,a);if(l&&(n.memoizedState=a,We=!0),n=n.queue,ho(Hu.bind(null,r,n,t),[t]),n.getSnapshot!==s||l||ke!==null&&ke.memoizedState.tag&1){if(r.flags|=2048,un(9,$u.bind(null,r,n,a,s),void 0,null),Te===null)throw Error(z(349));Ds&30||zu(r,s,a)}return a}function zu(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=me.updateQueue,s===null?(s={lastEffect:null,stores:null},me.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function $u(t,s,r,n){s.value=r,s.getSnapshot=n,Bu(s)&&Vu(t)}function Hu(t,s,r){return r(function(){Bu(s)&&Vu(t)})}function Bu(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!vt(t,r)}catch{return!0}}function Vu(t){var s=Ut(t,1);s!==null&&yt(s,t,1,-1)}function vc(t){var s=Ct();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:t},s.queue=t,t=t.dispatch=y0.bind(null,me,t),[s.memoizedState,t]}function un(t,s,r,n){return t={tag:t,create:s,destroy:r,deps:n,next:null},s=me.updateQueue,s===null?(s={lastEffect:null,stores:null},me.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,s.lastEffect=t)),t}function qu(){return ut().memoizedState}function Xn(t,s,r,n){var a=Ct();me.flags|=t,a.memoizedState=un(1|s,r,void 0,n===void 0?null:n)}function Fa(t,s,r,n){var a=ut();n=n===void 0?null:n;var l=void 0;if(Ce!==null){var i=Ce.memoizedState;if(l=i.destroy,n!==null&&uo(n,i.deps)){a.memoizedState=un(s,r,l,n);return}}me.flags|=t,a.memoizedState=un(1|s,r,l,n)}function jc(t,s){return Xn(8390656,8,t,s)}function ho(t,s){return Fa(2048,8,t,s)}function Wu(t,s){return Fa(4,2,t,s)}function Yu(t,s){return Fa(4,4,t,s)}function Gu(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Xu(t,s,r){return r=r!=null?r.concat([t]):null,Fa(4,4,Gu.bind(null,s,t),r)}function po(){}function Qu(t,s){var r=ut();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&uo(s,n[1])?n[0]:(r.memoizedState=[t,s],t)}function Ku(t,s){var r=ut();s=s===void 0?null:s;var n=r.memoizedState;return n!==null&&s!==null&&uo(s,n[1])?n[0]:(t=t(),r.memoizedState=[t,s],t)}function Ju(t,s,r){return Ds&21?(vt(r,s)||(r=ru(),me.lanes|=r,As|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,We=!0),t.memoizedState=r)}function g0(t,s){var r=re;re=r!==0&&4>r?r:4,t(!0);var n=vl.transition;vl.transition={};try{t(!1),s()}finally{re=r,vl.transition=n}}function Zu(){return ut().memoizedState}function f0(t,s,r){var n=is(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},em(t))tm(s,r);else if(r=Lu(t,s,r,n),r!==null){var a=$e();yt(r,t,n,a),sm(r,s,n)}}function y0(t,s,r){var n=is(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(em(t))tm(s,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,r);if(a.hasEagerState=!0,a.eagerState=o,vt(o,i)){var c=s.interleaved;c===null?(a.next=a,ao(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}r=Lu(t,s,a,n),r!==null&&(a=$e(),yt(r,t,n,a),sm(r,s,n))}}function em(t){var s=t.alternate;return t===me||s!==null&&s===me}function tm(t,s){qr=fa=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function sm(t,s,r){if(r&4194240){var n=s.lanes;n&=t.pendingLanes,r|=n,s.lanes=r,qi(t,r)}}var ya={readContext:dt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},b0={readContext:dt,useCallback:function(t,s){return Ct().memoizedState=[t,s===void 0?null:s],t},useContext:dt,useEffect:jc,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Xn(4194308,4,Gu.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Xn(4194308,4,t,s)},useInsertionEffect:function(t,s){return Xn(4,2,t,s)},useMemo:function(t,s){var r=Ct();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var n=Ct();return s=r!==void 0?r(s):s,n.memoizedState=n.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},n.queue=t,t=t.dispatch=f0.bind(null,me,t),[n.memoizedState,t]},useRef:function(t){var s=Ct();return t={current:t},s.memoizedState=t},useState:vc,useDebugValue:po,useDeferredValue:function(t){return Ct().memoizedState=t},useTransition:function(){var t=vc(!1),s=t[0];return t=g0.bind(null,t[1]),Ct().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var n=me,a=Ct();if(de){if(r===void 0)throw Error(z(407));r=r()}else{if(r=s(),Te===null)throw Error(z(349));Ds&30||zu(n,s,r)}a.memoizedState=r;var l={value:r,getSnapshot:s};return a.queue=l,jc(Hu.bind(null,n,l,t),[t]),n.flags|=2048,un(9,$u.bind(null,n,l,r,s),void 0,null),r},useId:function(){var t=Ct(),s=Te.identifierPrefix;if(de){var r=Mt,n=Pt;r=(n&~(1<<32-ft(n)-1)).toString(32)+r,s=":"+s+"R"+r,r=cn++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=p0++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},v0={readContext:dt,useCallback:Qu,useContext:dt,useEffect:ho,useImperativeHandle:Xu,useInsertionEffect:Wu,useLayoutEffect:Yu,useMemo:Ku,useReducer:jl,useRef:qu,useState:function(){return jl(dn)},useDebugValue:po,useDeferredValue:function(t){var s=ut();return Ju(s,Ce.memoizedState,t)},useTransition:function(){var t=jl(dn)[0],s=ut().memoizedState;return[t,s]},useMutableSource:Uu,useSyncExternalStore:Fu,useId:Zu,unstable_isNewReconciler:!1},j0={readContext:dt,useCallback:Qu,useContext:dt,useEffect:ho,useImperativeHandle:Xu,useInsertionEffect:Wu,useLayoutEffect:Yu,useMemo:Ku,useReducer:Nl,useRef:qu,useState:function(){return Nl(dn)},useDebugValue:po,useDeferredValue:function(t){var s=ut();return Ce===null?s.memoizedState=t:Ju(s,Ce.memoizedState,t)},useTransition:function(){var t=Nl(dn)[0],s=ut().memoizedState;return[t,s]},useMutableSource:Uu,useSyncExternalStore:Fu,useId:Zu,unstable_isNewReconciler:!1};function xt(t,s){if(t&&t.defaultProps){s=he({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function oi(t,s,r,n){s=t.memoizedState,r=r(n,s),r=r==null?s:he({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var za={isMounted:function(t){return(t=t._reactInternals)?Rs(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var n=$e(),a=is(t),l=It(n,a);l.payload=s,r!=null&&(l.callback=r),s=as(t,l,a),s!==null&&(yt(s,t,a,n),Yn(s,t,a))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var n=$e(),a=is(t),l=It(n,a);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=as(t,l,a),s!==null&&(yt(s,t,a,n),Yn(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=$e(),n=is(t),a=It(r,n);a.tag=2,s!=null&&(a.callback=s),s=as(t,a,n),s!==null&&(yt(s,t,n,r),Yn(s,t,n))}};function Nc(t,s,r,n,a,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,l,i):s.prototype&&s.prototype.isPureReactComponent?!sn(r,n)||!sn(a,l):!0}function rm(t,s,r){var n=!1,a=us,l=s.contextType;return typeof l=="object"&&l!==null?l=dt(l):(a=Xe(s)?Ts:Fe.current,n=s.contextTypes,l=(n=n!=null)?lr(t,a):us),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=za,t.stateNode=s,s._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),s}function wc(t,s,r,n){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,n),s.state!==t&&za.enqueueReplaceState(s,s.state,null)}function ci(t,s,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},lo(t);var l=s.contextType;typeof l=="object"&&l!==null?a.context=dt(l):(l=Xe(s)?Ts:Fe.current,a.context=lr(t,l)),a.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(oi(t,s,l,r),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&za.enqueueReplaceState(a,a.state,null),pa(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function dr(t,s){try{var r="",n=s;do r+=Xx(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:a,digest:null}}function wl(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function di(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var N0=typeof WeakMap=="function"?WeakMap:Map;function nm(t,s,r){r=It(-1,r),r.tag=3,r.payload={element:null};var n=s.value;return r.callback=function(){va||(va=!0,vi=n),di(t,s)},r}function am(t,s,r){r=It(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=s.value;r.payload=function(){return n(a)},r.callback=function(){di(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){di(t,s),typeof n!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function Cc(t,s,r){var n=t.pingCache;if(n===null){n=t.pingCache=new N0;var a=new Set;n.set(s,a)}else a=n.get(s),a===void 0&&(a=new Set,n.set(s,a));a.has(r)||(a.add(r),t=R0.bind(null,t,s,r),s.then(t,t))}function Sc(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Ec(t,s,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=It(-1,1),s.tag=2,as(r,s,1))),r.lanes|=1),t)}var w0=$t.ReactCurrentOwner,We=!1;function ze(t,s,r,n){s.child=t===null?Iu(s,null,r,n):or(s,t.child,r,n)}function kc(t,s,r,n,a){r=r.render;var l=s.ref;return sr(s,a),n=mo(t,s,r,n,l,a),r=xo(),t!==null&&!We?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Ft(t,s,a)):(de&&r&&Zi(s),s.flags|=1,ze(t,s,n,a),s.child)}function Tc(t,s,r,n,a){if(t===null){var l=r.type;return typeof l=="function"&&!wo(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,lm(t,s,l,n,a)):(t=Zn(r.type,null,n,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&a)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:sn,r(i,n)&&t.ref===s.ref)return Ft(t,s,a)}return s.flags|=1,t=os(l,n),t.ref=s.ref,t.return=s,s.child=t}function lm(t,s,r,n,a){if(t!==null){var l=t.memoizedProps;if(sn(l,n)&&t.ref===s.ref)if(We=!1,s.pendingProps=n=l,(t.lanes&a)!==0)t.flags&131072&&(We=!0);else return s.lanes=t.lanes,Ft(t,s,a)}return ui(t,s,r,n,a)}function im(t,s,r){var n=s.pendingProps,a=n.children,l=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Ks,Ke),Ke|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,ae(Ks,Ke),Ke|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,ae(Ks,Ke),Ke|=n}else l!==null?(n=l.baseLanes|r,s.memoizedState=null):n=r,ae(Ks,Ke),Ke|=n;return ze(t,s,a,r),s.child}function om(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function ui(t,s,r,n,a){var l=Xe(r)?Ts:Fe.current;return l=lr(s,l),sr(s,a),r=mo(t,s,r,n,l,a),n=xo(),t!==null&&!We?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,Ft(t,s,a)):(de&&n&&Zi(s),s.flags|=1,ze(t,s,r,a),s.child)}function _c(t,s,r,n,a){if(Xe(r)){var l=!0;da(s)}else l=!1;if(sr(s,a),s.stateNode===null)Qn(t,s),rm(s,r,n),ci(s,r,n,a),n=!0;else if(t===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var c=i.context,x=r.contextType;typeof x=="object"&&x!==null?x=dt(x):(x=Xe(r)?Ts:Fe.current,x=lr(s,x));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==n||c!==x)&&wc(s,i,n,x),Xt=!1;var f=s.memoizedState;i.state=f,pa(s,n,i,a),c=s.memoizedState,o!==n||f!==c||Ge.current||Xt?(typeof u=="function"&&(oi(s,r,u,n),c=s.memoizedState),(o=Xt||Nc(s,r,o,n,f,c,x))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=c),i.props=n,i.state=c,i.context=x,n=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{i=s.stateNode,Ru(t,s),o=s.memoizedProps,x=s.type===s.elementType?o:xt(s.type,o),i.props=x,m=s.pendingProps,f=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=dt(c):(c=Xe(r)?Ts:Fe.current,c=lr(s,c));var h=r.getDerivedStateFromProps;(u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==m||f!==c)&&wc(s,i,n,c),Xt=!1,f=s.memoizedState,i.state=f,pa(s,n,i,a);var g=s.memoizedState;o!==m||f!==g||Ge.current||Xt?(typeof h=="function"&&(oi(s,r,h,n),g=s.memoizedState),(x=Xt||Nc(s,r,x,n,f,g,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=g),i.props=n,i.state=g,i.context=c,n=x):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),n=!1)}return mi(t,s,r,n,l,a)}function mi(t,s,r,n,a,l){om(t,s);var i=(s.flags&128)!==0;if(!n&&!i)return a&&hc(s,r,!1),Ft(t,s,l);n=s.stateNode,w0.current=s;var o=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return s.flags|=1,t!==null&&i?(s.child=or(s,t.child,null,l),s.child=or(s,null,o,l)):ze(t,s,o,l),s.memoizedState=n.state,a&&hc(s,r,!0),s.child}function cm(t){var s=t.stateNode;s.pendingContext?xc(t,s.pendingContext,s.pendingContext!==s.context):s.context&&xc(t,s.context,!1),io(t,s.containerInfo)}function Dc(t,s,r,n,a){return ir(),to(a),s.flags|=256,ze(t,s,r,n),s.child}var xi={dehydrated:null,treeContext:null,retryLane:0};function hi(t){return{baseLanes:t,cachePool:null,transitions:null}}function dm(t,s,r){var n=s.pendingProps,a=ue.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),ae(ue,a&1),t===null)return li(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=n.children,t=n.fallback,l?(n=s.mode,l=s.child,i={mode:"hidden",children:i},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Ba(i,n,0,null),t=ks(t,n,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=hi(r),s.memoizedState=xi,t):go(s,i));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return C0(t,s,i,n,o,a,r);if(l){l=n.fallback,i=s.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&s.child!==a?(n=s.child,n.childLanes=0,n.pendingProps=c,s.deletions=null):(n=os(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=os(o,l):(l=ks(l,i,r,null),l.flags|=2),l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,i=t.child.memoizedState,i=i===null?hi(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~r,s.memoizedState=xi,n}return l=t.child,t=l.sibling,n=os(l,{mode:"visible",children:n.children}),!(s.mode&1)&&(n.lanes=r),n.return=s,n.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=n,s.memoizedState=null,n}function go(t,s){return s=Ba({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Un(t,s,r,n){return n!==null&&to(n),or(s,t.child,null,r),t=go(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function C0(t,s,r,n,a,l,i){if(r)return s.flags&256?(s.flags&=-257,n=wl(Error(z(422))),Un(t,s,i,n)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=n.fallback,a=s.mode,n=Ba({mode:"visible",children:n.children},a,0,null),l=ks(l,a,i,null),l.flags|=2,n.return=s,l.return=s,n.sibling=l,s.child=n,s.mode&1&&or(s,t.child,null,i),s.child.memoizedState=hi(i),s.memoizedState=xi,l);if(!(s.mode&1))return Un(t,s,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,l=Error(z(419)),n=wl(l,n,void 0),Un(t,s,i,n)}if(o=(i&t.childLanes)!==0,We||o){if(n=Te,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Ut(t,a),yt(n,t,a,-1))}return No(),n=wl(Error(z(421))),Un(t,s,i,n)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=O0.bind(null,t),a._reactRetry=s,null):(t=l.treeContext,Je=ns(a.nextSibling),Ze=s,de=!0,pt=null,t!==null&&(at[lt++]=Pt,at[lt++]=Mt,at[lt++]=_s,Pt=t.id,Mt=t.overflow,_s=s),s=go(s,n.children),s.flags|=4096,s)}function Ac(t,s,r){t.lanes|=s;var n=t.alternate;n!==null&&(n.lanes|=s),ii(t.return,s,r)}function Cl(t,s,r,n,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function um(t,s,r){var n=s.pendingProps,a=n.revealOrder,l=n.tail;if(ze(t,s,n.children,r),n=ue.current,n&2)n=n&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ac(t,r,s);else if(t.tag===19)Ac(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ae(ue,n),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(r=s.child,a=null;r!==null;)t=r.alternate,t!==null&&ga(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=s.child,s.child=null):(a=r.sibling,r.sibling=null),Cl(s,!1,a,r,l);break;case"backwards":for(r=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&ga(t)===null){s.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Cl(s,!0,r,null,l);break;case"together":Cl(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Qn(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Ft(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),As|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(z(153));if(s.child!==null){for(t=s.child,r=os(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=os(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function S0(t,s,r){switch(s.tag){case 3:cm(s),ir();break;case 5:Ou(s);break;case 1:Xe(s.type)&&da(s);break;case 4:io(s,s.stateNode.containerInfo);break;case 10:var n=s.type._context,a=s.memoizedProps.value;ae(xa,n._currentValue),n._currentValue=a;break;case 13:if(n=s.memoizedState,n!==null)return n.dehydrated!==null?(ae(ue,ue.current&1),s.flags|=128,null):r&s.child.childLanes?dm(t,s,r):(ae(ue,ue.current&1),t=Ft(t,s,r),t!==null?t.sibling:null);ae(ue,ue.current&1);break;case 19:if(n=(r&s.childLanes)!==0,t.flags&128){if(n)return um(t,s,r);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ae(ue,ue.current),n)break;return null;case 22:case 23:return s.lanes=0,im(t,s,r)}return Ft(t,s,r)}var mm,pi,xm,hm;mm=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pi=function(){};xm=function(t,s,r,n){var a=t.memoizedProps;if(a!==n){t=s.stateNode,Ss(kt.current);var l=null;switch(r){case"input":a=Ol(t,a),n=Ol(t,n),l=[];break;case"select":a=he({},a,{value:void 0}),n=he({},n,{value:void 0}),l=[];break;case"textarea":a=zl(t,a),n=zl(t,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=oa)}Hl(r,n);var i;r=null;for(x in a)if(!n.hasOwnProperty(x)&&a.hasOwnProperty(x)&&a[x]!=null)if(x==="style"){var o=a[x];for(i in o)o.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Xr.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in n){var c=n[x];if(o=a!=null?a[x]:void 0,n.hasOwnProperty(x)&&c!==o&&(c!=null||o!=null))if(x==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(x,r)),r=c;else x==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(x,c)):x==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(x,""+c):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(Xr.hasOwnProperty(x)?(c!=null&&x==="onScroll"&&le("scroll",t),l||o===c||(l=[])):(l=l||[]).push(x,c))}r&&(l=l||[]).push("style",r);var x=l;(s.updateQueue=x)&&(s.flags|=4)}};hm=function(t,s,r,n){r!==n&&(s.flags|=4)};function Pr(t,s){if(!de)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Oe(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(s)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,s}function E0(t,s,r){var n=s.pendingProps;switch(eo(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(s),null;case 1:return Xe(s.type)&&ca(),Oe(s),null;case 3:return n=s.stateNode,cr(),oe(Ge),oe(Fe),co(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Rn(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,pt!==null&&(wi(pt),pt=null))),pi(t,s),Oe(s),null;case 5:oo(s);var a=Ss(on.current);if(r=s.type,t!==null&&s.stateNode!=null)xm(t,s,r,n,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!n){if(s.stateNode===null)throw Error(z(166));return Oe(s),null}if(t=Ss(kt.current),Rn(s)){n=s.stateNode,r=s.type;var l=s.memoizedProps;switch(n[St]=s,n[an]=l,t=(s.mode&1)!==0,r){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(a=0;a<Fr.length;a++)le(Fr[a],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":zo(n,l),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},le("invalid",n);break;case"textarea":Ho(n,l),le("invalid",n)}Hl(r,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?n.textContent!==o&&(l.suppressHydrationWarning!==!0&&Ln(n.textContent,o,t),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Ln(n.textContent,o,t),a=["children",""+o]):Xr.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&le("scroll",n)}switch(r){case"input":kn(n),$o(n,l,!0);break;case"textarea":kn(n),Bo(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=oa)}n=a,s.updateQueue=n,n!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hd(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=i.createElement(r,{is:n.is}):(t=i.createElement(r),r==="select"&&(i=t,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):t=i.createElementNS(t,r),t[St]=s,t[an]=n,mm(t,s,!1,!1),s.stateNode=t;e:{switch(i=Bl(r,n),r){case"dialog":le("cancel",t),le("close",t),a=n;break;case"iframe":case"object":case"embed":le("load",t),a=n;break;case"video":case"audio":for(a=0;a<Fr.length;a++)le(Fr[a],t);a=n;break;case"source":le("error",t),a=n;break;case"img":case"image":case"link":le("error",t),le("load",t),a=n;break;case"details":le("toggle",t),a=n;break;case"input":zo(t,n),a=Ol(t,n),le("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=he({},n,{value:void 0}),le("invalid",t);break;case"textarea":Ho(t,n),a=zl(t,n),le("invalid",t);break;default:a=n}Hl(r,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?qd(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Bd(t,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Qr(t,c):typeof c=="number"&&Qr(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Xr.hasOwnProperty(l)?c!=null&&l==="onScroll"&&le("scroll",t):c!=null&&Fi(t,l,c,i))}switch(r){case"input":kn(t),$o(t,n,!1);break;case"textarea":kn(t),Bo(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ds(n.value));break;case"select":t.multiple=!!n.multiple,l=n.value,l!=null?Js(t,!!n.multiple,l,!1):n.defaultValue!=null&&Js(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=oa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Oe(s),null;case 6:if(t&&s.stateNode!=null)hm(t,s,t.memoizedProps,n);else{if(typeof n!="string"&&s.stateNode===null)throw Error(z(166));if(r=Ss(on.current),Ss(kt.current),Rn(s)){if(n=s.stateNode,r=s.memoizedProps,n[St]=s,(l=n.nodeValue!==r)&&(t=Ze,t!==null))switch(t.tag){case 3:Ln(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ln(n.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[St]=s,s.stateNode=n}return Oe(s),null;case 13:if(oe(ue),n=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&Je!==null&&s.mode&1&&!(s.flags&128))Pu(),ir(),s.flags|=98560,l=!1;else if(l=Rn(s),n!==null&&n.dehydrated!==null){if(t===null){if(!l)throw Error(z(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(z(317));l[St]=s}else ir(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Oe(s),l=!1}else pt!==null&&(wi(pt),pt=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(s.child.flags|=8192,s.mode&1&&(t===null||ue.current&1?Se===0&&(Se=3):No())),s.updateQueue!==null&&(s.flags|=4),Oe(s),null);case 4:return cr(),pi(t,s),t===null&&rn(s.stateNode.containerInfo),Oe(s),null;case 10:return no(s.type._context),Oe(s),null;case 17:return Xe(s.type)&&ca(),Oe(s),null;case 19:if(oe(ue),l=s.memoizedState,l===null)return Oe(s),null;if(n=(s.flags&128)!==0,i=l.rendering,i===null)if(n)Pr(l,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=ga(t),i!==null){for(s.flags|=128,Pr(l,!1),n=i.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),s.subtreeFlags=0,n=r,r=s.child;r!==null;)l=r,t=n,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ae(ue,ue.current&1|2),s.child}t=t.sibling}l.tail!==null&&be()>ur&&(s.flags|=128,n=!0,Pr(l,!1),s.lanes=4194304)}else{if(!n)if(t=ga(i),t!==null){if(s.flags|=128,n=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Pr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!de)return Oe(s),null}else 2*be()-l.renderingStartTime>ur&&r!==1073741824&&(s.flags|=128,n=!0,Pr(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=be(),s.sibling=null,r=ue.current,ae(ue,n?r&1|2:r&1),s):(Oe(s),null);case 22:case 23:return jo(),n=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(s.flags|=8192),n&&s.mode&1?Ke&1073741824&&(Oe(s),s.subtreeFlags&6&&(s.flags|=8192)):Oe(s),null;case 24:return null;case 25:return null}throw Error(z(156,s.tag))}function k0(t,s){switch(eo(s),s.tag){case 1:return Xe(s.type)&&ca(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return cr(),oe(Ge),oe(Fe),co(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return oo(s),null;case 13:if(oe(ue),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(z(340));ir()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return oe(ue),null;case 4:return cr(),null;case 10:return no(s.type._context),null;case 22:case 23:return jo(),null;case 24:return null;default:return null}}var Fn=!1,Ue=!1,T0=typeof WeakSet=="function"?WeakSet:Set,q=null;function Qs(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ge(t,s,n)}else r.current=null}function gi(t,s,r){try{r()}catch(n){ge(t,s,n)}}var Pc=!1;function _0(t,s){if(Zl=aa,t=bu(),Ji(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,o=-1,c=-1,x=0,u=0,m=t,f=null;t:for(;;){for(var h;m!==r||a!==0&&m.nodeType!==3||(o=i+a),m!==l||n!==0&&m.nodeType!==3||(c=i+n),m.nodeType===3&&(i+=m.nodeValue.length),(h=m.firstChild)!==null;)f=m,m=h;for(;;){if(m===t)break t;if(f===r&&++x===a&&(o=i),f===l&&++u===n&&(c=i),(h=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ei={focusedElem:t,selectionRange:r},aa=!1,q=s;q!==null;)if(s=q,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,q=t;else for(;q!==null;){s=q;try{var g=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var b=g.memoizedProps,v=g.memoizedState,d=s.stateNode,y=d.getSnapshotBeforeUpdate(s.elementType===s.type?b:xt(s.type,b),v);d.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var p=s.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(C){ge(s,s.return,C)}if(t=s.sibling,t!==null){t.return=s.return,q=t;break}q=s.return}return g=Pc,Pc=!1,g}function Wr(t,s,r){var n=s.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&gi(s,r,l)}a=a.next}while(a!==n)}}function $a(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==s)}}function fi(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function pm(t){var s=t.alternate;s!==null&&(t.alternate=null,pm(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[St],delete s[an],delete s[ri],delete s[u0],delete s[m0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gm(t){return t.tag===5||t.tag===3||t.tag===4}function Mc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yi(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=oa));else if(n!==4&&(t=t.child,t!==null))for(yi(t,s,r),t=t.sibling;t!==null;)yi(t,s,r),t=t.sibling}function bi(t,s,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(bi(t,s,r),t=t.sibling;t!==null;)bi(t,s,r),t=t.sibling}var De=null,ht=!1;function Wt(t,s,r){for(r=r.child;r!==null;)fm(t,s,r),r=r.sibling}function fm(t,s,r){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Ma,r)}catch{}switch(r.tag){case 5:Ue||Qs(r,s);case 6:var n=De,a=ht;De=null,Wt(t,s,r),De=n,ht=a,De!==null&&(ht?(t=De,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):De.removeChild(r.stateNode));break;case 18:De!==null&&(ht?(t=De,r=r.stateNode,t.nodeType===8?fl(t.parentNode,r):t.nodeType===1&&fl(t,r),en(t)):fl(De,r.stateNode));break;case 4:n=De,a=ht,De=r.stateNode.containerInfo,ht=!0,Wt(t,s,r),De=n,ht=a;break;case 0:case 11:case 14:case 15:if(!Ue&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&gi(r,s,i),a=a.next}while(a!==n)}Wt(t,s,r);break;case 1:if(!Ue&&(Qs(r,s),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){ge(r,s,o)}Wt(t,s,r);break;case 21:Wt(t,s,r);break;case 22:r.mode&1?(Ue=(n=Ue)||r.memoizedState!==null,Wt(t,s,r),Ue=n):Wt(t,s,r);break;default:Wt(t,s,r)}}function Ic(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new T0),s.forEach(function(n){var a=U0.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function mt(t,s){var r=s.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=t,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:De=o.stateNode,ht=!1;break e;case 3:De=o.stateNode.containerInfo,ht=!0;break e;case 4:De=o.stateNode.containerInfo,ht=!0;break e}o=o.return}if(De===null)throw Error(z(160));fm(l,i,a),De=null,ht=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(x){ge(a,s,x)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ym(s,t),s=s.sibling}function ym(t,s){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mt(s,t),wt(t),n&4){try{Wr(3,t,t.return),$a(3,t)}catch(b){ge(t,t.return,b)}try{Wr(5,t,t.return)}catch(b){ge(t,t.return,b)}}break;case 1:mt(s,t),wt(t),n&512&&r!==null&&Qs(r,r.return);break;case 5:if(mt(s,t),wt(t),n&512&&r!==null&&Qs(r,r.return),t.flags&32){var a=t.stateNode;try{Qr(a,"")}catch(b){ge(t,t.return,b)}}if(n&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,i=r!==null?r.memoizedProps:l,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&zd(a,l),Bl(o,i);var x=Bl(o,l);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];u==="style"?qd(a,m):u==="dangerouslySetInnerHTML"?Bd(a,m):u==="children"?Qr(a,m):Fi(a,u,m,x)}switch(o){case"input":Ul(a,l);break;case"textarea":$d(a,l);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var h=l.value;h!=null?Js(a,!!l.multiple,h,!1):f!==!!l.multiple&&(l.defaultValue!=null?Js(a,!!l.multiple,l.defaultValue,!0):Js(a,!!l.multiple,l.multiple?[]:"",!1))}a[an]=l}catch(b){ge(t,t.return,b)}}break;case 6:if(mt(s,t),wt(t),n&4){if(t.stateNode===null)throw Error(z(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(b){ge(t,t.return,b)}}break;case 3:if(mt(s,t),wt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{en(s.containerInfo)}catch(b){ge(t,t.return,b)}break;case 4:mt(s,t),wt(t);break;case 13:mt(s,t),wt(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(bo=be())),n&4&&Ic(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Ue=(x=Ue)||u,mt(s,t),Ue=x):mt(s,t),wt(t),n&8192){if(x=t.memoizedState!==null,(t.stateNode.isHidden=x)&&!u&&t.mode&1)for(q=t,u=t.child;u!==null;){for(m=q=u;q!==null;){switch(f=q,h=f.child,f.tag){case 0:case 11:case 14:case 15:Wr(4,f,f.return);break;case 1:Qs(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{s=n,g.props=s.memoizedProps,g.state=s.memoizedState,g.componentWillUnmount()}catch(b){ge(n,r,b)}}break;case 5:Qs(f,f.return);break;case 22:if(f.memoizedState!==null){Rc(m);continue}}h!==null?(h.return=f,q=h):Rc(m)}u=u.sibling}e:for(u=null,m=t;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,x?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Vd("display",i))}catch(b){ge(t,t.return,b)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=x?"":m.memoizedProps}catch(b){ge(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:mt(s,t),wt(t),n&4&&Ic(t);break;case 21:break;default:mt(s,t),wt(t)}}function wt(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(gm(r)){var n=r;break e}r=r.return}throw Error(z(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Qr(a,""),n.flags&=-33);var l=Mc(t);bi(t,l,a);break;case 3:case 4:var i=n.stateNode.containerInfo,o=Mc(t);yi(t,o,i);break;default:throw Error(z(161))}}catch(c){ge(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function D0(t,s,r){q=t,bm(t)}function bm(t,s,r){for(var n=(t.mode&1)!==0;q!==null;){var a=q,l=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||Fn;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||Ue;o=Fn;var x=Ue;if(Fn=i,(Ue=c)&&!x)for(q=a;q!==null;)i=q,c=i.child,i.tag===22&&i.memoizedState!==null?Oc(a):c!==null?(c.return=i,q=c):Oc(a);for(;l!==null;)q=l,bm(l),l=l.sibling;q=a,Fn=o,Ue=x}Lc(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,q=l):Lc(t)}}function Lc(t){for(;q!==null;){var s=q;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ue||$a(5,s);break;case 1:var n=s.stateNode;if(s.flags&4&&!Ue)if(r===null)n.componentDidMount();else{var a=s.elementType===s.type?r.memoizedProps:xt(s.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&bc(s,l,n);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}bc(s,i,r)}break;case 5:var o=s.stateNode;if(r===null&&s.flags&4){r=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var x=s.alternate;if(x!==null){var u=x.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&en(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ue||s.flags&512&&fi(s)}catch(f){ge(s,s.return,f)}}if(s===t){q=null;break}if(r=s.sibling,r!==null){r.return=s.return,q=r;break}q=s.return}}function Rc(t){for(;q!==null;){var s=q;if(s===t){q=null;break}var r=s.sibling;if(r!==null){r.return=s.return,q=r;break}q=s.return}}function Oc(t){for(;q!==null;){var s=q;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{$a(4,s)}catch(c){ge(s,r,c)}break;case 1:var n=s.stateNode;if(typeof n.componentDidMount=="function"){var a=s.return;try{n.componentDidMount()}catch(c){ge(s,a,c)}}var l=s.return;try{fi(s)}catch(c){ge(s,l,c)}break;case 5:var i=s.return;try{fi(s)}catch(c){ge(s,i,c)}}}catch(c){ge(s,s.return,c)}if(s===t){q=null;break}var o=s.sibling;if(o!==null){o.return=s.return,q=o;break}q=s.return}}var A0=Math.ceil,ba=$t.ReactCurrentDispatcher,fo=$t.ReactCurrentOwner,ot=$t.ReactCurrentBatchConfig,J=0,Te=null,Ne=null,Me=0,Ke=0,Ks=hs(0),Se=0,mn=null,As=0,Ha=0,yo=0,Yr=null,qe=null,bo=0,ur=1/0,Dt=null,va=!1,vi=null,ls=null,zn=!1,Zt=null,ja=0,Gr=0,ji=null,Kn=-1,Jn=0;function $e(){return J&6?be():Kn!==-1?Kn:Kn=be()}function is(t){return t.mode&1?J&2&&Me!==0?Me&-Me:h0.transition!==null?(Jn===0&&(Jn=ru()),Jn):(t=re,t!==0||(t=window.event,t=t===void 0?16:du(t.type)),t):1}function yt(t,s,r,n){if(50<Gr)throw Gr=0,ji=null,Error(z(185));yn(t,r,n),(!(J&2)||t!==Te)&&(t===Te&&(!(J&2)&&(Ha|=r),Se===4&&Kt(t,Me)),Qe(t,n),r===1&&J===0&&!(s.mode&1)&&(ur=be()+500,Ua&&ps()))}function Qe(t,s){var r=t.callbackNode;hh(t,s);var n=na(t,t===Te?Me:0);if(n===0)r!==null&&Wo(r),t.callbackNode=null,t.callbackPriority=0;else if(s=n&-n,t.callbackPriority!==s){if(r!=null&&Wo(r),s===1)t.tag===0?x0(Uc.bind(null,t)):_u(Uc.bind(null,t)),c0(function(){!(J&6)&&ps()}),r=null;else{switch(nu(n)){case 1:r=Vi;break;case 4:r=tu;break;case 16:r=ra;break;case 536870912:r=su;break;default:r=ra}r=km(r,vm.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function vm(t,s){if(Kn=-1,Jn=0,J&6)throw Error(z(327));var r=t.callbackNode;if(rr()&&t.callbackNode!==r)return null;var n=na(t,t===Te?Me:0);if(n===0)return null;if(n&30||n&t.expiredLanes||s)s=Na(t,n);else{s=n;var a=J;J|=2;var l=Nm();(Te!==t||Me!==s)&&(Dt=null,ur=be()+500,Es(t,s));do try{I0();break}catch(o){jm(t,o)}while(!0);ro(),ba.current=l,J=a,Ne!==null?s=0:(Te=null,Me=0,s=Se)}if(s!==0){if(s===2&&(a=Gl(t),a!==0&&(n=a,s=Ni(t,a))),s===1)throw r=mn,Es(t,0),Kt(t,n),Qe(t,be()),r;if(s===6)Kt(t,n);else{if(a=t.current.alternate,!(n&30)&&!P0(a)&&(s=Na(t,n),s===2&&(l=Gl(t),l!==0&&(n=l,s=Ni(t,l))),s===1))throw r=mn,Es(t,0),Kt(t,n),Qe(t,be()),r;switch(t.finishedWork=a,t.finishedLanes=n,s){case 0:case 1:throw Error(z(345));case 2:vs(t,qe,Dt);break;case 3:if(Kt(t,n),(n&130023424)===n&&(s=bo+500-be(),10<s)){if(na(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){$e(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=si(vs.bind(null,t,qe,Dt),s);break}vs(t,qe,Dt);break;case 4:if(Kt(t,n),(n&4194240)===n)break;for(s=t.eventTimes,a=-1;0<n;){var i=31-ft(n);l=1<<i,i=s[i],i>a&&(a=i),n&=~l}if(n=a,n=be()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*A0(n/1960))-n,10<n){t.timeoutHandle=si(vs.bind(null,t,qe,Dt),n);break}vs(t,qe,Dt);break;case 5:vs(t,qe,Dt);break;default:throw Error(z(329))}}}return Qe(t,be()),t.callbackNode===r?vm.bind(null,t):null}function Ni(t,s){var r=Yr;return t.current.memoizedState.isDehydrated&&(Es(t,s).flags|=256),t=Na(t,s),t!==2&&(s=qe,qe=r,s!==null&&wi(s)),t}function wi(t){qe===null?qe=t:qe.push.apply(qe,t)}function P0(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!vt(l(),a))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Kt(t,s){for(s&=~yo,s&=~Ha,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-ft(s),n=1<<r;t[r]=-1,s&=~n}}function Uc(t){if(J&6)throw Error(z(327));rr();var s=na(t,0);if(!(s&1))return Qe(t,be()),null;var r=Na(t,s);if(t.tag!==0&&r===2){var n=Gl(t);n!==0&&(s=n,r=Ni(t,n))}if(r===1)throw r=mn,Es(t,0),Kt(t,s),Qe(t,be()),r;if(r===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,vs(t,qe,Dt),Qe(t,be()),null}function vo(t,s){var r=J;J|=1;try{return t(s)}finally{J=r,J===0&&(ur=be()+500,Ua&&ps())}}function Ps(t){Zt!==null&&Zt.tag===0&&!(J&6)&&rr();var s=J;J|=1;var r=ot.transition,n=re;try{if(ot.transition=null,re=1,t)return t()}finally{re=n,ot.transition=r,J=s,!(J&6)&&ps()}}function jo(){Ke=Ks.current,oe(Ks)}function Es(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,o0(r)),Ne!==null)for(r=Ne.return;r!==null;){var n=r;switch(eo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ca();break;case 3:cr(),oe(Ge),oe(Fe),co();break;case 5:oo(n);break;case 4:cr();break;case 13:oe(ue);break;case 19:oe(ue);break;case 10:no(n.type._context);break;case 22:case 23:jo()}r=r.return}if(Te=t,Ne=t=os(t.current,null),Me=Ke=s,Se=0,mn=null,yo=Ha=As=0,qe=Yr=null,Cs!==null){for(s=0;s<Cs.length;s++)if(r=Cs[s],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var i=l.next;l.next=a,n.next=i}r.pending=n}Cs=null}return t}function jm(t,s){do{var r=Ne;try{if(ro(),Gn.current=ya,fa){for(var n=me.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}fa=!1}if(Ds=0,ke=Ce=me=null,qr=!1,cn=0,fo.current=null,r===null||r.return===null){Se=1,mn=s,Ne=null;break}e:{var l=t,i=r.return,o=r,c=s;if(s=Me,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var x=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=Sc(i);if(h!==null){h.flags&=-257,Ec(h,i,o,l,s),h.mode&1&&Cc(l,x,s),s=h,c=x;var g=s.updateQueue;if(g===null){var b=new Set;b.add(c),s.updateQueue=b}else g.add(c);break e}else{if(!(s&1)){Cc(l,x,s),No();break e}c=Error(z(426))}}else if(de&&o.mode&1){var v=Sc(i);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ec(v,i,o,l,s),to(dr(c,o));break e}}l=c=dr(c,o),Se!==4&&(Se=2),Yr===null?Yr=[l]:Yr.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var d=nm(l,c,s);yc(l,d);break e;case 1:o=c;var y=l.type,p=l.stateNode;if(!(l.flags&128)&&(typeof y.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ls===null||!ls.has(p)))){l.flags|=65536,s&=-s,l.lanes|=s;var C=am(l,o,s);yc(l,C);break e}}l=l.return}while(l!==null)}Cm(r)}catch(k){s=k,Ne===r&&r!==null&&(Ne=r=r.return);continue}break}while(!0)}function Nm(){var t=ba.current;return ba.current=ya,t===null?ya:t}function No(){(Se===0||Se===3||Se===2)&&(Se=4),Te===null||!(As&268435455)&&!(Ha&268435455)||Kt(Te,Me)}function Na(t,s){var r=J;J|=2;var n=Nm();(Te!==t||Me!==s)&&(Dt=null,Es(t,s));do try{M0();break}catch(a){jm(t,a)}while(!0);if(ro(),J=r,ba.current=n,Ne!==null)throw Error(z(261));return Te=null,Me=0,Se}function M0(){for(;Ne!==null;)wm(Ne)}function I0(){for(;Ne!==null&&!ah();)wm(Ne)}function wm(t){var s=Em(t.alternate,t,Ke);t.memoizedProps=t.pendingProps,s===null?Cm(t):Ne=s,fo.current=null}function Cm(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=k0(r,s),r!==null){r.flags&=32767,Ne=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,Ne=null;return}}else if(r=E0(r,s,Ke),r!==null){Ne=r;return}if(s=s.sibling,s!==null){Ne=s;return}Ne=s=t}while(s!==null);Se===0&&(Se=5)}function vs(t,s,r){var n=re,a=ot.transition;try{ot.transition=null,re=1,L0(t,s,r,n)}finally{ot.transition=a,re=n}return null}function L0(t,s,r,n){do rr();while(Zt!==null);if(J&6)throw Error(z(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(ph(t,l),t===Te&&(Ne=Te=null,Me=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zn||(zn=!0,km(ra,function(){return rr(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=ot.transition,ot.transition=null;var i=re;re=1;var o=J;J|=4,fo.current=null,_0(t,r),ym(r,t),t0(ei),aa=!!Zl,ei=Zl=null,t.current=r,D0(r),lh(),J=o,re=i,ot.transition=l}else t.current=r;if(zn&&(zn=!1,Zt=t,ja=a),l=t.pendingLanes,l===0&&(ls=null),ch(r.stateNode),Qe(t,be()),s!==null)for(n=t.onRecoverableError,r=0;r<s.length;r++)a=s[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(va)throw va=!1,t=vi,vi=null,t;return ja&1&&t.tag!==0&&rr(),l=t.pendingLanes,l&1?t===ji?Gr++:(Gr=0,ji=t):Gr=0,ps(),null}function rr(){if(Zt!==null){var t=nu(ja),s=ot.transition,r=re;try{if(ot.transition=null,re=16>t?16:t,Zt===null)var n=!1;else{if(t=Zt,Zt=null,ja=0,J&6)throw Error(z(331));var a=J;for(J|=4,q=t.current;q!==null;){var l=q,i=l.child;if(q.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var x=o[c];for(q=x;q!==null;){var u=q;switch(u.tag){case 0:case 11:case 15:Wr(8,u,l)}var m=u.child;if(m!==null)m.return=u,q=m;else for(;q!==null;){u=q;var f=u.sibling,h=u.return;if(pm(u),u===x){q=null;break}if(f!==null){f.return=h,q=f;break}q=h}}}var g=l.alternate;if(g!==null){var b=g.child;if(b!==null){g.child=null;do{var v=b.sibling;b.sibling=null,b=v}while(b!==null)}}q=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,q=i;else e:for(;q!==null;){if(l=q,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Wr(9,l,l.return)}var d=l.sibling;if(d!==null){d.return=l.return,q=d;break e}q=l.return}}var y=t.current;for(q=y;q!==null;){i=q;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,q=p;else e:for(i=y;q!==null;){if(o=q,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:$a(9,o)}}catch(k){ge(o,o.return,k)}if(o===i){q=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,q=C;break e}q=o.return}}if(J=a,ps(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Ma,t)}catch{}n=!0}return n}finally{re=r,ot.transition=s}}return!1}function Fc(t,s,r){s=dr(r,s),s=nm(t,s,1),t=as(t,s,1),s=$e(),t!==null&&(yn(t,1,s),Qe(t,s))}function ge(t,s,r){if(t.tag===3)Fc(t,t,r);else for(;s!==null;){if(s.tag===3){Fc(s,t,r);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ls===null||!ls.has(n))){t=dr(r,t),t=am(s,t,1),s=as(s,t,1),t=$e(),s!==null&&(yn(s,1,t),Qe(s,t));break}}s=s.return}}function R0(t,s,r){var n=t.pingCache;n!==null&&n.delete(s),s=$e(),t.pingedLanes|=t.suspendedLanes&r,Te===t&&(Me&r)===r&&(Se===4||Se===3&&(Me&130023424)===Me&&500>be()-bo?Es(t,0):yo|=r),Qe(t,s)}function Sm(t,s){s===0&&(t.mode&1?(s=Dn,Dn<<=1,!(Dn&130023424)&&(Dn=4194304)):s=1);var r=$e();t=Ut(t,s),t!==null&&(yn(t,s,r),Qe(t,r))}function O0(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Sm(t,r)}function U0(t,s){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(s),Sm(t,r)}var Em;Em=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Ge.current)We=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return We=!1,S0(t,s,r);We=!!(t.flags&131072)}else We=!1,de&&s.flags&1048576&&Du(s,ma,s.index);switch(s.lanes=0,s.tag){case 2:var n=s.type;Qn(t,s),t=s.pendingProps;var a=lr(s,Fe.current);sr(s,r),a=mo(null,s,n,t,a,r);var l=xo();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Xe(n)?(l=!0,da(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,lo(s),a.updater=za,s.stateNode=a,a._reactInternals=s,ci(s,n,t,r),s=mi(null,s,n,!0,l,r)):(s.tag=0,de&&l&&Zi(s),ze(null,s,a,r),s=s.child),s;case 16:n=s.elementType;e:{switch(Qn(t,s),t=s.pendingProps,a=n._init,n=a(n._payload),s.type=n,a=s.tag=z0(n),t=xt(n,t),a){case 0:s=ui(null,s,n,t,r);break e;case 1:s=_c(null,s,n,t,r);break e;case 11:s=kc(null,s,n,t,r);break e;case 14:s=Tc(null,s,n,xt(n.type,t),r);break e}throw Error(z(306,n,""))}return s;case 0:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:xt(n,a),ui(t,s,n,a,r);case 1:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:xt(n,a),_c(t,s,n,a,r);case 3:e:{if(cm(s),t===null)throw Error(z(387));n=s.pendingProps,l=s.memoizedState,a=l.element,Ru(t,s),pa(s,n,null,r);var i=s.memoizedState;if(n=i.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=dr(Error(z(423)),s),s=Dc(t,s,n,r,a);break e}else if(n!==a){a=dr(Error(z(424)),s),s=Dc(t,s,n,r,a);break e}else for(Je=ns(s.stateNode.containerInfo.firstChild),Ze=s,de=!0,pt=null,r=Iu(s,null,n,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ir(),n===a){s=Ft(t,s,r);break e}ze(t,s,n,r)}s=s.child}return s;case 5:return Ou(s),t===null&&li(s),n=s.type,a=s.pendingProps,l=t!==null?t.memoizedProps:null,i=a.children,ti(n,a)?i=null:l!==null&&ti(n,l)&&(s.flags|=32),om(t,s),ze(t,s,i,r),s.child;case 6:return t===null&&li(s),null;case 13:return dm(t,s,r);case 4:return io(s,s.stateNode.containerInfo),n=s.pendingProps,t===null?s.child=or(s,null,n,r):ze(t,s,n,r),s.child;case 11:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:xt(n,a),kc(t,s,n,a,r);case 7:return ze(t,s,s.pendingProps,r),s.child;case 8:return ze(t,s,s.pendingProps.children,r),s.child;case 12:return ze(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(n=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,ae(xa,n._currentValue),n._currentValue=i,l!==null)if(vt(l.value,i)){if(l.children===a.children&&!Ge.current){s=Ft(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=It(-1,r&-r),c.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var u=x.pending;u===null?c.next=c:(c.next=u.next,u.next=c),x.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),ii(l.return,r,s),o.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(z(341));i.lanes|=r,o=i.alternate,o!==null&&(o.lanes|=r),ii(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}ze(t,s,a.children,r),s=s.child}return s;case 9:return a=s.type,n=s.pendingProps.children,sr(s,r),a=dt(a),n=n(a),s.flags|=1,ze(t,s,n,r),s.child;case 14:return n=s.type,a=xt(n,s.pendingProps),a=xt(n.type,a),Tc(t,s,n,a,r);case 15:return lm(t,s,s.type,s.pendingProps,r);case 17:return n=s.type,a=s.pendingProps,a=s.elementType===n?a:xt(n,a),Qn(t,s),s.tag=1,Xe(n)?(t=!0,da(s)):t=!1,sr(s,r),rm(s,n,a),ci(s,n,a,r),mi(null,s,n,!0,t,r);case 19:return um(t,s,r);case 22:return im(t,s,r)}throw Error(z(156,s.tag))};function km(t,s){return eu(t,s)}function F0(t,s,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(t,s,r,n){return new F0(t,s,r,n)}function wo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function z0(t){if(typeof t=="function")return wo(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$i)return 11;if(t===Hi)return 14}return 2}function os(t,s){var r=t.alternate;return r===null?(r=it(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Zn(t,s,r,n,a,l){var i=2;if(n=t,typeof t=="function")wo(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case $s:return ks(r.children,a,l,s);case zi:i=8,a|=8;break;case Ml:return t=it(12,r,s,a|2),t.elementType=Ml,t.lanes=l,t;case Il:return t=it(13,r,s,a),t.elementType=Il,t.lanes=l,t;case Ll:return t=it(19,r,s,a),t.elementType=Ll,t.lanes=l,t;case Od:return Ba(r,a,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ld:i=10;break e;case Rd:i=9;break e;case $i:i=11;break e;case Hi:i=14;break e;case Gt:i=16,n=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return s=it(i,r,s,a),s.elementType=t,s.type=n,s.lanes=l,s}function ks(t,s,r,n){return t=it(7,t,n,s),t.lanes=r,t}function Ba(t,s,r,n){return t=it(22,t,n,s),t.elementType=Od,t.lanes=r,t.stateNode={isHidden:!1},t}function Sl(t,s,r){return t=it(6,t,null,s),t.lanes=r,t}function El(t,s,r){return s=it(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function $0(t,s,r,n,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ll(0),this.expirationTimes=ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ll(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Co(t,s,r,n,a,l,i,o,c){return t=new $0(t,s,r,o,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=it(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},lo(l),t}function H0(t,s,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:n==null?null:""+n,children:t,containerInfo:s,implementation:r}}function Tm(t){if(!t)return us;t=t._reactInternals;e:{if(Rs(t)!==t||t.tag!==1)throw Error(z(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Xe(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(z(171))}if(t.tag===1){var r=t.type;if(Xe(r))return Tu(t,r,s)}return s}function _m(t,s,r,n,a,l,i,o,c){return t=Co(r,n,!0,t,a,l,i,o,c),t.context=Tm(null),r=t.current,n=$e(),a=is(r),l=It(n,a),l.callback=s??null,as(r,l,a),t.current.lanes=a,yn(t,a,n),Qe(t,n),t}function Va(t,s,r,n){var a=s.current,l=$e(),i=is(a);return r=Tm(r),s.context===null?s.context=r:s.pendingContext=r,s=It(l,i),s.payload={element:t},n=n===void 0?null:n,n!==null&&(s.callback=n),t=as(a,s,i),t!==null&&(yt(t,a,i,l),Yn(t,a,i)),i}function wa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zc(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function So(t,s){zc(t,s),(t=t.alternate)&&zc(t,s)}function B0(){return null}var Dm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Eo(t){this._internalRoot=t}qa.prototype.render=Eo.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(z(409));Va(t,s,null,null)};qa.prototype.unmount=Eo.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Ps(function(){Va(null,t,null,null)}),s[Ot]=null}};function qa(t){this._internalRoot=t}qa.prototype.unstable_scheduleHydration=function(t){if(t){var s=iu();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Qt.length&&s!==0&&s<Qt[r].priority;r++);Qt.splice(r,0,t),r===0&&cu(t)}};function ko(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $c(){}function V0(t,s,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var x=wa(i);l.call(x)}}var i=_m(s,n,t,0,null,!1,!1,"",$c);return t._reactRootContainer=i,t[Ot]=i.current,rn(t.nodeType===8?t.parentNode:t),Ps(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var x=wa(c);o.call(x)}}var c=Co(t,0,!1,null,null,!1,!1,"",$c);return t._reactRootContainer=c,t[Ot]=c.current,rn(t.nodeType===8?t.parentNode:t),Ps(function(){Va(s,c,r,n)}),c}function Ya(t,s,r,n,a){var l=r._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=wa(i);o.call(c)}}Va(s,i,t,a)}else i=V0(r,s,t,a,n);return wa(i)}au=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Ur(s.pendingLanes);r!==0&&(qi(s,r|1),Qe(s,be()),!(J&6)&&(ur=be()+500,ps()))}break;case 13:Ps(function(){var n=Ut(t,1);if(n!==null){var a=$e();yt(n,t,1,a)}}),So(t,1)}};Wi=function(t){if(t.tag===13){var s=Ut(t,134217728);if(s!==null){var r=$e();yt(s,t,134217728,r)}So(t,134217728)}};lu=function(t){if(t.tag===13){var s=is(t),r=Ut(t,s);if(r!==null){var n=$e();yt(r,t,s,n)}So(t,s)}};iu=function(){return re};ou=function(t,s){var r=re;try{return re=t,s()}finally{re=r}};ql=function(t,s,r){switch(s){case"input":if(Ul(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var n=r[s];if(n!==t&&n.form===t.form){var a=Oa(n);if(!a)throw Error(z(90));Fd(n),Ul(n,a)}}}break;case"textarea":$d(t,r);break;case"select":s=r.value,s!=null&&Js(t,!!r.multiple,s,!1)}};Gd=vo;Xd=Ps;var q0={usingClientEntryPoint:!1,Events:[vn,qs,Oa,Wd,Yd,vo]},Mr={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W0={bundleType:Mr.bundleType,version:Mr.version,rendererPackageName:Mr.rendererPackageName,rendererConfig:Mr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$t.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jd(t),t===null?null:t.stateNode},findFiberByHostInstance:Mr.findFiberByHostInstance||B0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $n=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$n.isDisabled&&$n.supportsFiber)try{Ma=$n.inject(W0),Et=$n}catch{}}st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0;st.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ko(s))throw Error(z(200));return H0(t,s,null,r)};st.createRoot=function(t,s){if(!ko(t))throw Error(z(299));var r=!1,n="",a=Dm;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Co(t,1,!1,null,null,r,!1,n,a),t[Ot]=s.current,rn(t.nodeType===8?t.parentNode:t),new Eo(s)};st.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Jd(s),t=t===null?null:t.stateNode,t};st.flushSync=function(t){return Ps(t)};st.hydrate=function(t,s,r){if(!Wa(s))throw Error(z(200));return Ya(null,t,s,!0,r)};st.hydrateRoot=function(t,s,r){if(!ko(t))throw Error(z(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",i=Dm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=_m(s,null,t,1,r??null,a,!1,l,i),t[Ot]=s.current,rn(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,a]:s.mutableSourceEagerHydrationData.push(r,a);return new qa(s)};st.render=function(t,s,r){if(!Wa(s))throw Error(z(200));return Ya(null,t,s,!1,r)};st.unmountComponentAtNode=function(t){if(!Wa(t))throw Error(z(40));return t._reactRootContainer?(Ps(function(){Ya(null,null,t,!1,function(){t._reactRootContainer=null,t[Ot]=null})}),!0):!1};st.unstable_batchedUpdates=vo;st.unstable_renderSubtreeIntoContainer=function(t,s,r,n){if(!Wa(r))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Ya(t,s,r,!1,n)};st.version="18.3.1-next-f1338f8080-20240426";function Am(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Am)}catch(t){console.error(t)}}Am(),Ad.exports=st;var Y0=Ad.exports,Pm,Hc=Y0;Pm=Hc.createRoot,Hc.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xn(){return xn=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xn.apply(this,arguments)}var es;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(es||(es={}));const Bc="popstate";function G0(t){t===void 0&&(t={});function s(n,a){let{pathname:l,search:i,hash:o}=n.location;return Ci("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Ca(a)}return Q0(s,r,null,t)}function xe(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Mm(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function X0(){return Math.random().toString(36).substr(2,8)}function Vc(t,s){return{usr:t.state,key:t.key,idx:s}}function Ci(t,s,r,n){return r===void 0&&(r=null),xn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?yr(s):s,{state:r,key:s&&s.key||n||X0()})}function Ca(t){let{pathname:s="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function yr(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(s.search=t.substr(n),t=t.substr(0,n)),t&&(s.pathname=t)}return s}function Q0(t,s,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,i=a.history,o=es.Pop,c=null,x=u();x==null&&(x=0,i.replaceState(xn({},i.state,{idx:x}),""));function u(){return(i.state||{idx:null}).idx}function m(){o=es.Pop;let v=u(),d=v==null?null:v-x;x=v,c&&c({action:o,location:b.location,delta:d})}function f(v,d){o=es.Push;let y=Ci(b.location,v,d);x=u()+1;let p=Vc(y,x),C=b.createHref(y);try{i.pushState(p,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(C)}l&&c&&c({action:o,location:b.location,delta:1})}function h(v,d){o=es.Replace;let y=Ci(b.location,v,d);x=u();let p=Vc(y,x),C=b.createHref(y);i.replaceState(p,"",C),l&&c&&c({action:o,location:b.location,delta:0})}function g(v){let d=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof v=="string"?v:Ca(v);return y=y.replace(/ $/,"%20"),xe(d,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,d)}let b={get action(){return o},get location(){return t(a,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Bc,m),c=v,()=>{a.removeEventListener(Bc,m),c=null}},createHref(v){return s(a,v)},createURL:g,encodeLocation(v){let d=g(v);return{pathname:d.pathname,search:d.search,hash:d.hash}},push:f,replace:h,go(v){return i.go(v)}};return b}var qc;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(qc||(qc={}));function K0(t,s,r){return r===void 0&&(r="/"),J0(t,s,r,!1)}function J0(t,s,r,n){let a=typeof s=="string"?yr(s):s,l=mr(a.pathname||"/",r);if(l==null)return null;let i=Im(t);Z0(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let x=dp(l);o=op(i[c],x,n)}return o}function Im(t,s,r,n){s===void 0&&(s=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(xe(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let x=cs([n,c.relativePath]),u=r.concat(c);l.children&&l.children.length>0&&(xe(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),Im(l.children,s,u,x)),!(l.path==null&&!l.index)&&s.push({path:x,score:lp(x,l.index),routesMeta:u})};return t.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let c of Lm(l.path))a(l,i,c)}),s}function Lm(t){let s=t.split("/");if(s.length===0)return[];let[r,...n]=s,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let i=Lm(n.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),a&&o.push(...i),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function Z0(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:ip(s.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ep=/^:[\w-]+$/,tp=3,sp=2,rp=1,np=10,ap=-2,Wc=t=>t==="*";function lp(t,s){let r=t.split("/"),n=r.length;return r.some(Wc)&&(n+=ap),s&&(n+=sp),r.filter(a=>!Wc(a)).reduce((a,l)=>a+(ep.test(l)?tp:l===""?rp:np),n)}function ip(t,s){return t.length===s.length&&t.slice(0,-1).every((n,a)=>n===s[a])?t[t.length-1]-s[s.length-1]:0}function op(t,s,r){let{routesMeta:n}=t,a={},l="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],x=o===n.length-1,u=l==="/"?s:s.slice(l.length)||"/",m=Sa({path:c.relativePath,caseSensitive:c.caseSensitive,end:x},u),f=c.route;if(!m&&x&&r&&!n[n.length-1].route.index&&(m=Sa({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:cs([l,m.pathname]),pathnameBase:hp(cs([l,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(l=cs([l,m.pathnameBase]))}return i}function Sa(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=cp(t.path,t.caseSensitive,t.end),a=s.match(r);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((x,u,m)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let b=o[m]||"";i=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const g=o[m];return h&&!g?x[f]=void 0:x[f]=(g||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:i,pattern:t}}function cp(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Mm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),n]}function dp(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Mm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function mr(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function up(t,s){s===void 0&&(s="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?yr(t):t;return{pathname:r?r.startsWith("/")?r:mp(r,s):s,search:pp(n),hash:gp(a)}}function mp(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function kl(t,s,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xp(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function To(t,s){let r=xp(t);return s?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function _o(t,s,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=yr(t):(a=xn({},t),xe(!a.pathname||!a.pathname.includes("?"),kl("?","pathname","search",a)),xe(!a.pathname||!a.pathname.includes("#"),kl("#","pathname","hash",a)),xe(!a.search||!a.search.includes("#"),kl("#","search","hash",a)));let l=t===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=r;else{let m=s.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),m-=1;a.pathname=f.join("/")}o=m>=0?s[m]:"/"}let c=up(a,o),x=i&&i!=="/"&&i.endsWith("/"),u=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(x||u)&&(c.pathname+="/"),c}const cs=t=>t.join("/").replace(/\/\/+/g,"/"),hp=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pp=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gp=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fp(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Rm=["post","put","patch","delete"];new Set(Rm);const yp=["get",...Rm];new Set(yp);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hn(){return hn=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hn.apply(this,arguments)}const Ga=j.createContext(null),Om=j.createContext(null),Ht=j.createContext(null),Xa=j.createContext(null),Bt=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Um=j.createContext(null);function bp(t,s){let{relative:r}=s===void 0?{}:s;br()||xe(!1);let{basename:n,navigator:a}=j.useContext(Ht),{hash:l,pathname:i,search:o}=Qa(t,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:cs([n,i])),a.createHref({pathname:c,search:o,hash:l})}function br(){return j.useContext(Xa)!=null}function gs(){return br()||xe(!1),j.useContext(Xa).location}function Fm(t){j.useContext(Ht).static||j.useLayoutEffect(t)}function jt(){let{isDataRoute:t}=j.useContext(Bt);return t?Pp():vp()}function vp(){br()||xe(!1);let t=j.useContext(Ga),{basename:s,future:r,navigator:n}=j.useContext(Ht),{matches:a}=j.useContext(Bt),{pathname:l}=gs(),i=JSON.stringify(To(a,r.v7_relativeSplatPath)),o=j.useRef(!1);return Fm(()=>{o.current=!0}),j.useCallback(function(x,u){if(u===void 0&&(u={}),!o.current)return;if(typeof x=="number"){n.go(x);return}let m=_o(x,JSON.parse(i),l,u.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:cs([s,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[s,n,i,l,t])}function zm(){let{matches:t}=j.useContext(Bt),s=t[t.length-1];return s?s.params:{}}function Qa(t,s){let{relative:r}=s===void 0?{}:s,{future:n}=j.useContext(Ht),{matches:a}=j.useContext(Bt),{pathname:l}=gs(),i=JSON.stringify(To(a,n.v7_relativeSplatPath));return j.useMemo(()=>_o(t,JSON.parse(i),l,r==="path"),[t,i,l,r])}function jp(t,s){return Np(t,s)}function Np(t,s,r,n){br()||xe(!1);let{navigator:a}=j.useContext(Ht),{matches:l}=j.useContext(Bt),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let x=gs(),u;if(s){var m;let v=typeof s=="string"?yr(s):s;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||xe(!1),u=v}else u=x;let f=u.pathname||"/",h=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=K0(t,{pathname:h}),b=kp(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:cs([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:cs([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),l,r,n);return s&&b?j.createElement(Xa.Provider,{value:{location:hn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:es.Pop}},b):b}function wp(){let t=Ap(),s=fp(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},s),r?j.createElement("pre",{style:a},r):null,null)}const Cp=j.createElement(wp,null);class Sp extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?j.createElement(Bt.Provider,{value:this.props.routeContext},j.createElement(Um.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ep(t){let{routeContext:s,match:r,children:n}=t,a=j.useContext(Ga);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(Bt.Provider,{value:s},n)}function kp(t,s,r,n){var a;if(s===void 0&&(s=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=(a=r)==null?void 0:a.errors;if(o!=null){let u=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);u>=0||xe(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,x=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<i.length;u++){let m=i[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(x=u),m.route.id){let{loaderData:f,errors:h}=r,g=m.route.loader&&f[m.route.id]===void 0&&(!h||h[m.route.id]===void 0);if(m.route.lazy||g){c=!0,x>=0?i=i.slice(0,x+1):i=[i[0]];break}}}return i.reduceRight((u,m,f)=>{let h,g=!1,b=null,v=null;r&&(h=o&&m.route.id?o[m.route.id]:void 0,b=m.route.errorElement||Cp,c&&(x<0&&f===0?(g=!0,v=null):x===f&&(g=!0,v=m.route.hydrateFallbackElement||null)));let d=s.concat(i.slice(0,f+1)),y=()=>{let p;return h?p=b:g?p=v:m.route.Component?p=j.createElement(m.route.Component,null):m.route.element?p=m.route.element:p=u,j.createElement(Ep,{match:m,routeContext:{outlet:u,matches:d,isDataRoute:r!=null},children:p})};return r&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?j.createElement(Sp,{location:r.location,revalidation:r.revalidation,component:b,error:h,children:y(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):y()},null)}var $m=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($m||{}),Ea=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ea||{});function Tp(t){let s=j.useContext(Ga);return s||xe(!1),s}function _p(t){let s=j.useContext(Om);return s||xe(!1),s}function Dp(t){let s=j.useContext(Bt);return s||xe(!1),s}function Hm(t){let s=Dp(),r=s.matches[s.matches.length-1];return r.route.id||xe(!1),r.route.id}function Ap(){var t;let s=j.useContext(Um),r=_p(Ea.UseRouteError),n=Hm(Ea.UseRouteError);return s!==void 0?s:(t=r.errors)==null?void 0:t[n]}function Pp(){let{router:t}=Tp($m.UseNavigateStable),s=Hm(Ea.UseNavigateStable),r=j.useRef(!1);return Fm(()=>{r.current=!0}),j.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,hn({fromRouteId:s},l)))},[t,s])}function Mp(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Si(t){let{to:s,replace:r,state:n,relative:a}=t;br()||xe(!1);let{future:l,static:i}=j.useContext(Ht),{matches:o}=j.useContext(Bt),{pathname:c}=gs(),x=jt(),u=_o(s,To(o,l.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return j.useEffect(()=>x(JSON.parse(m),{replace:r,state:n,relative:a}),[x,m,a,r,n]),null}function je(t){xe(!1)}function Ip(t){let{basename:s="/",children:r=null,location:n,navigationType:a=es.Pop,navigator:l,static:i=!1,future:o}=t;br()&&xe(!1);let c=s.replace(/^\/*/,"/"),x=j.useMemo(()=>({basename:c,navigator:l,static:i,future:hn({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof n=="string"&&(n=yr(n));let{pathname:u="/",search:m="",hash:f="",state:h=null,key:g="default"}=n,b=j.useMemo(()=>{let v=mr(u,c);return v==null?null:{location:{pathname:v,search:m,hash:f,state:h,key:g},navigationType:a}},[c,u,m,f,h,g,a]);return b==null?null:j.createElement(Ht.Provider,{value:x},j.createElement(Xa.Provider,{children:r,value:b}))}function Lp(t){let{children:s,location:r}=t;return jp(Ei(s),r)}new Promise(()=>{});function Ei(t,s){s===void 0&&(s=[]);let r=[];return j.Children.forEach(t,(n,a)=>{if(!j.isValidElement(n))return;let l=[...s,a];if(n.type===j.Fragment){r.push.apply(r,Ei(n.props.children,l));return}n.type!==je&&xe(!1),!n.props.index||!n.props.children||xe(!1);let i={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Ei(n.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ka.apply(this,arguments)}function Bm(t,s){if(t==null)return{};var r={},n=Object.keys(t),a,l;for(l=0;l<n.length;l++)a=n[l],!(s.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Rp(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Op(t,s){return t.button===0&&(!s||s==="_self")&&!Rp(t)}const Up=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Fp=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],zp="6";try{window.__reactRouterVersion=zp}catch{}const $p=j.createContext({isTransitioning:!1}),Hp="startTransition",Yc=Rx[Hp];function Bp(t){let{basename:s,children:r,future:n,window:a}=t,l=j.useRef();l.current==null&&(l.current=G0({window:a,v5Compat:!0}));let i=l.current,[o,c]=j.useState({action:i.action,location:i.location}),{v7_startTransition:x}=n||{},u=j.useCallback(m=>{x&&Yc?Yc(()=>c(m)):c(m)},[c,x]);return j.useLayoutEffect(()=>i.listen(u),[i,u]),j.useEffect(()=>Mp(n),[n]),j.createElement(Ip,{basename:s,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const Vp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wp=j.forwardRef(function(s,r){let{onClick:n,relative:a,reloadDocument:l,replace:i,state:o,target:c,to:x,preventScrollReset:u,viewTransition:m}=s,f=Bm(s,Up),{basename:h}=j.useContext(Ht),g,b=!1;if(typeof x=="string"&&qp.test(x)&&(g=x,Vp))try{let p=new URL(window.location.href),C=x.startsWith("//")?new URL(p.protocol+x):new URL(x),k=mr(C.pathname,h);C.origin===p.origin&&k!=null?x=k+C.search+C.hash:b=!0}catch{}let v=bp(x,{relative:a}),d=Gp(x,{replace:i,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:m});function y(p){n&&n(p),p.defaultPrevented||d(p)}return j.createElement("a",ka({},f,{href:g||v,onClick:b||l?n:y,ref:r,target:c}))}),Vm=j.forwardRef(function(s,r){let{"aria-current":n="page",caseSensitive:a=!1,className:l="",end:i=!1,style:o,to:c,viewTransition:x,children:u}=s,m=Bm(s,Fp),f=Qa(c,{relative:m.relative}),h=gs(),g=j.useContext(Om),{navigator:b,basename:v}=j.useContext(Ht),d=g!=null&&Xp(f)&&x===!0,y=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,p=h.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(p=p.toLowerCase(),C=C?C.toLowerCase():null,y=y.toLowerCase()),C&&v&&(C=mr(C,v)||C);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let N=p===y||!i&&p.startsWith(y)&&p.charAt(k)==="/",S=C!=null&&(C===y||!i&&C.startsWith(y)&&C.charAt(y.length)==="/"),w={isActive:N,isPending:S,isTransitioning:d},D=N?n:void 0,A;typeof l=="function"?A=l(w):A=[l,N?"active":null,S?"pending":null,d?"transitioning":null].filter(Boolean).join(" ");let _=typeof o=="function"?o(w):o;return j.createElement(Wp,ka({},m,{"aria-current":D,className:A,ref:r,style:_,to:c,viewTransition:x}),typeof u=="function"?u(w):u)});var ki;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ki||(ki={}));var Gc;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gc||(Gc={}));function Yp(t){let s=j.useContext(Ga);return s||xe(!1),s}function Gp(t,s){let{target:r,replace:n,state:a,preventScrollReset:l,relative:i,viewTransition:o}=s===void 0?{}:s,c=jt(),x=gs(),u=Qa(t,{relative:i});return j.useCallback(m=>{if(Op(m,r)){m.preventDefault();let f=n!==void 0?n:Ca(x)===Ca(u);c(t,{replace:f,state:a,preventScrollReset:l,relative:i,viewTransition:o})}},[x,c,u,n,a,r,t,l,i,o])}function Xp(t,s){s===void 0&&(s={});let r=j.useContext($p);r==null&&xe(!1);let{basename:n}=Yp(ki.useViewTransitionState),a=Qa(t,{relative:s.relative});if(!r.isTransitioning)return!1;let l=mr(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=mr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Sa(a.pathname,i)!=null||Sa(a.pathname,l)!=null}const qm=j.createContext(void 0),Xc=[{id:"1",email:"admin@omservices.com",name:"Main Admin",role:"main_admin",permissions:[{id:"1",module:"documents",action:"create",granted:!0},{id:"2",module:"documents",action:"read",granted:!0},{id:"3",module:"documents",action:"update",granted:!0},{id:"4",module:"documents",action:"delete",granted:!0},{id:"5",module:"payments",action:"create",granted:!0},{id:"6",module:"payments",action:"read",granted:!0},{id:"7",module:"payments",action:"update",granted:!0},{id:"8",module:"users",action:"create",granted:!0},{id:"9",module:"users",action:"read",granted:!0},{id:"10",module:"users",action:"update",granted:!0},{id:"11",module:"salary",action:"read",granted:!0},{id:"12",module:"salary",action:"manage",granted:!0}],isActive:!0,createdAt:new Date("2024-01-01"),lastLogin:new Date},{id:"2",email:"challan@omservices.com",name:"Challan Staff",role:"challan_staff",permissions:[{id:"11",module:"documents",action:"read",granted:!0},{id:"12",module:"challans",action:"create",granted:!0},{id:"13",module:"challans",action:"update",granted:!0},{id:"14",module:"payments",action:"read",granted:!0}],isActive:!0,createdAt:new Date("2024-01-15"),lastLogin:new Date}];function ee(){const t=j.useContext(qm);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function Qp({children:t}){const[s,r]=j.useState(null),[n,a]=j.useState(!0),[l,i]=j.useState(Xc);j.useEffect(()=>{const m=localStorage.getItem("om-services-user");m&&r(JSON.parse(m)),a(!1)},[]),j.useEffect(()=>{const m=()=>{const f=localStorage.getItem("om-services-users");if(f)try{const h=JSON.parse(f);i([...Xc,...h])}catch(h){console.error("Error parsing stored users:",h)}};return m(),window.addEventListener("storage",m),window.addEventListener("usersUpdated",m),()=>{window.removeEventListener("storage",m),window.removeEventListener("usersUpdated",m)}},[]);const u={user:s,login:async(m,f)=>{a(!0),await new Promise(g=>setTimeout(g,1e3));const h=l.find(g=>g.email===m&&g.isActive);return h&&f==="password123"?(r(h),localStorage.setItem("om-services-user",JSON.stringify(h)),a(!1),!0):(a(!1),!1)},logout:()=>{r(null),localStorage.removeItem("om-services-user")},hasPermission:(m,f)=>s?s.role==="main_admin"?!0:s.permissions.some(h=>h.module===m&&h.action===f&&h.granted):!1,isLoading:n};return e.jsx(qm.Provider,{value:u,children:t})}class Kp{constructor(){this.config=null,this.isConnected=!1}async initialize(){var s,r;try{const n=localStorage.getItem("apiConfig");if(n){const a=JSON.parse(n);if((s=a.mysql)!=null&&s.enabled&&((r=a.mysql)!=null&&r.config)){this.config=a.mysql.config;const l=await this.testConnection();return this.isConnected=l,l}}return!1}catch(n){return console.error("Database initialization error:",n),!1}}async testConnection(){if(!this.config)return!1;try{const s=await fetch("/api/test-db-connection.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.config)});return s.ok?(await s.json()).success:!1}catch(s){return console.error("Database connection test failed:",s),!1}}async query(s,r=[]){if(!this.isConnected||!this.config)return{success:!1,error:"Database not connected"};try{const n=await fetch("/api/db-query.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:this.config,sql:s,params:r})});return n.ok?await n.json():{success:!1,error:`Query failed: ${await n.text()}`}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown database error"}}}async getUsers(){return this.query(`
      SELECT id, email, name, role, is_active as isActive, 
             created_at as createdAt, last_login as lastLogin
      FROM users 
      ORDER BY created_at DESC
    `)}async createUser(s){return this.query(`
      INSERT INTO users (email, name, role, password_hash, is_active, created_at)
      VALUES (?, ?, ?, ?, ?, NOW())
    `,[s.email,s.name,s.role,s.passwordHash||"$2b$10$defaulthash",s.isActive?1:0])}async updateUser(s,r){return this.query(`
      UPDATE users 
      SET name = ?, role = ?, is_active = ?, updated_at = NOW()
      WHERE id = ?
    `,[r.name,r.role,r.isActive?1:0,s])}async getCustomers(){return this.query(`
      SELECT c.*, 
             GROUP_CONCAT(d.document_number) as documents
      FROM customers c
      LEFT JOIN documents d ON d.customer_phone = c.phone
      GROUP BY c.id
      ORDER BY c.created_at DESC
    `)}async createCustomer(s){return this.query(`
      INSERT INTO customers (name, phone, email, address, created_at)
      VALUES (?, ?, ?, ?, NOW())
    `,[s.name,s.phone,s.email,s.address])}async updateCustomer(s,r){return this.query(`
      UPDATE customers 
      SET name = ?, phone = ?, email = ?, address = ?
      WHERE id = ?
    `,[r.name,r.phone,r.email,r.address,s])}async getBuilders(){return this.query(`
      SELECT b.*, 
             GROUP_CONCAT(d.document_number) as documents
      FROM builders b
      LEFT JOIN documents d ON d.builder_name = b.name
      GROUP BY b.id
      ORDER BY b.created_at DESC
    `)}async createBuilder(s){return this.query(`
      INSERT INTO builders (name, contact_person, phone, email, address, registration_number, created_at)
      VALUES (?, ?, ?, ?, ?, ?, NOW())
    `,[s.name,s.contactPerson,s.phone,s.email,s.address,s.registrationNumber])}async updateBuilder(s,r){return this.query(`
      UPDATE builders 
      SET name = ?, contact_person = ?, phone = ?, email = ?, address = ?, registration_number = ?
      WHERE id = ?
    `,[r.name,r.contactPerson,r.phone,r.email,r.address,r.registrationNumber,s])}async getDocuments(){return this.query(`
      SELECT * FROM documents 
      ORDER BY created_at DESC
    `)}async createDocument(s){return this.query(`
      INSERT INTO documents (
        document_number, customer_name, customer_phone, customer_email,
        builder_name, property_details, document_type, status,
        assigned_to, created_at, updated_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())
    `,[s.documentNumber,s.customerName,s.customerPhone,s.customerEmail,s.builderName,s.propertyDetails,s.documentType,s.status||"pending_collection",s.assignedTo])}async updateDocument(s,r){const n=[],a=[];if(Object.keys(r).forEach(i=>{r[i]!==void 0&&(n.push(`${i} = ?`),a.push(r[i]))}),n.length===0)return{success:!1,error:"No fields to update"};n.push("updated_at = NOW()"),a.push(s);const l=`UPDATE documents SET ${n.join(", ")} WHERE id = ?`;return this.query(l,a)}async getPayments(){return this.query(`
      SELECT * FROM payments 
      ORDER BY created_at DESC
    `)}async createPayment(s){return this.query(`
      INSERT INTO payments (
        document_id, agreement_value, consideration_amount, dhc_amount,
        total_amount, paid_amount, pending_amount, payment_status,
        payment_method, payment_date, challan_number, created_at, updated_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())
    `,[s.documentId,s.agreementValue,s.considerationAmount,s.dhcAmount,s.totalAmount,s.paidAmount,s.pendingAmount,s.paymentStatus,s.paymentMethod,s.paymentDate,s.challanNumber])}async getChallans(){return this.query(`
      SELECT * FROM challans 
      ORDER BY created_at DESC
    `)}async createChallan(s){return this.query(`
      INSERT INTO challans (
        document_id, challan_number, amount, filled_by, filled_at,
        status, notes, created_at, updated_at
      ) VALUES (?, ?, ?, ?, NOW(), ?, ?, NOW(), NOW())
    `,[s.documentId,s.challanNumber,s.amount,s.filledBy,s.status||"draft",s.notes])}isConnected(){return this.isConnected}async createSalaryRecord(s){return this.query(`
      INSERT INTO salary_records (
        user_id, user_name, user_role, base_salary, allowances, deductions,
        overtime, bonus, gross_salary, net_salary, pay_period_month, pay_period_year,
        pay_date, status, payment_method, bank_details, notes, created_at, updated_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())
    `,[s.userId,s.userName,s.userRole,s.baseSalary,JSON.stringify(s.allowances),JSON.stringify(s.deductions),JSON.stringify(s.overtime),s.bonus,s.grossSalary,s.netSalary,s.payPeriod.month,s.payPeriod.year,s.payDate,s.status,s.paymentMethod,JSON.stringify(s.bankDetails),s.notes])}async getSalaryRecords(s={}){let r="SELECT * FROM salary_records WHERE 1=1";const n=[];return s.userId&&(r+=" AND user_id = ?",n.push(s.userId)),s.month&&s.year&&(r+=" AND pay_period_month = ? AND pay_period_year = ?",n.push(s.month,s.year)),s.status&&(r+=" AND status = ?",n.push(s.status)),r+=" ORDER BY created_at DESC",this.query(r,n)}async updateSalaryRecord(s,r){const n=[],a=[];if(Object.keys(r).forEach(i=>{r[i]!==void 0&&(i==="allowances"||i==="deductions"||i==="overtime"||i==="bankDetails"?(n.push(`${i} = ?`),a.push(JSON.stringify(r[i]))):i==="payPeriod"?(n.push("pay_period_month = ?","pay_period_year = ?"),a.push(r[i].month,r[i].year)):(n.push(`${i} = ?`),a.push(r[i])))}),n.length===0)return{success:!1,error:"No fields to update"};n.push("updated_at = NOW()"),a.push(s);const l=`UPDATE salary_records SET ${n.join(", ")} WHERE id = ?`;return this.query(l,a)}async createStaffConfig(s){return this.query(`
      INSERT INTO staff_salary_configs (
        user_id, base_salary, allowances, deductions, overtime_rate,
        payment_method, bank_details, is_active, effective_from, created_at, updated_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())
    `,[s.userId,s.baseSalary,JSON.stringify(s.allowances),JSON.stringify(s.deductions),s.overtimeRate,s.paymentMethod,JSON.stringify(s.bankDetails),s.isActive?1:0,s.effectiveFrom])}async getStaffConfigs(){return this.query("SELECT * FROM staff_salary_configs WHERE is_active = 1 ORDER BY created_at DESC")}async updateStaffConfig(s,r){const n=[],a=[];if(Object.keys(r).forEach(i=>{r[i]!==void 0&&(i==="allowances"||i==="deductions"||i==="bankDetails"?(n.push(`${i} = ?`),a.push(JSON.stringify(r[i]))):i==="isActive"?(n.push("is_active = ?"),a.push(r[i]?1:0)):(n.push(`${i} = ?`),a.push(r[i])))}),n.length===0)return{success:!1,error:"No fields to update"};n.push("updated_at = NOW()"),a.push(s);const l=`UPDATE staff_salary_configs SET ${n.join(", ")} WHERE id = ?`;return this.query(l,a)}async saveSettings(s){return this.query(`
      INSERT INTO app_settings (setting_key, setting_value, updated_at)
      VALUES (?, ?, NOW())
      ON DUPLICATE KEY UPDATE setting_value = VALUES(setting_value), updated_at = NOW()
    `,[s.key,JSON.stringify(s.value)])}async getSettings(){return this.query("SELECT * FROM app_settings ORDER BY setting_key")}async createTask(s){return this.query(`
      INSERT INTO tasks (
        title, description, type, priority, status, assigned_to, assigned_by,
        document_id, customer_id, builder_id, due_date, estimated_hours,
        tags, created_at, updated_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())
    `,[s.title,s.description,s.type,s.priority,s.status,s.assignedTo,s.assignedBy,s.documentId,s.customerId,s.builderId,s.dueDate,s.estimatedHours,JSON.stringify(s.tags)])}async getTasks(s={}){let r="SELECT * FROM tasks WHERE 1=1";const n=[];return s.assignedTo&&(r+=" AND assigned_to = ?",n.push(s.assignedTo)),s.status&&(r+=" AND status = ?",n.push(s.status)),s.type&&(r+=" AND type = ?",n.push(s.type)),r+=" ORDER BY created_at DESC",this.query(r,n)}async updateTaskStatus(s,r){const n=`
      UPDATE tasks 
      SET status = ?, updated_at = NOW()
      ${r==="completed"?", completed_at = NOW()":""}
      WHERE id = ?
    `;return this.query(n,[r,s])}async addTaskComment(s){return this.query(`
      INSERT INTO task_comments (
        task_id, content, author_id, author_name, is_internal, created_at
      ) VALUES (?, ?, ?, ?, ?, NOW())
    `,[s.taskId,s.content,s.authorId,s.authorName,s.isInternal?1:0])}getConfig(){return this.config}}const ie=new Kp,Wm=j.createContext(void 0);function Vt(){const t=j.useContext(Wm);if(t===void 0)throw new Error("useDatabase must be used within a DatabaseProvider");return t}function Jp({children:t}){const[s,r]=j.useState(!1),[n,a]=j.useState(!0),[l,i]=j.useState(null),o=async()=>{a(!0),i(null);try{const u=await ie.initialize();return r(u),u||i("Failed to connect to database. Please check your MySQL configuration in Settings."),u}catch(u){const m=u instanceof Error?u.message:"Unknown database error";return i(m),r(!1),!1}finally{a(!1)}},c=async()=>o();j.useEffect(()=>{o()},[]);const x={isConnected:s,isLoading:n,error:l,initialize:o,reconnect:c};return e.jsx(Wm.Provider,{value:x,children:t})}const Ym=j.createContext(void 0),Zp=[{id:"1",email:"admin@omservices.com",name:"Main Admin",role:"main_admin",permissions:[],isActive:!0,createdAt:new Date(2024,0,1),lastLogin:new Date(2024,10,15,10,30)},{id:"2",email:"staff@omservices.com",name:"Staff Admin",role:"staff_admin",permissions:[{id:"1",module:"documents",action:"create",granted:!0},{id:"2",module:"documents",action:"read",granted:!0},{id:"3",module:"documents",action:"update",granted:!0},{id:"4",module:"payments",action:"read",granted:!0},{id:"5",module:"users",action:"create",granted:!0},{id:"6",module:"users",action:"read",granted:!0}],isActive:!0,createdAt:new Date(2024,1,15),lastLogin:new Date(2024,10,14,16,45)},{id:"3",email:"challan@omservices.com",name:"Challan Staff",role:"challan_staff",permissions:[{id:"7",module:"documents",action:"read",granted:!0},{id:"8",module:"challans",action:"create",granted:!0},{id:"9",module:"challans",action:"update",granted:!0},{id:"10",module:"payments",action:"read",granted:!0}],isActive:!0,createdAt:new Date(2024,2,1),lastLogin:new Date(2024,10,15,9,15)},{id:"4",email:"collector@omservices.com",name:"Field Collector",role:"field_collection_staff",permissions:[{id:"11",module:"documents",action:"read",granted:!0},{id:"12",module:"documents",action:"update",granted:!0}],isActive:!0,createdAt:new Date(2024,3,10),lastLogin:new Date(2024,10,13,14,20)},{id:"5",email:"dataentry@omservices.com",name:"Data Entry Staff",role:"data_entry_staff",permissions:[{id:"13",module:"documents",action:"read",granted:!0},{id:"14",module:"documents",action:"update",granted:!0}],isActive:!1,createdAt:new Date(2024,4,5),lastLogin:new Date(2024,9,20,11,30)},{id:"6",email:"delivery@omservices.com",name:"Delivery Staff",role:"document_delivery_staff",permissions:[{id:"15",module:"documents",action:"read",granted:!0},{id:"16",module:"documents",action:"update",granted:!0}],isActive:!0,createdAt:new Date(2024,5,20),lastLogin:new Date(2024,10,12,8,45)}];function fs(){const t=j.useContext(Ym);if(t===void 0)throw new Error("useUsers must be used within a UserProvider");return t}function eg({children:t}){const[s,r]=j.useState(Zp),[n,a]=j.useState(!1),{isConnected:l}=Vt();j.useEffect(()=>{l&&i()},[l]);const i=async()=>{if(l){a(!0);try{const b=await ie.getUsers();if(b.success&&b.data){const v=b.data.map(d=>({id:d.id.toString(),email:d.email,name:d.name,role:d.role,permissions:[],isActive:!!d.isActive,createdAt:new Date(d.createdAt),lastLogin:d.lastLogin?new Date(d.lastLogin):void 0}));r(v)}}catch(b){console.error("Error loading users from database:",b)}finally{a(!1)}}},o=()=>(s.length+1).toString(),c=async b=>{a(!0);try{if(l){const v=await ie.createUser({email:b.email||"",name:b.name||"",role:b.role||"staff_admin",passwordHash:"$2b$10$defaulthash",isActive:b.isActive!==void 0?b.isActive:!0});if(v.success)return await i(),s[s.length-1];throw new Error(v.error||"Failed to create user")}else{await new Promise(C=>setTimeout(C,1e3));const v={id:o(),email:b.email||"",name:b.name||"",role:b.role||"staff_admin",permissions:b.permissions||[],isActive:b.isActive!==void 0?b.isActive:!0,createdAt:new Date,...b};r(C=>[...C,v]);const d=localStorage.getItem("om-services-users"),p=[...d?JSON.parse(d):[],v];return localStorage.setItem("om-services-users",JSON.stringify(p)),window.dispatchEvent(new CustomEvent("usersUpdated")),v}}finally{a(!1)}},x=async(b,v)=>{a(!0);try{if(l){const d=await ie.updateUser(b,v);if(d.success)return await i(),s.find(y=>y.id===b);throw new Error(d.error||"Failed to update user")}else return await new Promise(d=>setTimeout(d,800)),r(d=>d.map(y=>y.id===b?{...y,...v}:y)),s.find(d=>d.id===b)}finally{a(!1)}},u=async b=>{a(!0);try{await new Promise(v=>setTimeout(v,500)),r(v=>v.filter(d=>d.id!==b))}finally{a(!1)}},m=b=>s.find(v=>v.id===b),g={users:s,loading:n,createUser:c,updateUser:x,deleteUser:u,getUser:m,updateUserPermissions:async(b,v)=>{a(!0);try{await new Promise(d=>setTimeout(d,1e3)),r(d=>d.map(y=>y.id===b?{...y,permissions:v}:y))}finally{a(!1)}},toggleUserStatus:async b=>{const v=m(b);v&&await x(b,{isActive:!v.isActive})}};return e.jsx(Ym.Provider,{value:g,children:t})}const Gm=j.createContext(void 0),tg=[];function vr(){const t=j.useContext(Gm);if(t===void 0)throw new Error("useCustomers must be used within a CustomerProvider");return t}function sg({children:t}){const[s,r]=j.useState(tg),[n,a]=j.useState(!1),{isConnected:l}=Vt();j.useEffect(()=>{l&&i()},[l]);const i=async()=>{if(l){a(!0);try{const v=await ie.getCustomers();if(v.success&&v.data){const d=v.data.map(y=>({id:y.id.toString(),name:y.name,phone:y.phone,email:y.email,address:y.address,documents:y.documents?y.documents.split(",").filter(Boolean):[],createdAt:new Date(y.created_at)}));r(d)}}catch(v){console.error("Error loading customers from database:",v)}finally{a(!1)}}},o=()=>`CUST${(s.length+1).toString().padStart(3,"0")}`,c=async v=>{a(!0);try{if(l){const d=await ie.createCustomer({name:v.name||"",phone:v.phone||"",email:v.email,address:v.address||""});if(d.success)return await i(),s[s.length-1];throw new Error(d.error||"Failed to create customer")}else{const d={id:v.id||o(),name:v.name||"",phone:v.phone||"",email:v.email,address:v.address||"",documents:v.documents||[],createdAt:new Date,...v};return r(y=>[...y,d]),d}}finally{a(!1)}},x=async(v,d)=>{a(!0);try{if(l){const y=await ie.updateCustomer(v,d);if(y.success)return await i(),s.find(p=>p.id===v);throw new Error(y.error||"Failed to update customer")}else return r(y=>y.map(p=>p.id===v?{...p,...d}:p)),s.find(y=>y.id===v)}finally{a(!1)}},u=async v=>{a(!0);try{r(d=>d.filter(y=>y.id!==v))}finally{a(!1)}},m=v=>s.find(d=>d.id===v),b={customers:s,loading:n,createCustomer:c,updateCustomer:x,deleteCustomer:u,getCustomer:m,getCustomerByPhone:v=>s.find(d=>d.phone===v),getCustomerByEmail:v=>s.find(d=>d.email===v),addDocumentToCustomer:async(v,d)=>{const y=m(v);y&&!y.documents.includes(d)&&await x(v,{documents:[...y.documents,d]})}};return e.jsx(Gm.Provider,{value:b,children:t})}const Xm=j.createContext(void 0),rg=[];function jr(){const t=j.useContext(Xm);if(t===void 0)throw new Error("useBuilders must be used within a BuilderProvider");return t}function ng({children:t}){const[s,r]=j.useState(rg),[n,a]=j.useState(!1),{isConnected:l}=Vt();j.useEffect(()=>{l&&i()},[l]);const i=async()=>{if(l){a(!0);try{const b=await ie.getBuilders();if(b.success&&b.data){const v=b.data.map(d=>({id:d.id.toString(),name:d.name,contactPerson:d.contact_person,phone:d.phone,email:d.email,address:d.address,registrationNumber:d.registration_number,documents:d.documents?d.documents.split(",").filter(Boolean):[],createdAt:new Date(d.created_at)}));r(v)}}catch(b){console.error("Error loading builders from database:",b)}finally{a(!1)}}},o=()=>`BLD${(s.length+1).toString().padStart(3,"0")}`,c=async b=>{a(!0);try{if(l){const v=await ie.createBuilder({name:b.name||"",contactPerson:b.contactPerson||"",phone:b.phone||"",email:b.email,address:b.address||"",registrationNumber:b.registrationNumber});if(v.success)return await i(),s[s.length-1];throw new Error(v.error||"Failed to create builder")}else{const v={id:b.id||o(),name:b.name||"",contactPerson:b.contactPerson||"",phone:b.phone||"",email:b.email,address:b.address||"",registrationNumber:b.registrationNumber,documents:b.documents||[],createdAt:new Date,...b};return r(d=>[...d,v]),v}}finally{a(!1)}},x=async(b,v)=>{a(!0);try{if(l){const d=await ie.updateBuilder(b,v);if(d.success)return await i(),s.find(y=>y.id===b);throw new Error(d.error||"Failed to update builder")}else return r(d=>d.map(y=>y.id===b?{...y,...v}:y)),s.find(d=>d.id===b)}finally{a(!1)}},u=async b=>{a(!0);try{r(v=>v.filter(d=>d.id!==b))}finally{a(!1)}},m=b=>s.find(v=>v.id===b),g={builders:s,loading:n,createBuilder:c,updateBuilder:x,deleteBuilder:u,getBuilder:m,getBuilderByName:b=>s.find(v=>v.name.toLowerCase().includes(b.toLowerCase())),addDocumentToBuilder:async(b,v)=>{const d=m(b);d&&!d.documents.includes(v)&&await x(b,{documents:[...d.documents,v]})}};return e.jsx(Xm.Provider,{value:g,children:t})}const Qm=j.createContext(void 0),ag=[];function Nt(){const t=j.useContext(Qm);if(t===void 0)throw new Error("useDocuments must be used within a DocumentProvider");return t}function lg({children:t}){const[s,r]=j.useState(ag),[n,a]=j.useState(!1),{createCustomer:l,getCustomerByPhone:i,addDocumentToCustomer:o}=vr(),{createBuilder:c,getBuilderByName:x,addDocumentToBuilder:u}=jr(),{isConnected:m}=Vt();j.useEffect(()=>{m&&f()},[m]);const f=async()=>{if(m){a(!0);try{const N=await ie.getDocuments();if(N.success&&N.data){const S=N.data.map(w=>({id:w.id.toString(),documentNumber:w.document_number,customerName:w.customer_name,customerPhone:w.customer_phone,customerEmail:w.customer_email,builderName:w.builder_name,propertyDetails:w.property_details,documentType:w.document_type,status:w.status,collectionDate:w.collection_date?new Date(w.collection_date):void 0,dataEntryDate:w.data_entry_date?new Date(w.data_entry_date):void 0,registrationDate:w.registration_date?new Date(w.registration_date):void 0,deliveryDate:w.delivery_date?new Date(w.delivery_date):void 0,assignedTo:w.assigned_to,notes:[],files:[],createdAt:new Date(w.created_at),updatedAt:new Date(w.updated_at)}));r(S)}}catch(N){console.error("Error loading documents from database:",N)}finally{a(!1)}}},h=N=>{const S=N.toUpperCase().replace("_",""),w=new Date().getFullYear(),D=s.filter(A=>A.documentType===N).length+1;return`${S}/${w}/${D.toString().padStart(3,"0")}`},g=async N=>{a(!0);try{if(m){const S=N.documentNumber||h(N.documentType),w=await ie.createDocument({documentNumber:S,customerName:N.customerName||"",customerPhone:N.customerPhone||"",customerEmail:N.customerEmail,builderName:N.builderName||"",propertyDetails:N.propertyDetails||"",documentType:N.documentType,status:"pending_collection",assignedTo:N.assignedTo});if(w.success)return N.customerName&&N.customerPhone&&(i(N.customerPhone)||await l({name:N.customerName,phone:N.customerPhone,email:N.customerEmail,address:N.propertyDetails||""})),N.builderName&&(x(N.builderName)||await c({name:N.builderName,contactPerson:"Contact Person",phone:"+91 0000000000",address:"Address not provided"})),await f(),s[s.length-1];throw new Error(w.error||"Failed to create document")}else{const S={id:`DOC${Date.now()}`,documentNumber:N.documentNumber||h(N.documentType),customerName:N.customerName||"",customerPhone:N.customerPhone||"",customerEmail:N.customerEmail,builderName:N.builderName||"",propertyDetails:N.propertyDetails||"",documentType:N.documentType,status:"pending_collection",assignedTo:N.assignedTo,notes:[],files:[],createdAt:new Date,updatedAt:new Date,...N};if(S.customerName&&S.customerPhone){let w=i(S.customerPhone);w?await o(w.id,S.id):w=await l({name:S.customerName,phone:S.customerPhone,email:S.customerEmail,address:S.propertyDetails,documents:[S.id]})}if(S.builderName){let w=x(S.builderName);w?await u(w.id,S.id):w=await c({name:S.builderName,contactPerson:"Contact Person",phone:"+91 0000000000",address:"Address not provided",documents:[S.id]})}return r(w=>[...w,S]),S}}finally{a(!1)}},b=async(N,S)=>{a(!0);try{if(m){const w=await ie.updateDocument(N,S);if(w.success)return await f(),s.find(D=>D.id===N);throw new Error(w.error||"Failed to update document")}else{const w={...S,updatedAt:new Date};return r(D=>D.map(A=>A.id===N?{...A,...w}:A)),s.find(D=>D.id===N)}}finally{a(!1)}},v=async N=>{a(!0);try{r(S=>S.filter(w=>w.id!==N))}finally{a(!1)}},d=N=>s.find(S=>S.id===N),k={documents:s,loading:n,createDocument:g,updateDocument:b,deleteDocument:v,getDocument:d,updateStatus:async(N,S)=>{await b(N,{status:S})},addNote:async(N,S)=>{const w=d(N);w&&await b(N,{notes:[...w.notes,S]})},uploadFile:async(N,S)=>{const w=d(N);if(w){const D={id:`FILE${Date.now()}`,name:S.name,type:S.type.includes("image")?"photo":"document",url:URL.createObjectURL(S),uploadedBy:"Current User",uploadedAt:new Date};await b(N,{files:[...w.files,D]})}}};return e.jsx(Qm.Provider,{value:k,children:t})}const Km=j.createContext(void 0),ig=[];function Nn(){const t=j.useContext(Km);if(t===void 0)throw new Error("usePayments must be used within a PaymentProvider");return t}function og({children:t}){const[s,r]=j.useState(ig),[n,a]=j.useState(!1),l=h=>Math.round(h*.05),i=async h=>{a(!0);try{const g=h.dhcAmount||l(h.considerationAmount||0),b=(h.considerationAmount||0)+g,v={id:`PAY${Date.now()}`,documentId:h.documentId||"",agreementValue:h.agreementValue||0,considerationAmount:h.considerationAmount||0,dhcAmount:g,totalAmount:b,paidAmount:h.paidAmount||0,pendingAmount:b-(h.paidAmount||0),paymentStatus:h.paidAmount===b?"completed":h.paidAmount&&h.paidAmount>0?"partial":"pending",paymentMethod:h.paymentMethod,paymentDate:h.paymentDate,challanNumber:h.challanNumber,createdAt:new Date,updatedAt:new Date,...h};return r(d=>[...d,v]),v}finally{a(!1)}},o=async(h,g)=>{a(!0);try{return r(b=>b.map(v=>{if(v.id===h){const d={...v,...g,updatedAt:new Date};return(g.considerationAmount||g.dhcAmount)&&(d.totalAmount=d.considerationAmount+d.dhcAmount,d.pendingAmount=d.totalAmount-d.paidAmount,d.paymentStatus=d.paidAmount===d.totalAmount?"completed":d.paidAmount>0?"partial":"pending"),d}return v})),s.find(b=>b.id===h)}finally{a(!1)}},f={payments:s,loading:n,createPayment:i,updatePayment:o,deletePayment:async h=>{a(!0);try{r(g=>g.filter(b=>b.id!==h))}finally{a(!1)}},getPayment:h=>s.find(g=>g.id===h),getPaymentsByDocument:h=>s.filter(g=>g.documentId===h),updatePaymentStatus:async(h,g)=>{await o(h,{paymentStatus:g})}};return e.jsx(Km.Provider,{value:f,children:t})}const Jm=j.createContext(void 0),cg=[];function Ka(){const t=j.useContext(Jm);if(t===void 0)throw new Error("useChallans must be used within a ChallanProvider");return t}function dg({children:t}){const[s,r]=j.useState(cg),[n,a]=j.useState(!1),l=()=>{const b=new Date().getFullYear(),v=s.length+1;return`CHALLAN/${b}/${v.toString().padStart(3,"0")}`},i=async b=>{a(!0);try{const v={id:`CH${Date.now()}`,documentId:b.documentId||"",challanNumber:b.challanNumber||l(),amount:b.amount||0,filledBy:b.filledBy||"Current User",filledAt:new Date,status:"draft",notes:b.notes,...b};return r(d=>[...d,v]),v}finally{a(!1)}},o=async(b,v)=>{a(!0);try{return r(d=>d.map(y=>y.id===b?{...y,...v}:y)),s.find(d=>d.id===b)}finally{a(!1)}},g={challans:s,loading:n,createChallan:i,updateChallan:o,deleteChallan:async b=>{a(!0);try{r(v=>v.filter(d=>d.id!==b))}finally{a(!1)}},getChallan:b=>s.find(v=>v.id===b),getChallansByDocument:b=>s.filter(v=>v.documentId===b),submitChallan:async b=>{a(!0);try{await o(b,{status:"submitted"})}finally{a(!1)}},approveChallan:async b=>{a(!0);try{await o(b,{status:"approved"})}finally{a(!1)}},rejectChallan:async b=>{a(!0);try{await o(b,{status:"rejected"})}finally{a(!1)}}};return e.jsx(Jm.Provider,{value:g,children:t})}const Zm=j.createContext(void 0),ug=[],mg=[{id:"PERM001",userId:"3",taskType:"challan_creation",permissions:{canView:!0,canCreate:!0,canEdit:!0,canDelete:!1,canAssign:!1,canComment:!0,canChangeStatus:!0,canViewAllTasks:!1,canEditPriority:!1,canSetDueDate:!1,canAddAttachments:!0,canViewComments:!0},restrictions:{maxTasksPerDay:10,allowedStatuses:["pending","in_progress","completed"],canOnlyViewOwnTasks:!0}},{id:"PERM002",userId:"4",taskType:"document_collection",permissions:{canView:!0,canCreate:!1,canEdit:!0,canDelete:!1,canAssign:!1,canComment:!0,canChangeStatus:!0,canViewAllTasks:!1,canEditPriority:!1,canSetDueDate:!1,canAddAttachments:!0,canViewComments:!0},restrictions:{maxTasksPerDay:8,allowedStatuses:["pending","in_progress","completed"],canOnlyViewOwnTasks:!0}}],xg=[{id:"TEMPLATE001",name:"Document Collection",description:"Standard document collection task",type:"document_collection",defaultPriority:"medium",estimatedHours:2,checklist:[{id:"CHECK001",title:"Verify customer identity",description:"Check ID proof and match with records",isRequired:!0,isCompleted:!1},{id:"CHECK002",title:"Collect all required documents",description:"Ensure all documents in the checklist are collected",isRequired:!0,isCompleted:!1},{id:"CHECK003",title:"Take photos of documents",description:"Photograph all collected documents",isRequired:!0,isCompleted:!1}],requiredFields:["customerId","documentId","dueDate"],autoAssignmentRules:{role:"field_collection_staff",workload:"balanced"}}];function qt(){const t=j.useContext(Zm);if(t===void 0)throw new Error("useTasks must be used within a TaskProvider");return t}function hg({children:t}){const{user:s}=ee(),{isConnected:r}=Vt(),[n,a]=j.useState(ug),[l,i]=j.useState(mg),[o]=j.useState(xg),[c,x]=j.useState(!1);j.useEffect(()=>{r&&u()},[r]);const u=async()=>{if(r){x(!0);try{const _=await ie.getTasks();if(_.success&&_.data){const L=_.data.map(E=>{var R,O,U;return{id:E.id.toString(),title:E.title,description:E.description,type:E.type,priority:E.priority,status:E.status,assignedTo:E.assigned_to,assignedBy:E.assigned_by,documentId:(R=E.document_id)==null?void 0:R.toString(),customerId:(O=E.customer_id)==null?void 0:O.toString(),builderId:(U=E.builder_id)==null?void 0:U.toString(),dueDate:E.due_date?new Date(E.due_date):void 0,completedAt:E.completed_at?new Date(E.completed_at):void 0,estimatedHours:E.estimated_hours?parseFloat(E.estimated_hours):void 0,actualHours:E.actual_hours?parseFloat(E.actual_hours):void 0,tags:JSON.parse(E.tags||"[]"),attachments:[],comments:[],dependencies:[],createdAt:new Date(E.created_at),updatedAt:new Date(E.updated_at)}});a(L)}}catch(_){console.error("Error loading tasks from database:",_)}finally{x(!1)}}},m=()=>`TASK${(n.length+1).toString().padStart(3,"0")}`,f=async _=>{x(!0);try{if(r){const L=await ie.createTask({title:_.title||"",description:_.description||"",type:_.type||"custom",priority:_.priority||"medium",status:"pending",assignedTo:_.assignedTo||"",assignedBy:(s==null?void 0:s.id)||"",documentId:_.documentId,customerId:_.customerId,builderId:_.builderId,dueDate:_.dueDate,estimatedHours:_.estimatedHours,tags:_.tags||[]});if(L.success)return await u(),n[n.length-1];throw new Error(L.error||"Failed to create task")}else{const L={id:m(),title:_.title||"",description:_.description||"",type:_.type||"custom",priority:_.priority||"medium",status:"pending",assignedTo:_.assignedTo||"",assignedBy:(s==null?void 0:s.id)||"",documentId:_.documentId,customerId:_.customerId,builderId:_.builderId,dueDate:_.dueDate,estimatedHours:_.estimatedHours,tags:_.tags||[],attachments:[],comments:[],dependencies:_.dependencies||[],createdAt:new Date,updatedAt:new Date,..._};return a(E=>[...E,L]),L}}finally{x(!1)}},h=async(_,L)=>{x(!0);try{return a(E=>E.map(R=>R.id===_?{...R,...L,updatedAt:new Date}:R)),n.find(E=>E.id===_)}finally{x(!1)}},A={tasks:n,taskPermissions:l,taskTemplates:o,loading:c,createTask:f,updateTask:h,deleteTask:async _=>{x(!0);try{a(L=>L.filter(E=>E.id!==_))}finally{x(!1)}},assignTask:async(_,L)=>{await h(_,{assignedTo:L})},updateTaskStatus:async(_,L)=>{x(!0);try{if(r){const E=await ie.updateTaskStatus(_,L);if(E.success)await u();else throw new Error(E.error||"Failed to update task status")}else{const E={status:L};L==="completed"&&(E.completedAt=new Date),await h(_,E)}}finally{x(!1)}},addTaskComment:async(_,L,E=!1)=>{x(!0);try{if(r&&s){const R=await ie.addTaskComment({taskId:_,content:L,authorId:s.id,authorName:s.name,isInternal:E});if(R.success)await u();else throw new Error(R.error||"Failed to add comment")}else{const R=n.find(O=>O.id===_);if(R&&s){const O={id:`COMMENT${Date.now()}`,content:L,authorId:s.id,authorName:s.name,createdAt:new Date,isInternal:E};await h(_,{comments:[...R.comments,O]})}}}finally{x(!1)}},getTasksByUser:_=>n.filter(L=>L.assignedTo===_),getTasksByType:_=>n.filter(L=>L.type===_),getTaskStats:()=>{const _=n.length,L=n.filter(T=>T.status==="pending").length,E=n.filter(T=>T.status==="in_progress").length,R=n.filter(T=>T.status==="completed").length,O=n.filter(T=>T.dueDate&&T.dueDate<new Date&&T.status!=="completed").length,U=n.filter(T=>T.status==="completed"&&T.actualHours),M=U.length>0?U.reduce((T,I)=>T+(I.actualHours||0),0)/U.length:0,P=n.reduce((T,I)=>(T[I.type]=(T[I.type]||0)+1,T),{}),F=n.reduce((T,I)=>(T[I.priority]=(T[I.priority]||0)+1,T),{}),H=n.reduce((T,I)=>(I.assignedTo&&I.status!=="completed"&&(T[I.assignedTo]=(T[I.assignedTo]||0)+1),T),{});return{totalTasks:_,pendingTasks:L,inProgressTasks:E,completedTasks:R,overdueTasks:O,averageCompletionTime:M,tasksByType:P,tasksByPriority:F,userWorkload:H}},hasTaskPermission:(_,L)=>{if(!s)return!1;if(s.role==="main_admin")return!0;const E=l.find(R=>R.userId===s.id&&R.taskType===_);return(E==null?void 0:E.permissions[L])||!1},getUserTaskPermissions:_=>l.filter(L=>L.userId===_),updateTaskPermissions:async(_,L)=>{x(!0);try{i(E=>E.filter(R=>R.userId!==_)),i(E=>[...E,...L])}finally{x(!1)}},createTaskFromTemplate:async(_,L)=>{const E=o.find(R=>R.id===_);if(!E)throw new Error("Template not found");return f({title:E.name,description:E.description,type:E.type,priority:E.defaultPriority,estimatedHours:E.estimatedHours,...L})},getTaskRedirectUrl:_=>{switch(_.type){case"document_collection":return"/collection";case"data_entry":return"/data-entry";case"document_delivery":return"/delivery";case"challan_creation":return"/challans";case"payment_processing":return"/payments";case"customer_follow_up":return _.customerId,"/customers";case"document_verification":return _.documentId?`/documents/${_.documentId}`:"/documents";case"registration_follow_up":return _.documentId?`/documents/${_.documentId}`:"/documents";case"quality_check":return _.documentId?`/documents/${_.documentId}`:"/documents";case"custom":default:return`/tasks/${_.id}`}}};return e.jsx(Zm.Provider,{value:A,children:t})}class pg{constructor(){this.isInitialized=!1}async initialize(){var n,a;if(this.isInitialized)return;let s,r;if(!s||!r){const l=localStorage.getItem("apiConfig");if(l){const i=JSON.parse(l);(n=i.gmail)!=null&&n.enabled&&((a=i.gmail)!=null&&a.config)&&(r=i.gmail.config.clientId,s=i.gmail.config.apiKey)}}if(!s||!r)throw new Error("Gmail API credentials not configured. Please configure them in Settings  Gmail API section.");return new Promise((l,i)=>{if(window.gapi)this.initializeGapi(l,i);else{const o=document.createElement("script");o.src="https://apis.google.com/js/api.js",o.onload=()=>this.initializeGapi(l,i),o.onerror=()=>i(new Error("Failed to load Google API script")),document.head.appendChild(o)}})}async initializeGapi(s,r){try{this.gapi=window.gapi,await new Promise(n=>{this.gapi.load("client:auth2",n)}),await this.gapi.client.init({apiKey,clientId,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],scope:"https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/gmail.modify"}),this.authInstance=this.gapi.auth2.getAuthInstance(),this.isInitialized=!0,s()}catch(n){r(n instanceof Error?n:new Error("Failed to initialize Gmail API"))}}async signIn(){try{return await this.initialize(),this.authInstance.isSignedIn.get()?!0:(await this.authInstance.signIn({prompt:"select_account"})).isSignedIn()}catch(s){throw console.error("Gmail sign-in error:",s),new Error("Failed to sign in to Gmail. Please check your credentials and try again.")}}async signOut(){try{this.authInstance&&await this.authInstance.signOut()}catch(s){console.error("Gmail sign-out error:",s)}}async isSignedIn(){var s,r,n;try{let a,l;if(!a||!l){const i=localStorage.getItem("apiConfig");if(i){const o=JSON.parse(i);(s=o.gmail)!=null&&s.enabled&&((r=o.gmail)!=null&&r.config)&&(l=o.gmail.config.clientId,a=o.gmail.config.apiKey)}}return!a||!l?!1:(await this.initialize(),((n=this.authInstance)==null?void 0:n.isSignedIn.get())||!1)}catch(a){return console.error("Error checking sign-in status:",a),!1}}async getCurrentUser(){var s;try{return this.authInstance||await this.initialize(),(s=this.authInstance)==null?void 0:s.currentUser.get()}catch(r){return console.error("Error getting current user:",r),null}}async getMessages(s=50){try{this.isInitialized||await this.initialize();const n=(await this.gapi.client.gmail.users.messages.list({userId:"me",maxResults:s,q:"in:inbox"})).result.messages||[],a=[],l=10;for(let i=0;i<n.length;i+=l){const c=n.slice(i,i+l).map(async u=>{try{const m=await this.gapi.client.gmail.users.messages.get({userId:"me",id:u.id,format:"full"});return this.parseMessage(m.result)}catch(m){return console.error(`Error fetching message ${u.id}:`,m),null}}),x=await Promise.all(c);a.push(...x.filter(u=>u!==null)),i+l<n.length&&await new Promise(u=>setTimeout(u,100))}return a.sort((i,o)=>o.date.getTime()-i.date.getTime())}catch(r){throw console.error("Error fetching messages:",r),new Error("Failed to fetch Gmail messages. Please check your permissions and try again.")}}parseMessage(s){var r,n,a,l,i,o,c;try{const x=((r=s.payload)==null?void 0:r.headers)||[],u=y=>{var p;return((p=x.find(C=>C.name.toLowerCase()===y.toLowerCase()))==null?void 0:p.value)||""},m=u("Subject")||"(No Subject)",f=u("From"),h=u("To"),g=new Date(parseInt(s.internalDate));let b="";if((a=(n=s.payload)==null?void 0:n.body)!=null&&a.data)b=this.decodeBase64(s.payload.body.data);else if((l=s.payload)!=null&&l.parts){const y=s.payload.parts.find(p=>p.mimeType==="text/plain"||p.mimeType==="text/html");(i=y==null?void 0:y.body)!=null&&i.data&&(b=this.decodeBase64(y.body.data))}if(b.includes("<")){const y=document.createElement("div");y.innerHTML=b,b=y.textContent||y.innerText||""}b=b.substring(0,500);const v=!((o=s.labelIds)!=null&&o.includes("UNREAD")),d=((c=s.labelIds)==null?void 0:c.includes("STARRED"))||!1;return{id:s.id,threadId:s.threadId,subject:m,from:this.extractEmail(f),to:this.extractEmail(h),date:g,body:b,isRead:v,isStarred:d,labels:s.labelIds||[],attachments:this.extractAttachments(s.payload)}}catch(x){return console.error("Error parsing message:",x),null}}decodeBase64(s){try{const r=s.replace(/-/g,"+").replace(/_/g,"/"),n=r.length%4,a=n?r+"=".repeat(4-n):r;return decodeURIComponent(escape(atob(a)))}catch(r){return console.error("Error decoding base64:",r),s}}extractEmail(s){if(!s)return"";const r=s.match(/<(.+)>/);return r?r[1]:s.split(" ")[s.split(" ").length-1]}extractAttachments(s){const r=[],n=a=>{a.forEach(l=>{var i;l.filename&&((i=l.body)!=null&&i.attachmentId)&&r.push({id:l.body.attachmentId,filename:l.filename,mimeType:l.mimeType,size:l.body.size||0}),l.parts&&n(l.parts)})};return s!=null&&s.parts&&n(s.parts),r}async markAsRead(s){try{await this.gapi.client.gmail.users.messages.modify({userId:"me",id:s,removeLabelIds:["UNREAD"]})}catch(r){throw console.error("Error marking as read:",r),new Error("Failed to mark message as read")}}async markAsUnread(s){try{await this.gapi.client.gmail.users.messages.modify({userId:"me",id:s,addLabelIds:["UNREAD"]})}catch(r){throw console.error("Error marking as unread:",r),new Error("Failed to mark message as unread")}}async starMessage(s){try{await this.gapi.client.gmail.users.messages.modify({userId:"me",id:s,addLabelIds:["STARRED"]})}catch(r){throw console.error("Error starring message:",r),new Error("Failed to star message")}}async unstarMessage(s){try{await this.gapi.client.gmail.users.messages.modify({userId:"me",id:s,removeLabelIds:["STARRED"]})}catch(r){throw console.error("Error unstarring message:",r),new Error("Failed to unstar message")}}async deleteMessage(s){try{await this.gapi.client.gmail.users.messages.trash({userId:"me",id:s})}catch(r){throw console.error("Error deleting message:",r),new Error("Failed to delete message")}}async sendReply(s,r){try{const a=(await this.gapi.client.gmail.users.messages.get({userId:"me",id:s,format:"full"})).result.payload.headers,l=f=>{var h;return((h=a.find(g=>g.name.toLowerCase()===f.toLowerCase()))==null?void 0:h.value)||""},i=l("From"),o=l("Subject"),c=l("Message-ID"),x=o.startsWith("Re: ")?o:`Re: ${o}`,u=[`To: ${i}`,`Subject: ${x}`,`In-Reply-To: ${c}`,`References: ${c}`,"",r].join(`
`),m=btoa(unescape(encodeURIComponent(u))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");await this.gapi.client.gmail.users.messages.send({userId:"me",resource:{raw:m}})}catch(n){throw console.error("Error sending reply:",n),new Error("Failed to send reply")}}async getUnreadCount(){try{return(await this.gapi.client.gmail.users.messages.list({userId:"me",q:"in:inbox is:unread",maxResults:1})).result.resultSizeEstimate||0}catch(s){return console.error("Error getting unread count:",s),0}}}const nt=new pg,ex=j.createContext(void 0),ys=[{id:"msg1",threadId:"thread1",subject:"Document Registration Query",from:"customer@example.com",to:"admin@omservices.com",date:new Date(2024,11,20,10,30),body:"Hello, I wanted to inquire about the status of my document registration. My document number is AGR/2024/001. Could you please provide an update?",isRead:!1,isStarred:!1,labels:["INBOX","IMPORTANT"]},{id:"msg2",threadId:"thread2",subject:"Payment Confirmation Required",from:"builder@example.com",to:"admin@omservices.com",date:new Date(2024,11,19,14,15),body:"Hi, I need confirmation of payment for challan CHALLAN/2024/002. The payment was made yesterday via online transfer. Please confirm receipt.",isRead:!0,isStarred:!0,labels:["INBOX"]},{id:"msg3",threadId:"thread3",subject:"Urgent: Document Collection Delay",from:"urgent.customer@example.com",to:"admin@omservices.com",date:new Date(2024,11,18,16,45),body:"There has been a delay in document collection due to unavailability. Can we reschedule for tomorrow? This is quite urgent as we have a deadline to meet.",isRead:!1,isStarred:!1,labels:["INBOX","URGENT"]}];function Nr(){const t=j.useContext(ex);if(t===void 0)throw new Error("useGmail must be used within a GmailProvider");return t}function gg({children:t}){const[s,r]=j.useState([]),[n,a]=j.useState(!1),[l,i]=j.useState(!1),[o,c]=j.useState(null),[x,u]=j.useState(null),m=s.filter(S=>!S.isRead).length;j.useEffect(()=>{f()},[]);const f=async()=>{var S;try{u(null);const w=localStorage.getItem("apiConfig");if(w&&!((S=JSON.parse(w).gmail)!=null&&S.enabled)){r(ys);return}const D=await nt.isSignedIn();if(i(D),D){const A=await nt.getCurrentUser();c(A),await b()}else r(ys)}catch(w){console.error("Error checking sign-in status:",w),i(!1),r(ys)}},h=async()=>{a(!0),u(null);try{if(await nt.signIn()){const w=await nt.getCurrentUser();c(w),i(!0),await b()}else throw new Error("Failed to sign in to Gmail")}catch(S){console.error("Error connecting to Gmail:",S);const w=S instanceof Error?S.message:"Failed to connect to Gmail";u(w),w.includes("credentials not configured")?u("Gmail API not configured. Please go to Settings  Gmail API to configure your credentials."):w.includes("popup")?u("Please allow popups for this site and try again."):u("Failed to connect to Gmail. Please check your internet connection and try again."),r(ys)}finally{a(!1)}},g=async()=>{try{await nt.signOut(),i(!1),c(null),r(ys),u(null)}catch(S){console.error("Error disconnecting Gmail:",S)}},b=async()=>{if(!l){r(ys);return}a(!0),u(null);try{const S=await nt.getMessages(50);r(S)}catch(S){console.error("Error fetching messages:",S),u("Failed to fetch messages. Using demo data."),r(ys)}finally{a(!1)}},N={messages:s,loading:n,isConnected:l,unreadCount:m,currentUser:o,error:x,connectGmail:h,disconnectGmail:g,fetchMessages:b,markAsRead:async S=>{try{l&&await nt.markAsRead(S),r(w=>w.map(D=>D.id===S?{...D,isRead:!0}:D))}catch(w){console.error("Error marking as read:",w),r(D=>D.map(A=>A.id===S?{...A,isRead:!0}:A))}},markAsUnread:async S=>{try{l&&await nt.markAsUnread(S),r(w=>w.map(D=>D.id===S?{...D,isRead:!1}:D))}catch(w){console.error("Error marking as unread:",w),r(D=>D.map(A=>A.id===S?{...A,isRead:!1}:A))}},starMessage:async S=>{try{l&&await nt.starMessage(S),r(w=>w.map(D=>D.id===S?{...D,isStarred:!0}:D))}catch(w){console.error("Error starring message:",w),r(D=>D.map(A=>A.id===S?{...A,isStarred:!0}:A))}},unstarMessage:async S=>{try{l&&await nt.unstarMessage(S),r(w=>w.map(D=>D.id===S?{...D,isStarred:!1}:D))}catch(w){console.error("Error unstarring message:",w),r(D=>D.map(A=>A.id===S?{...A,isStarred:!1}:A))}},deleteMessage:async S=>{try{l&&await nt.deleteMessage(S),r(w=>w.filter(D=>D.id!==S))}catch(w){throw console.error("Error deleting message:",w),new Error("Failed to delete message")}},sendReply:async(S,w)=>{try{if(!l)throw new Error("Not connected to Gmail");await nt.sendReply(S,w),await b()}catch(D){throw console.error("Error sending reply:",D),D}}};return e.jsx(ex.Provider,{value:N,children:t})}const tx=j.createContext(void 0),fg=[],yg=[],bg=[{id:"WS001",userId:"1",dayOfWeek:1,startTime:"09:00",endTime:"18:00",isWorkingDay:!0,breakDuration:60},{id:"WS002",userId:"1",dayOfWeek:2,startTime:"09:00",endTime:"18:00",isWorkingDay:!0,breakDuration:60},{id:"WS003",userId:"1",dayOfWeek:3,startTime:"09:00",endTime:"18:00",isWorkingDay:!0,breakDuration:60},{id:"WS004",userId:"1",dayOfWeek:4,startTime:"09:00",endTime:"18:00",isWorkingDay:!0,breakDuration:60},{id:"WS005",userId:"1",dayOfWeek:5,startTime:"09:00",endTime:"18:00",isWorkingDay:!0,breakDuration:60},{id:"WS006",userId:"1",dayOfWeek:6,startTime:"09:00",endTime:"14:00",isWorkingDay:!0,breakDuration:30},{id:"WS007",userId:"1",dayOfWeek:0,startTime:"00:00",endTime:"00:00",isWorkingDay:!1,breakDuration:0}],vg={workingHoursPerDay:8,workingDaysPerWeek:6,lateThresholdMinutes:15,halfDayThresholdHours:4,overtimeThresholdHours:8,allowEarlyClockIn:!0,allowLateClockOut:!0,requireLocationTracking:!1,autoClockOutTime:"20:00"};function wr(){const t=j.useContext(tx);if(t===void 0)throw new Error("useAttendance must be used within an AttendanceProvider");return t}function jg({children:t}){const{user:s}=ee(),{isConnected:r}=Vt(),[n,a]=j.useState(fg),[l,i]=j.useState(yg),[o]=j.useState(bg),[c]=j.useState(vg),[x,u]=j.useState(!1),m=()=>`ATT${(n.length+1).toString().padStart(3,"0")}`,f=async(D,A)=>{if(!s)throw new Error("User not authenticated");u(!0);try{if(r){const _=await ie.clockIn(s.id,D,A);if(_.success){const L=new Date,E=new Date(L.getFullYear(),L.getMonth(),L.getDate()),R={id:m(),userId:s.id,userName:s.name,userRole:s.role,date:E,clockInTime:L,status:"present",location:D,notes:A,createdAt:L,updatedAt:L};return a(O=>[...O,R]),R}else throw new Error(_.error||"Failed to clock in")}else{const _=new Date,L=new Date(_.getFullYear(),_.getMonth(),_.getDate()),E=n.find(M=>M.userId===s.id&&M.date.toDateString()===L.toDateString());if(E&&E.clockInTime)throw new Error("Already clocked in today");const R=new Date(L);R.setHours(9,0,0,0);const O=_>new Date(R.getTime()+c.lateThresholdMinutes*6e4),U={id:m(),userId:s.id,userName:s.name,userRole:s.role,date:L,clockInTime:_,status:O?"late":"present",location:D,notes:A,createdAt:_,updatedAt:_};return a(M=>[...M,U]),U}}finally{u(!1)}},h=async D=>{if(!s)throw new Error("User not authenticated");u(!0);try{if(r){const A=await ie.clockOut(s.id,D);if(A.success){const _=new Date,L=new Date(_.getFullYear(),_.getMonth(),_.getDate()),E=n.find(R=>R.userId===s.id&&R.date.toDateString()===L.toDateString()&&R.clockInTime&&!R.clockOutTime);if(E){const R=(_.getTime()-E.clockInTime.getTime())/6e4,O=Math.round(R/60*100)/100,U=E.breakTime||60,M=O-U/60,P=Math.max(0,M-c.workingHoursPerDay),F={...E,clockOutTime:_,totalHours:M,overtime:P,notes:D||E.notes,updatedAt:_};return a(H=>H.map(T=>T.id===E.id?F:T)),F}else throw new Error("No active clock-in found for today")}else throw new Error(A.error||"Failed to clock out")}else{const A=new Date,_=new Date(A.getFullYear(),A.getMonth(),A.getDate()),L=n.find(F=>F.userId===s.id&&F.date.toDateString()===_.toDateString()&&F.clockInTime&&!F.clockOutTime);if(!L)throw new Error("No active clock-in found for today");const E=(A.getTime()-L.clockInTime.getTime())/(1e3*60),R=Math.round(E/60*100)/100,O=L.breakTime||60,U=R-O/60,M=Math.max(0,U-c.workingHoursPerDay),P={...L,clockOutTime:A,totalHours:U,overtime:M,notes:D||L.notes,updatedAt:A};return a(F=>F.map(H=>H.id===L.id?P:H)),P}}finally{u(!1)}},g=D=>{const A=D||(s==null?void 0:s.id);if(!A)return;const _=new Date;return n.find(L=>L.userId===A&&L.date.toDateString()===_.toDateString())},w={attendanceRecords:n,leaveRequests:l,workSchedules:o,attendanceSettings:c,loading:x,clockIn:f,clockOut:h,getTodayAttendance:g,getUserAttendanceStats:(D,A,_)=>{const L=n.filter(Y=>Y.userId===D&&Y.date>=A&&Y.date<=_),E=L.length,R=L.filter(Y=>Y.status==="present").length,O=L.filter(Y=>Y.status==="absent").length,U=L.filter(Y=>Y.status==="late").length,M=L.filter(Y=>Y.status==="half_day").length,P=L.filter(Y=>Y.status==="on_leave").length,F=L.reduce((Y,B)=>Y+(B.totalHours||0),0),H=E>0?F/E:0,T=L.reduce((Y,B)=>Y+(B.overtime||0),0),I=R+U+M,$=E>0?I/E*100:0;return{totalDays:E,presentDays:R,absentDays:O,lateDays:U,halfDays:M,leaveDays:P,totalHours:F,averageHours:H,overtimeHours:T,attendancePercentage:$}},getAttendanceByDateRange:(D,A,_)=>n.filter(L=>L.date>=D&&L.date<=A&&(!_||L.userId===_)),markAttendance:async(D,A,_,L)=>{u(!0);try{const E=new Date(A.getFullYear(),A.getMonth(),A.getDate()),R=n.find(O=>O.userId===D&&O.date.toDateString()===E.toDateString());if(R){const O={...R,status:_,notes:L,updatedAt:new Date};return a(U=>U.map(M=>M.id===R.id?O:M)),O}else{const O={id:m(),userId:D,userName:"User Name",userRole:"staff",date:E,status:_,notes:L,createdAt:new Date,updatedAt:new Date};return a(U=>[...U,O]),O}}finally{u(!1)}},updateAttendance:async(D,A)=>{u(!0);try{const _={...A,updatedAt:new Date};return a(L=>L.map(E=>E.id===D?{...E,..._}:E)),n.find(L=>L.id===D)}finally{u(!1)}},submitLeaveRequest:async D=>{if(!s)throw new Error("User not authenticated");u(!0);try{const A={id:`LEAVE${Date.now()}`,userId:s.id,userName:s.name,leaveType:D.leaveType,startDate:D.startDate,endDate:D.endDate,totalDays:D.totalDays,reason:D.reason,status:"pending",appliedAt:new Date,...D};return i(_=>[..._,A]),A}finally{u(!1)}},approveLeaveRequest:async(D,A)=>{if(!s)throw new Error("User not authenticated");u(!0);try{i(_=>_.map(L=>L.id===D?{...L,status:"approved",reviewedBy:s.name,reviewedAt:new Date,reviewComments:A}:L))}finally{u(!1)}},rejectLeaveRequest:async(D,A)=>{if(!s)throw new Error("User not authenticated");u(!0);try{i(_=>_.map(L=>L.id===D?{...L,status:"rejected",reviewedBy:s.name,reviewedAt:new Date,reviewComments:A}:L))}finally{u(!1)}},isUserClockedIn:D=>{const A=D||(s==null?void 0:s.id);if(!A)return!1;const _=g(A);return!!(_!=null&&_.clockInTime&&!(_!=null&&_.clockOutTime))},getCurrentWorkingHours:D=>{const A=D||(s==null?void 0:s.id);if(!A)return 0;const _=g(A);if(!(_!=null&&_.clockInTime))return 0;const L=new Date,E=_.clockInTime,R=(L.getTime()-E.getTime())/(1e3*60),O=_.breakTime||60,U=R/60-O/60;return Math.max(0,Math.round(U*100)/100)}};return e.jsx(tx.Provider,{value:w,children:t})}const sx=j.createContext(void 0),Ng=[{id:"SAL001",userId:"2",userName:"Staff Admin",userRole:"staff_admin",baseSalary:45e3,allowances:[{id:"ALL001",type:"house_rent",amount:15e3,description:"House Rent Allowance"},{id:"ALL002",type:"transport",amount:3e3,description:"Transport Allowance"}],deductions:[{id:"DED001",type:"tax",amount:5e3,description:"Income Tax"},{id:"DED002",type:"provident_fund",amount:2250,description:"PF Contribution"}],overtime:[],bonus:5e3,grossSalary:68e3,netSalary:60750,payPeriod:{month:12,year:2024,startDate:new Date(2024,11,1),endDate:new Date(2024,11,31)},payDate:new Date(2024,11,30),status:"paid",paymentMethod:"bank_transfer",bankDetails:{accountNumber:"1234567890",bankName:"State Bank of India",ifscCode:"SBIN0001234",accountHolderName:"Staff Admin"},createdAt:new Date(2024,11,25),updatedAt:new Date(2024,11,30),approvedBy:"Main Admin",approvedAt:new Date(2024,11,28)},{id:"SAL002",userId:"3",userName:"Challan Staff",userRole:"challan_staff",baseSalary:35e3,allowances:[{id:"ALL003",type:"house_rent",amount:1e4,description:"House Rent Allowance"},{id:"ALL004",type:"transport",amount:2500,description:"Transport Allowance"}],deductions:[{id:"DED003",type:"tax",amount:3e3,description:"Income Tax"},{id:"DED004",type:"provident_fund",amount:1750,description:"PF Contribution"}],overtime:[{id:"OT001",date:new Date(2024,11,15),hours:4,rate:200,amount:800,description:"Weekend work"}],bonus:2e3,grossSalary:50300,netSalary:45550,payPeriod:{month:12,year:2024,startDate:new Date(2024,11,1),endDate:new Date(2024,11,31)},payDate:new Date(2024,11,30),status:"approved",paymentMethod:"bank_transfer",createdAt:new Date(2024,11,25),updatedAt:new Date(2024,11,28),approvedBy:"Main Admin",approvedAt:new Date(2024,11,28)}],wg=[{id:"CONFIG001",userId:"2",baseSalary:45e3,allowances:[{id:"ALL001",type:"house_rent",amount:15e3,description:"House Rent Allowance"},{id:"ALL002",type:"transport",amount:3e3,description:"Transport Allowance"}],deductions:[{id:"DED001",type:"tax",amount:5e3,description:"Income Tax"},{id:"DED002",type:"provident_fund",amount:2250,description:"PF Contribution"}],overtimeRate:200,paymentMethod:"bank_transfer",bankDetails:{accountNumber:"1234567890",bankName:"State Bank of India",ifscCode:"SBIN0001234",accountHolderName:"Staff Admin"},isActive:!0,effectiveFrom:new Date(2024,0,1),createdAt:new Date(2024,0,1),updatedAt:new Date(2024,11,1)}];function wn(){const t=j.useContext(sx);if(t===void 0)throw new Error("useSalary must be used within a SalaryProvider");return t}function Cg({children:t}){const{user:s}=ee(),{users:r}=fs(),{getUserAttendanceStats:n}=wr(),{isConnected:a}=Vt(),[l,i]=j.useState(Ng),[o,c]=j.useState(wg),[x,u]=j.useState([]),[m,f]=j.useState(!1);j.useEffect(()=>{a&&h()},[a]);const h=async()=>{if(a){f(!0);try{const E=await ie.getSalaryRecords();if(E.success&&E.data){const O=E.data.map(U=>({id:U.id.toString(),userId:U.user_id.toString(),userName:U.user_name,userRole:U.user_role,baseSalary:parseFloat(U.base_salary),allowances:JSON.parse(U.allowances||"[]"),deductions:JSON.parse(U.deductions||"[]"),overtime:JSON.parse(U.overtime||"[]"),bonus:parseFloat(U.bonus||"0"),grossSalary:parseFloat(U.gross_salary),netSalary:parseFloat(U.net_salary),payPeriod:{month:U.pay_period_month,year:U.pay_period_year,startDate:new Date(U.pay_period_year,U.pay_period_month-1,1),endDate:new Date(U.pay_period_year,U.pay_period_month,0)},payDate:new Date(U.pay_date),status:U.status,paymentMethod:U.payment_method,bankDetails:JSON.parse(U.bank_details||"null"),notes:U.notes,createdAt:new Date(U.created_at),updatedAt:new Date(U.updated_at),approvedBy:U.approved_by,approvedAt:U.approved_at?new Date(U.approved_at):void 0}));i(O)}const R=await ie.getStaffConfigs();if(R.success&&R.data){const O=R.data.map(U=>({id:U.id.toString(),userId:U.user_id.toString(),baseSalary:parseFloat(U.base_salary),allowances:JSON.parse(U.allowances||"[]"),deductions:JSON.parse(U.deductions||"[]"),overtimeRate:parseFloat(U.overtime_rate||"0"),paymentMethod:U.payment_method,bankDetails:JSON.parse(U.bank_details||"null"),isActive:!!U.is_active,effectiveFrom:new Date(U.effective_from),createdAt:new Date(U.created_at),updatedAt:new Date(U.updated_at)}));c(O)}}catch(E){console.error("Error loading salary data from database:",E)}finally{f(!1)}}},g=()=>`SAL${(l.length+1).toString().padStart(3,"0")}`,b=(E,R=0,O=0)=>{const U=E.allowances.reduce((T,I)=>T+I.amount,0),M=E.deductions.reduce((T,I)=>T+I.amount,0),P=R*E.overtimeRate,F=E.baseSalary+U+P+O,H=F-M;return{gross:F,net:H}},v=async E=>{var R;f(!0);try{if(a){const O=await ie.createSalaryRecord(E);if(O.success)return await h(),l[l.length-1];throw new Error(O.error||"Failed to create salary record")}else{const O=D(E.userId);if(!O)throw new Error("Staff salary configuration not found");const U=((R=E.overtime)==null?void 0:R.reduce((H,T)=>H+T.hours,0))||0,{gross:M,net:P}=b(O,U,E.bonus||0),F={id:g(),userId:E.userId,userName:E.userName,userRole:E.userRole,baseSalary:O.baseSalary,allowances:O.allowances,deductions:O.deductions,overtime:E.overtime||[],bonus:E.bonus||0,grossSalary:M,netSalary:P,payPeriod:E.payPeriod,payDate:E.payDate,status:"draft",paymentMethod:O.paymentMethod,bankDetails:O.bankDetails,notes:E.notes,createdAt:new Date,updatedAt:new Date,...E};return i(H=>[...H,F]),F}}finally{f(!1)}},d=async(E,R)=>{f(!0);try{if(a){const O=await ie.updateSalaryRecord(E,R);if(O.success)return await h(),l.find(U=>U.id===E);throw new Error(O.error||"Failed to update salary record")}else return i(O=>O.map(U=>U.id===E?{...U,...R,updatedAt:new Date}:U)),l.find(O=>O.id===E)}finally{f(!1)}},y=async E=>{f(!0);try{i(R=>R.filter(O=>O.id!==E))}finally{f(!1)}},p=async E=>{f(!0);try{if(a){const R=await ie.createStaffConfig(E);if(R.success)return await h(),o[o.length-1];throw new Error(R.error||"Failed to create staff configuration")}else{const R={id:`CONFIG${Date.now()}`,userId:E.userId,baseSalary:E.baseSalary||0,allowances:E.allowances||[],deductions:E.deductions||[],overtimeRate:E.overtimeRate||0,paymentMethod:E.paymentMethod||"bank_transfer",bankDetails:E.bankDetails,isActive:!0,effectiveFrom:E.effectiveFrom||new Date,createdAt:new Date,updatedAt:new Date,...E};return c(O=>[...O,R]),R}}finally{f(!1)}},C=async(E,R)=>{f(!0);try{if(a){const O=await ie.updateStaffConfig(E,R);if(O.success)return await h(),o.find(U=>U.id===E);throw new Error(O.error||"Failed to update staff configuration")}else return c(O=>O.map(U=>U.id===E?{...U,...R,updatedAt:new Date}:U)),o.find(O=>O.id===E)}finally{f(!1)}},k=async(E,R)=>{f(!0);try{const O=r.filter(P=>P.isActive),U=[];for(const P of O){const F=D(P.id);if(!F)continue;const H=new Date(R,E-1,1),T=new Date(R,E,0),$=n(P.id,H,T).overtimeHours||0,{gross:Y,net:B}=b(F,$),W={id:g(),userId:P.id,userName:P.name,userRole:P.role,baseSalary:F.baseSalary,allowances:F.allowances,deductions:F.deductions,overtime:$>0?[{id:`OT${Date.now()}`,date:T,hours:$,rate:F.overtimeRate,amount:$*F.overtimeRate,description:"Monthly overtime"}]:[],bonus:0,grossSalary:Y,netSalary:B,payPeriod:{month:E,year:R,startDate:H,endDate:T},payDate:new Date(R,E,5),status:"draft",paymentMethod:F.paymentMethod,bankDetails:F.bankDetails,createdAt:new Date,updatedAt:new Date};U.push(W)}i(P=>[...P,...U]);const M={month:E,year:R,totalStaff:U.length,totalGrossSalary:U.reduce((P,F)=>P+F.grossSalary,0),totalNetSalary:U.reduce((P,F)=>P+F.netSalary,0),totalAllowances:U.reduce((P,F)=>P+F.allowances.reduce((H,T)=>H+T.amount,0),0),totalDeductions:U.reduce((P,F)=>P+F.deductions.reduce((H,T)=>H+T.amount,0),0),totalOvertime:U.reduce((P,F)=>P+F.overtime.reduce((H,T)=>H+T.amount,0),0),paidCount:0,pendingCount:U.length,status:"draft"};return u(P=>[...P,M]),M}finally{f(!1)}},N=async E=>{await d(E,{status:"approved",approvedBy:s==null?void 0:s.name,approvedAt:new Date})},S=async E=>{await d(E,{status:"paid"})},w=()=>{const E=o.filter(M=>M.isActive),R=new Date().getMonth()+1,O=new Date().getFullYear(),U=_(R,O);return{totalStaff:E.length,totalMonthlySalary:E.reduce((M,P)=>M+P.baseSalary,0),totalPaidThisMonth:U.filter(M=>M.status==="paid").reduce((M,P)=>M+P.netSalary,0),totalPendingPayments:U.filter(M=>M.status!=="paid").reduce((M,P)=>M+P.netSalary,0),averageSalary:E.length>0?E.reduce((M,P)=>M+P.baseSalary,0)/E.length:0,highestSalary:Math.max(...E.map(M=>M.baseSalary),0),lowestSalary:Math.min(...E.map(M=>M.baseSalary),0),totalOvertime:U.reduce((M,P)=>M+P.overtime.reduce((F,H)=>F+H.amount,0),0),totalAllowances:U.reduce((M,P)=>M+P.allowances.reduce((F,H)=>F+H.amount,0),0),totalDeductions:U.reduce((M,P)=>M+P.deductions.reduce((F,H)=>F+H.amount,0),0)}},D=E=>o.find(R=>R.userId===E&&R.isActive),A=E=>l.filter(R=>R.userId===E),_=(E,R)=>l.filter(O=>O.payPeriod.month===E&&O.payPeriod.year===R),L={salaryRecords:l,staffConfigs:o,payrollSummaries:x,loading:m,createSalaryRecord:v,updateSalaryRecord:d,deleteSalaryRecord:y,createStaffConfig:p,updateStaffConfig:C,generatePayroll:k,approveSalary:N,paySalary:S,getSalaryStats:w,getStaffConfig:D,getSalaryRecordsByUser:A,getSalaryRecordsByPeriod:_};return e.jsx(sx.Provider,{value:L,children:t})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),V=(t,s)=>{const r=j.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:c,...x},u)=>j.createElement("svg",{ref:u,...Sg,width:a,height:a,stroke:n,strokeWidth:i?Number(l)*24/Number(a):l,className:["lucide",`lucide-${Eg(t)}`,o].join(" "),...x},[...s.map(([m,f])=>j.createElement(m,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=V("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=V("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=V("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=V("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=V("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=V("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=V("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=V("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=V("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=V("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=V("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=V("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=V("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=V("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=V("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=V("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=V("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=V("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=V("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=V("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=V("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=V("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=V("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=V("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=V("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=V("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=V("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=V("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=V("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=V("Forward",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=V("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=V("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=V("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=V("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=V("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=V("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=V("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=V("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=V("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=V("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=V("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=V("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=V("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=V("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=V("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=V("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=V("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=V("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=V("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=V("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=V("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=V("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=V("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=V("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=V("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=V("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=V("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=V("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=V("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=V("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=V("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=V("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=V("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=V("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=V("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=V("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=V("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=V("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=V("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=V("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Po({className:t="",size:s="md"}){const r={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"};return e.jsx("div",{className:`${r[s]} ${t}`,children:e.jsx("img",{src:"/api/logo.png",alt:"Om Services Logo",className:"w-full h-full object-contain rounded-lg",onError:n=>{const a=n.target;a.style.display="none";const l=a.parentElement;l&&(l.innerHTML=`
              <div class="w-full h-full bg-gradient-to-br from-orange-600 to-red-600 rounded-lg flex items-center justify-center text-white font-bold text-sm">
                OM
              </div>
            `)}})})}function $g(){const[t,s]=j.useState(""),[r,n]=j.useState(""),[a,l]=j.useState(!1),[i,o]=j.useState(""),{login:c,isLoading:x}=ee(),u=async f=>{if(f.preventDefault(),o(""),!t||!r){o("Please fill in all fields");return}await c(t,r)||o("Invalid email or password")},m=[{email:"admin@omservices.com",role:"Main Admin"},{email:"challan@omservices.com",role:"Challan Staff"}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4 md:p-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-6 md:mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 mb-4 shadow-lg",children:e.jsx(Po,{size:"lg"})}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:"Om Services"}),e.jsx("p",{className:"text-gray-600 text-sm md:text-base",children:"Admin Panel Login"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 border border-gray-100",children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{id:"email",type:"email",value:t,onChange:f=>s(f.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-base",placeholder:"Enter your email",disabled:x})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:a?"text":"password",value:r,onChange:f=>n(f.target.value),className:"w-full pl-4 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-base",placeholder:"Enter your password",disabled:x}),e.jsx("button",{type:"button",onClick:()=>l(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-500 hover:text-gray-700",disabled:x,children:a?e.jsx(hr,{className:"w-5 h-5"}):e.jsx(Ee,{className:"w-5 h-5"})})]})]}),i&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsx("p",{className:"text-red-700 text-sm",children:i})}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-gradient-primary hover:opacity-90 disabled:opacity-50 text-white font-medium py-3 px-4 rounded-lg transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl text-base",children:x?e.jsxs(e.Fragment,{children:[e.jsx(Lg,{className:"w-5 h-5 animate-spin mr-2"}),"Signing In..."]}):"Sign In"})]})}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-gray-50 rounded-xl p-4 md:p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Demo Credentials:"}),e.jsx("div",{className:"space-y-2",children:m.map((f,h)=>e.jsxs("div",{className:"flex flex-col text-xs text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:[f.role,":"]}),e.jsxs("span",{className:"font-mono bg-white px-2 py-1 rounded border mt-1 text-xs",children:[f.email," / password123"]})]},h))})]})]})})}function Hg({onMenuClick:t}){const{user:s,logout:r}=ee(),{unreadCount:n}=Nr();return e.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:t,className:"p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 lg:hidden",children:e.jsx(Og,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Admin Panel"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Welcome back, ",s==null?void 0:s.name]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100 relative",children:[e.jsx(Ta,{className:"w-6 h-6"}),n>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-500 rounded-full text-xs text-white flex items-center justify-center",children:n>9?"9+":n})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s==null?void 0:s.role.replace("_"," ").toUpperCase()})]}),e.jsx("button",{onClick:r,className:"p-2 rounded-md text-gray-500 hover:text-gray-600 hover:bg-gray-100",title:"Logout",children:e.jsx(Rg,{className:"w-5 h-5"})})]})]})]})})}function mx(t){var s,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=mx(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Di(){for(var t,s,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(s=mx(t))&&(n&&(n+=" "),n+=s);return n}function Bg({isOpen:t,onClose:s}){const{user:r,hasPermission:n}=ee(),{unreadCount:a}=Nr(),l=[{name:"Dashboard",href:"/dashboard",icon:_g,permission:null},{name:"Documents",href:"/documents",icon:Q,permission:{module:"documents",action:"read"}},{name:"Payments",href:"/payments",icon:zt,permission:{module:"payments",action:"read"}},{name:"Challans",href:"/challans",icon:gt,permission:{module:"challans",action:"read"}},{name:"Customers",href:"/customers",icon:bt,permission:{module:"customers",action:"read"}},{name:"Builders",href:"/builders",icon:Pg,permission:{module:"builders",action:"read"}},{name:"Tasks",href:"/tasks",icon:tt,permission:null},{name:"Inbox",href:"/inbox",icon:Ae,permission:null,badge:a>0?a:void 0},{name:"Attendance",href:"/attendance",icon:pe,permission:null},{name:"Salary",href:"/salary",icon:ct,permission:{module:"salary",action:"read"}}],i=[];(r==null?void 0:r.role)==="field_collection_staff"&&i.push({name:"Collection Tasks",href:"/collection",icon:Is,permission:null}),(r==null?void 0:r.role)==="document_delivery_staff"&&i.push({name:"Delivery Tasks",href:"/delivery",icon:Ns,permission:null}),(r==null?void 0:r.role)==="data_entry_staff"&&i.push({name:"Data Entry Tasks",href:"/data-entry",icon:ox,permission:null}),((r==null?void 0:r.role)==="main_admin"||(r==null?void 0:r.role)==="staff_admin")&&i.push({name:"User Management",href:"/users",icon:bt,permission:{module:"users",action:"read"}}),(r==null?void 0:r.role)==="main_admin"&&i.push({name:"Settings",href:"/settings",icon:Cn,permission:null});const c=[...l,...i].filter(x=>x.permission?n(x.permission.module,x.permission.action):!0);return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-20 lg:hidden",onClick:s}),e.jsx("div",{className:Di("fixed inset-y-0 left-0 z-30 w-64 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0",t?"translate-x-0":"-translate-x-full"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-center h-16 px-4 bg-gradient-primary text-white",children:[e.jsx("div",{className:"mr-2",children:e.jsx(Po,{size:"md"})}),e.jsx("span",{className:"text-xl font-bold",children:"Om Services"})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:c.map(x=>{const u=x.icon;return e.jsxs(Vm,{to:x.href,className:({isActive:m})=>Di("flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors duration-200",m?"bg-orange-50 text-primary border-r-2 border-primary":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>window.innerWidth<1024&&s(),children:[e.jsx(u,{className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"flex-1",children:x.name}),x.badge&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full ml-2",children:x.badge})]},x.name)})}),e.jsx("div",{className:"px-4 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-primary font-medium text-sm",children:r==null?void 0:r.name.split(" ").map(x=>x[0]).join("")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:r==null?void 0:r.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:r==null?void 0:r.role.replace("_"," ").toUpperCase()})]})]})})]})})]})}function Vg({children:t}){const[s,r]=j.useState(!1);return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(Bg,{isOpen:s,onClose:()=>r(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden lg:ml-0",children:[e.jsx(Hg,{onMenuClick:()=>r(!0)}),e.jsx("main",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"p-6",children:t})})]})]})}function qg(){const{user:t,hasPermission:s}=ee(),{unreadCount:r}=Nr(),n=[{name:"Home",href:"/dashboard",icon:Ti,permission:null},{name:"Documents",href:"/documents",icon:Q,permission:{module:"documents",action:"read"}},{name:"Tasks",href:"/tasks",icon:tt,permission:null},{name:"Inbox",href:"/inbox",icon:Ae,permission:null,badge:r>0?r:void 0}],l=(()=>{switch(t==null?void 0:t.role){case"field_collection_staff":return{name:"Collection",href:"/collection",icon:Is,permission:null};case"document_delivery_staff":return{name:"Delivery",href:"/delivery",icon:Ns,permission:null};case"data_entry_staff":return{name:"Data Entry",href:"/data-entry",icon:ox,permission:null};case"challan_staff":return{name:"Challans",href:"/challans",icon:gt,permission:{module:"challans",action:"read"}};case"main_admin":case"staff_admin":return{name:"Users",href:"/users",icon:bt,permission:{module:"users",action:"read"}};default:return{name:"Payments",href:"/payments",icon:zt,permission:{module:"payments",action:"read"}}}})(),o=[...n.slice(0,3),l,n[3]].filter(c=>c.permission?s(c.permission.module,c.permission.action):!0);return e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-30",children:e.jsx("div",{className:"grid grid-cols-5 h-16",children:o.map(c=>{const x=c.icon;return e.jsxs(Vm,{to:c.href,className:({isActive:u})=>Di("flex flex-col items-center justify-center space-y-1 text-xs font-medium transition-colors relative",u?"text-primary bg-orange-50":"text-gray-500 hover:text-gray-700"),children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"w-5 h-5"}),c.badge&&e.jsx("span",{className:"absolute -top-2 -right-2 w-4 h-4 bg-red-500 rounded-full text-xs text-white flex items-center justify-center",children:c.badge>9?"9+":c.badge})]}),e.jsx("span",{className:"truncate",children:c.name})]},c.name)})})})}function Wg({title:t,icon:s,showSearch:r,onToggleSearch:n}){const{user:a}=ee(),{unreadCount:l}=Nr(),i=gs();jt();const o=()=>{const x=i.pathname;return["/documents","/payments","/challans","/customers","/builders","/tasks"].includes(x)},c=()=>{const x=i.pathname;console.log(`Create new item for ${x}`)};return e.jsxs("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-sm border border-gray-200",children:e.jsx(Po,{size:"lg"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:t}),e.jsx("p",{className:"text-xs text-gray-500",children:a==null?void 0:a.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:n,className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:e.jsx(Le,{className:"w-5 h-5"})}),e.jsxs("button",{className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors relative",children:[e.jsx(Ta,{className:"w-5 h-5"}),l>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-xs text-white flex items-center justify-center",children:l>9?"9+":l})]}),o()&&e.jsx("button",{onClick:c,className:"p-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:e.jsx(He,{className:"w-5 h-5"})})]})]}),r&&e.jsx("div",{className:"px-4 pb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:`Search ${t.toLowerCase()}...`,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0})]})})]})}function Yg({children:t}){ee(),Nr();const s=gs(),[r,n]=j.useState(!1),a=()=>{switch(s.pathname){case"/dashboard":return"Dashboard";case"/documents":return"Documents";case"/payments":return"Payments";case"/challans":return"Challans";case"/customers":return"Customers";case"/builders":return"Builders";case"/tasks":return"Tasks";case"/inbox":return"Inbox";case"/attendance":return"Attendance";case"/collection":return"Collection";case"/delivery":return"Delivery";case"/data-entry":return"Data Entry";case"/users":return"Users";case"/settings":return"Settings";default:return"Admin Panel"}},l=()=>{switch(s.pathname){case"/dashboard":return Ti;case"/documents":return Q;case"/payments":return zt;case"/challans":return gt;case"/customers":return bt;case"/builders":return bt;case"/tasks":return tt;case"/inbox":return Ae;case"/attendance":return pe;case"/collection":return Q;case"/delivery":return Q;case"/data-entry":return Q;case"/users":return bt;case"/settings":return Cn;default:return Ti}};return e.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[e.jsx(Wg,{title:a(),icon:l(),showSearch:r,onToggleSearch:()=>n(!r)}),e.jsx("main",{className:"flex-1 overflow-auto pb-20",children:e.jsx("div",{className:"p-4",children:t})}),e.jsx(qg,{})]})}function Gg({children:t}){const[s,r]=j.useState(!1);return j.useEffect(()=>{const n=()=>{r(window.innerWidth<768)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),s?e.jsx(Yg,{children:t}):e.jsx(Vg,{children:t})}function Xg(){const{isConnected:t,isLoading:s,error:r,reconnect:n}=Vt(),a=jt();return s?e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-blue-800 font-medium",children:"Connecting to database..."})]})}):t?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(te,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-900 font-medium",children:"Database Connected"}),e.jsx("p",{className:"text-green-800 text-sm",children:"Successfully connected to MySQL database. All changes will be saved."})]})]})}):e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-red-900 font-medium",children:"Database Connection Failed"}),e.jsx("p",{className:"text-red-800 text-sm mt-1",children:r||"Unable to connect to MySQL database. The application is running in demo mode with mock data."}),e.jsxs("div",{className:"flex items-center space-x-3 mt-3",children:[e.jsxs("button",{onClick:()=>a("/settings"),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(Cn,{className:"w-4 h-4 mr-1"}),"Configure Database"]}),e.jsxs("button",{onClick:n,className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(pn,{className:"w-4 h-4 mr-1"}),"Retry Connection"]})]})]})]})})}function we(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function _t(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function Qg(t,s){const r=we(t);return isNaN(s)?_t(t,NaN):(r.setDate(r.getDate()+s),r)}function xx(t,s){const r=we(t);if(isNaN(s))return _t(t,NaN);if(!s)return r;const n=r.getDate(),a=_t(t,r.getTime());a.setMonth(r.getMonth()+s+1,0);const l=a.getDate();return n>=l?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const hx=6048e5,Kg=864e5;let Jg={};function el(){return Jg}function gn(t,s){var o,c,x,u;const r=el(),n=(s==null?void 0:s.weekStartsOn)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(x=r.locale)==null?void 0:x.options)==null?void 0:u.weekStartsOn)??0,a=we(t),l=a.getDay(),i=(l<n?7:0)+l-n;return a.setDate(a.getDate()-i),a.setHours(0,0,0,0),a}function Da(t){return gn(t,{weekStartsOn:1})}function px(t){const s=we(t),r=s.getFullYear(),n=_t(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Da(n),l=_t(t,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const i=Da(l);return s.getTime()>=a.getTime()?r+1:s.getTime()>=i.getTime()?r:r-1}function Aa(t){const s=we(t);return s.setHours(0,0,0,0),s}function rd(t){const s=we(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function gx(t,s){const r=Aa(t),n=Aa(s),a=+r-rd(r),l=+n-rd(n);return Math.round((a-l)/Kg)}function Zg(t){const s=px(t),r=_t(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),Da(r)}function Tl(t,s){const r=Aa(t),n=Aa(s);return+r==+n}function ef(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function tf(t){if(!ef(t)&&typeof t!="number")return!1;const s=we(t);return!isNaN(Number(s))}function sf(t,s){const r=we(t),n=we(s),a=nd(r,n),l=Math.abs(gx(r,n));r.setDate(r.getDate()-a*l);const i=+(nd(r,n)===-a),o=a*(l-i);return o===0?0:o}function nd(t,s){const r=t.getFullYear()-s.getFullYear()||t.getMonth()-s.getMonth()||t.getDate()-s.getDate()||t.getHours()-s.getHours()||t.getMinutes()-s.getMinutes()||t.getSeconds()-s.getSeconds()||t.getMilliseconds()-s.getMilliseconds();return r<0?-1:r>0?1:r}function Ai(t){const s=we(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function rf(t,s){const r=we(t.start),n=we(t.end);let a=+r>+n;const l=a?+r:+n,i=a?n:r;i.setHours(0,0,0,0);let o=1;const c=[];for(;+i<=l;)c.push(we(i)),i.setDate(i.getDate()+o),i.setHours(0,0,0,0);return a?c.reverse():c}function Pi(t){const s=we(t);return s.setDate(1),s.setHours(0,0,0,0),s}function nf(t){const s=we(t),r=_t(t,0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}const af={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lf=(t,s,r)=>{let n;const a=af[t];return typeof a=="string"?n=a:s===1?n=a.one:n=a.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function _l(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const of={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cf={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},df={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uf={date:_l({formats:of,defaultWidth:"full"}),time:_l({formats:cf,defaultWidth:"full"}),dateTime:_l({formats:df,defaultWidth:"full"})},mf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},xf=(t,s,r,n)=>mf[t];function Ir(t){return(s,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=t.formattingValues[o]||t.formattingValues[i]}else{const i=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[o]||t.values[i]}const l=t.argumentCallback?t.argumentCallback(s):s;return a[l]}}const hf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pf={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ff={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vf=(t,s)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},jf={ordinalNumber:vf,era:Ir({values:hf,defaultWidth:"wide"}),quarter:Ir({values:pf,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ir({values:gf,defaultWidth:"wide"}),day:Ir({values:ff,defaultWidth:"wide"}),dayPeriod:Ir({values:yf,defaultWidth:"wide",formattingValues:bf,defaultFormattingWidth:"wide"})};function Lr(t){return(s,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],l=s.match(a);if(!l)return null;const i=l[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?wf(o,m=>m.test(i)):Nf(o,m=>m.test(i));let x;x=t.valueCallback?t.valueCallback(c):c,x=r.valueCallback?r.valueCallback(x):x;const u=s.slice(i.length);return{value:x,rest:u}}}function Nf(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function wf(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function Cf(t){return(s,r={})=>{const n=s.match(t.matchPattern);if(!n)return null;const a=n[0],l=s.match(t.parsePattern);if(!l)return null;let i=t.valueCallback?t.valueCallback(l[0]):l[0];i=r.valueCallback?r.valueCallback(i):i;const o=s.slice(a.length);return{value:i,rest:o}}}const Sf=/^(\d+)(th|st|nd|rd)?/i,Ef=/\d+/i,kf={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Tf={any:[/^b/i,/^(a|c)/i]},_f={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Df={any:[/1/i,/2/i,/3/i,/4/i]},Af={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pf={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mf={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},If={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Lf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Rf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Of={ordinalNumber:Cf({matchPattern:Sf,parsePattern:Ef,valueCallback:t=>parseInt(t,10)}),era:Lr({matchPatterns:kf,defaultMatchWidth:"wide",parsePatterns:Tf,defaultParseWidth:"any"}),quarter:Lr({matchPatterns:_f,defaultMatchWidth:"wide",parsePatterns:Df,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Lr({matchPatterns:Af,defaultMatchWidth:"wide",parsePatterns:Pf,defaultParseWidth:"any"}),day:Lr({matchPatterns:Mf,defaultMatchWidth:"wide",parsePatterns:If,defaultParseWidth:"any"}),dayPeriod:Lr({matchPatterns:Lf,defaultMatchWidth:"any",parsePatterns:Rf,defaultParseWidth:"any"})},Uf={code:"en-US",formatDistance:lf,formatLong:uf,formatRelative:xf,localize:jf,match:Of,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ff(t){const s=we(t);return gx(s,nf(s))+1}function zf(t){const s=we(t),r=+Da(s)-+Zg(s);return Math.round(r/hx)+1}function fx(t,s){var u,m,f,h;const r=we(t),n=r.getFullYear(),a=el(),l=(s==null?void 0:s.firstWeekContainsDate)??((m=(u=s==null?void 0:s.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((h=(f=a.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=_t(t,0);i.setFullYear(n+1,0,l),i.setHours(0,0,0,0);const o=gn(i,s),c=_t(t,0);c.setFullYear(n,0,l),c.setHours(0,0,0,0);const x=gn(c,s);return r.getTime()>=o.getTime()?n+1:r.getTime()>=x.getTime()?n:n-1}function $f(t,s){var o,c,x,u;const r=el(),n=(s==null?void 0:s.firstWeekContainsDate)??((c=(o=s==null?void 0:s.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(x=r.locale)==null?void 0:x.options)==null?void 0:u.firstWeekContainsDate)??1,a=fx(t,s),l=_t(t,0);return l.setFullYear(a,0,n),l.setHours(0,0,0,0),gn(l,s)}function Hf(t,s){const r=we(t),n=+gn(r,s)-+$f(r,s);return Math.round(n/hx)+1}function se(t,s){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(s,"0");return r+n}const Yt={y(t,s){const r=t.getFullYear(),n=r>0?r:1-r;return se(s==="yy"?n%100:n,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):se(r+1,2)},d(t,s){return se(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return se(t.getHours()%12||12,s.length)},H(t,s){return se(t.getHours(),s.length)},m(t,s){return se(t.getMinutes(),s.length)},s(t,s){return se(t.getSeconds(),s.length)},S(t,s){const r=s.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return se(a,s.length)}},Fs={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ad={G:function(t,s,r){const n=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Yt.y(t,s)},Y:function(t,s,r,n){const a=fx(t,n),l=a>0?a:1-a;if(s==="YY"){const i=l%100;return se(i,2)}return s==="Yo"?r.ordinalNumber(l,{unit:"year"}):se(l,s.length)},R:function(t,s){const r=px(t);return se(r,s.length)},u:function(t,s){const r=t.getFullYear();return se(r,s.length)},Q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(n);case"QQ":return se(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,s,r){const n=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(n);case"qq":return se(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,s,r){const n=t.getMonth();switch(s){case"M":case"MM":return Yt.M(t,s);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,s,r){const n=t.getMonth();switch(s){case"L":return String(n+1);case"LL":return se(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,s,r,n){const a=Hf(t,n);return s==="wo"?r.ordinalNumber(a,{unit:"week"}):se(a,s.length)},I:function(t,s,r){const n=zf(t);return s==="Io"?r.ordinalNumber(n,{unit:"week"}):se(n,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Yt.d(t,s)},D:function(t,s,r){const n=Ff(t);return s==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):se(n,s.length)},E:function(t,s,r){const n=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,s,r,n){const a=t.getDay(),l=(a-n.weekStartsOn+8)%7||7;switch(s){case"e":return String(l);case"ee":return se(l,2);case"eo":return r.ordinalNumber(l,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,s,r,n){const a=t.getDay(),l=(a-n.weekStartsOn+8)%7||7;switch(s){case"c":return String(l);case"cc":return se(l,s.length);case"co":return r.ordinalNumber(l,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,s,r){const n=t.getDay(),a=n===0?7:n;switch(s){case"i":return String(a);case"ii":return se(a,s.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,s,r){const a=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,s,r){const n=t.getHours();let a;switch(n===12?a=Fs.noon:n===0?a=Fs.midnight:a=n/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,s,r){const n=t.getHours();let a;switch(n>=17?a=Fs.evening:n>=12?a=Fs.afternoon:n>=4?a=Fs.morning:a=Fs.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Yt.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Yt.H(t,s)},K:function(t,s,r){const n=t.getHours()%12;return s==="Ko"?r.ordinalNumber(n,{unit:"hour"}):se(n,s.length)},k:function(t,s,r){let n=t.getHours();return n===0&&(n=24),s==="ko"?r.ordinalNumber(n,{unit:"hour"}):se(n,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Yt.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Yt.s(t,s)},S:function(t,s){return Yt.S(t,s)},X:function(t,s,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(s){case"X":return id(n);case"XXXX":case"XX":return js(n);case"XXXXX":case"XXX":default:return js(n,":")}},x:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"x":return id(n);case"xxxx":case"xx":return js(n);case"xxxxx":case"xxx":default:return js(n,":")}},O:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+ld(n,":");case"OOOO":default:return"GMT"+js(n,":")}},z:function(t,s,r){const n=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+ld(n,":");case"zzzz":default:return"GMT"+js(n,":")}},t:function(t,s,r){const n=Math.trunc(t.getTime()/1e3);return se(n,s.length)},T:function(t,s,r){const n=t.getTime();return se(n,s.length)}};function ld(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),l=n%60;return l===0?r+String(a):r+String(a)+s+se(l,2)}function id(t,s){return t%60===0?(t>0?"-":"+")+se(Math.abs(t)/60,2):js(t,s)}function js(t,s=""){const r=t>0?"-":"+",n=Math.abs(t),a=se(Math.trunc(n/60),2),l=se(n%60,2);return r+a+s+l}const od=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},yx=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},Bf=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return od(t,s);let l;switch(n){case"P":l=s.dateTime({width:"short"});break;case"PP":l=s.dateTime({width:"medium"});break;case"PPP":l=s.dateTime({width:"long"});break;case"PPPP":default:l=s.dateTime({width:"full"});break}return l.replace("{{date}}",od(n,s)).replace("{{time}}",yx(a,s))},Vf={p:yx,P:Bf},qf=/^D+$/,Wf=/^Y+$/,Yf=["D","DD","YY","YYYY"];function Gf(t){return qf.test(t)}function Xf(t){return Wf.test(t)}function Qf(t,s,r){const n=Kf(t,s,r);if(console.warn(n),Yf.includes(t))throw new RangeError(n)}function Kf(t,s,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Jf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Zf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ey=/^'([^]*?)'?$/,ty=/''/g,sy=/[a-zA-Z]/;function G(t,s,r){var u,m,f,h;const n=el(),a=n.locale??Uf,l=n.firstWeekContainsDate??((m=(u=n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,i=n.weekStartsOn??((h=(f=n.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??0,o=we(t);if(!tf(o))throw new RangeError("Invalid time value");let c=s.match(Zf).map(g=>{const b=g[0];if(b==="p"||b==="P"){const v=Vf[b];return v(g,a.formatLong)}return g}).join("").match(Jf).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const b=g[0];if(b==="'")return{isToken:!1,value:ry(g)};if(ad[b])return{isToken:!0,value:g};if(b.match(sy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(c=a.localize.preprocessor(o,c));const x={firstWeekContainsDate:l,weekStartsOn:i,locale:a};return c.map(g=>{if(!g.isToken)return g.value;const b=g.value;(Xf(b)||Gf(b))&&Qf(b,s,String(t));const v=ad[b[0]];return v(o,b,a.localize,x)}).join("")}function ry(t){const s=t.match(ey);return s?s[1].replace(ty,"'"):t}function ny(t,s){return Qg(t,-s)}function ay(t,s){return xx(t,-s)}function ly({stats:t}){return e.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.map((s,r)=>{const n=s.icon;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`${s.color} p-2 rounded-lg`,children:e.jsx(n,{className:"w-4 h-4 text-white"})}),s.change&&e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${s.changeType==="positive"?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:s.change})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-900 mb-1",children:s.value}),e.jsx("p",{className:"text-xs text-gray-600 leading-tight",children:s.title})]})]},r)})})}function Dl({children:t,onClick:s,className:r="",showArrow:n=!1}){const a="bg-white rounded-xl shadow-sm border border-gray-200 p-4 transition-all duration-200",l=s?"active:scale-95 active:bg-gray-50":"";return e.jsx("div",{className:`${a} ${l} ${r}`,onClick:s,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:t}),n&&e.jsx(Do,{className:"w-5 h-5 text-gray-400 ml-3"})]})})}function Mo({title:t,subtitle:s,description:r,icon:n,badge:a,badgeColor:l="bg-blue-100 text-blue-800",onClick:i,onMenuClick:o,actions:c,avatar:x}){return e.jsx("div",{className:`bg-white rounded-xl shadow-sm border border-gray-200 p-4 ${i?"active:scale-95 active:bg-gray-50 transition-all duration-200":""}`,onClick:i,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[x||n&&e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(n,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:t}),s&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s}),r&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:r})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-3",children:[a&&e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${l}`,children:a}),c||e.jsxs("div",{className:"flex items-center space-x-1",children:[o&&e.jsx("button",{onClick:u=>{u.stopPropagation(),o()},className:"p-1 rounded text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors",children:e.jsx(Ao,{className:"w-4 h-4"})}),i&&e.jsx(Do,{className:"w-4 h-4 text-gray-400"})]})]})]})})]})})}function iy(){const t=jt(),{user:s}=ee(),{documents:r}=Nt(),{payments:n}=Nn(),a=()=>{const m=r.length,f=r.filter(b=>b.status==="pending_collection").length,h=r.filter(b=>["collected","data_entry_pending","data_entry_completed","registration_pending"].includes(b.status)).length,g=r.filter(b=>b.status==="delivered").length;return{totalDocuments:m,pendingCollection:f,inProgress:h,completed:g}},l=()=>{const m=n.reduce((h,g)=>h+g.totalAmount,0),f=n.reduce((h,g)=>h+g.pendingAmount,0);return{totalPayments:m,pendingPayments:f}},i=a(),o=l(),c=[{title:"Total Documents",value:i.totalDocuments,icon:Q,color:"bg-blue-500",change:"+12%",changeType:"positive"},{title:"Pending Collection",value:i.pendingCollection,icon:pe,color:"bg-orange-500",change:"-5%",changeType:"positive"},{title:"In Progress",value:i.inProgress,icon:ne,color:"bg-yellow-500",change:"+8%",changeType:"negative"},{title:"Completed",value:i.completed,icon:te,color:"bg-green-500",change:"+15%",changeType:"positive"}],x=[{title:"New Document",subtitle:"Create document record",icon:Q,action:()=>t("/documents"),color:"from-blue-500 to-blue-600"},{title:"View Tasks",subtitle:"Check assigned tasks",icon:tt,action:()=>t("/tasks"),color:"from-green-500 to-green-600"},{title:"Check Inbox",subtitle:"View messages",icon:bt,action:()=>t("/inbox"),color:"from-purple-500 to-purple-600"},{title:"Attendance",subtitle:"Clock in/out",icon:pe,action:()=>t("/attendance"),color:"from-orange-500 to-orange-600"}],u=r.slice(0,3);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Dl,{className:"bg-gradient-primary text-white border-0",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold mb-1",children:["Welcome back, ",s==null?void 0:s.name,"!"]}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Here's your dashboard overview"})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Overview"}),e.jsx(ly,{stats:c})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.map((m,f)=>{const h=m.icon;return e.jsx(Dl,{onClick:m.action,className:`bg-gradient-to-br ${m.color} text-white border-0`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 mb-2 inline-flex",children:e.jsx(h,{className:"w-5 h-5"})}),e.jsx("h4",{className:"font-semibold text-sm",children:m.title}),e.jsx("p",{className:"text-xs opacity-90",children:m.subtitle})]})},f)})})]}),u.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Documents"}),e.jsxs("button",{onClick:()=>t("/documents"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center",children:["View All",e.jsx(Tg,{className:"w-4 h-4 ml-1"})]})]}),e.jsx("div",{className:"space-y-3",children:u.map(m=>e.jsx(Mo,{title:m.documentNumber,subtitle:m.customerName,description:m.propertyDetails,icon:Q,badge:m.status.replace("_"," ").toUpperCase(),badgeColor:m.status==="delivered"?"bg-green-100 text-green-800":m.status==="pending_collection"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800",onClick:()=>t(`/documents/${m.id}`)},m.id))})]}),e.jsx(Dl,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsxs("span",{className:"font-medium",children:["",(o.totalPayments/1e5).toFixed(1),"L"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Pending:"}),e.jsxs("span",{className:"font-medium text-orange-600",children:["",(o.pendingPayments/1e5).toFixed(1),"L"]})]})]})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(ct,{className:"w-6 h-6 text-green-600"})})]})})]})}function oy(){const[t,s]=Lt.useState(!1);return Lt.useEffect(()=>{const r=()=>{s(window.innerWidth<768)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t}const cy=[];function dy(){const{user:t}=ee(),{documents:s}=Nt(),{payments:r}=Nn();if(Ka(),oy())return e.jsx(iy,{});const a=()=>{const u=s.length,m=s.filter(g=>g.status==="pending_collection").length,f=s.filter(g=>["collected","data_entry_pending","data_entry_completed","registration_pending"].includes(g.status)).length,h=s.filter(g=>g.status==="delivered").length;return{totalDocuments:u,pendingCollection:m,inProgress:f,completed:h}},l=()=>{const u=r.reduce((f,h)=>f+h.totalAmount,0),m=r.reduce((f,h)=>f+h.pendingAmount,0);return{totalPayments:u,pendingPayments:m}},i=a(),o=l(),c=[{title:"Total Documents",value:i.totalDocuments.toLocaleString(),icon:Q,color:"bg-blue-500",change:"+12%",changeType:"positive"},{title:"Pending Collection",value:i.pendingCollection.toString(),icon:pe,color:"bg-yellow-500",change:"-5%",changeType:"positive"},{title:"In Progress",value:i.inProgress.toString(),icon:ne,color:"bg-orange-500",change:"+8%",changeType:"negative"},{title:"Completed",value:i.completed.toLocaleString(),icon:te,color:"bg-green-500",change:"+15%",changeType:"positive"}],x=[{title:"Total Payments",value:`${(o.totalPayments/1e5).toFixed(1)}L`,icon:ct,color:"bg-emerald-500",change:"+22%",changeType:"positive"},{title:"Pending Payments",value:`${(o.pendingPayments/1e5).toFixed(1)}L`,icon:zt,color:"bg-red-500",change:"-10%",changeType:"positive"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Xg,{}),e.jsxs("div",{className:"bg-gradient-primary rounded-xl p-6 text-white",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome back, ",t==null?void 0:t.name,"!"]}),e.jsx("p",{className:"text-orange-100",children:"Here's what's happening with your documents and payments today."})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map((u,m)=>{const f=u.icon;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${u.color} p-3 rounded-lg`,children:e.jsx(f,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${u.changeType==="positive"?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:u.change})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:u.value}),e.jsx("p",{className:"text-gray-600 text-sm",children:u.title})]},m)})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:x.map((u,m)=>{const f=u.icon;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`${u.color} p-3 rounded-lg`,children:e.jsx(f,{className:"w-6 h-6 text-white"})}),e.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${u.changeType==="positive"?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:u.change})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:u.value}),e.jsx("p",{className:"text-gray-600 text-sm",children:u.title})]},m)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:cy.map(u=>e.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ux,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:u.action}),e.jsx("span",{className:"text-xs text-gray-500",children:G(u.timestamp,"MMM dd, HH:mm")})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u.details}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",u.userName,"  Document ID: ",u.documentId]})]})]},u.id))})})]})]})}function cd({isOpen:t,onClose:s}){const{createDocument:r,loading:n}=Nt(),{customers:a}=vr(),{builders:l}=jr(),[i,o]=j.useState({customerName:"",customerPhone:"",customerEmail:"",builderName:"",propertyDetails:"",documentType:"agreement",assignedTo:""}),[c,x]=j.useState({}),[u,m]=j.useState(!1),[f,h]=j.useState(!1),[g,b]=j.useState([]),[v,d]=j.useState([]),y=()=>{const w={};return i.customerName.trim()||(w.customerName="Customer name is required"),i.customerPhone.trim()||(w.customerPhone="Phone number is required"),i.builderName.trim()||(w.builderName="Builder name is required"),i.propertyDetails.trim()||(w.propertyDetails="Property details are required"),x(w),Object.keys(w).length===0},p=w=>{if(o({...i,customerName:w}),w.length>=3){const D=a.filter(A=>A.name.toLowerCase().includes(w.toLowerCase()));b(D),m(D.length>0)}else m(!1),b([])},C=w=>{if(o({...i,builderName:w}),w.length>=3){const D=l.filter(A=>A.name.toLowerCase().includes(w.toLowerCase()));d(D),h(D.length>0)}else h(!1),d([])},k=w=>{o({...i,customerName:w.name,customerPhone:w.phone,customerEmail:w.email||""}),m(!1),b([])},N=w=>{o({...i,builderName:w.name}),h(!1),d([])},S=async w=>{if(w.preventDefault(),!!y())try{await r(i),s(),o({customerName:"",customerPhone:"",customerEmail:"",builderName:"",propertyDetails:"",documentType:"agreement",assignedTo:""}),x({})}catch(D){console.error("Error creating document:",D)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Q,{className:"w-5 h-5 mr-2 text-orange-600"}),"Create New Document"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2 text-green-600"}),"Customer Information"]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i.customerName,onChange:w=>p(w.target.value),onFocus:()=>{i.customerName.length>=3&&g.length>0&&m(!0)},onBlur:()=>{setTimeout(()=>m(!1),200)},className:`w-full p-3 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.customerName?"border-red-300":"border-gray-300"}`,placeholder:"Type customer name (3+ letters for suggestions)"}),i.customerName.length>=3&&e.jsx(Kc,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),u&&g.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:g.map(w=>e.jsx("div",{onClick:()=>k(w),className:"p-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.name}),e.jsx("p",{className:"text-sm text-gray-500",children:w.phone}),w.email&&e.jsx("p",{className:"text-xs text-gray-400",children:w.email})]})]})},w.id))}),c.customerName&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:i.customerPhone,onChange:w=>o({...i,customerPhone:w.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.customerPhone?"border-red-300":"border-gray-300"}`,placeholder:"Enter phone number"}),c.customerPhone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.customerPhone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:i.customerEmail,onChange:w=>o({...i,customerEmail:w.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(ve,{className:"w-4 h-4 mr-2 text-purple-600"}),"Document Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type *"}),e.jsxs("select",{value:i.documentType,onChange:w=>o({...i,documentType:w.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"agreement",children:"Agreement"}),e.jsx("option",{value:"lease_deed",children:"Lease Deed"}),e.jsx("option",{value:"sale_deed",children:"Sale Deed"}),e.jsx("option",{value:"mutation",children:"Mutation"}),e.jsx("option",{value:"partition_deed",children:"Partition Deed"}),e.jsx("option",{value:"gift_deed",children:"Gift Deed"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Builder Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i.builderName,onChange:w=>C(w.target.value),onFocus:()=>{i.builderName.length>=3&&v.length>0&&h(!0)},onBlur:()=>{setTimeout(()=>h(!1),200)},className:`w-full p-3 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.builderName?"border-red-300":"border-gray-300"}`,placeholder:"Type builder name (3+ letters for suggestions)"}),i.builderName.length>=3&&e.jsx(Kc,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),f&&v.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:v.map(w=>e.jsx("div",{onClick:()=>N(w),className:"p-3 hover:bg-purple-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(ve,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.name}),e.jsx("p",{className:"text-sm text-gray-500",children:w.contactPerson}),e.jsx("p",{className:"text-xs text-gray-400",children:w.phone})]})]})},w.id))}),c.builderName&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.builderName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned To"}),e.jsx("input",{type:"text",value:i.assignedTo,onChange:w=>o({...i,assignedTo:w.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Assign to staff member"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2 text-orange-600"}),"Property Details *"]}),e.jsx("textarea",{value:i.propertyDetails,onChange:w=>o({...i,propertyDetails:w.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${c.propertyDetails?"border-red-300":"border-gray-300"}`,rows:3,placeholder:"Enter complete property details including address, plot number, etc."}),c.propertyDetails&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.propertyDetails})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(X,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"Smart Auto-Complete"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("p",{children:" Type 3+ letters in Customer or Builder name fields to see suggestions"}),e.jsx("p",{children:" Select from existing records to auto-fill contact details"}),e.jsx("p",{children:" New customers and builders are automatically created if not found"})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"bg-gradient-primary hover:opacity-90 disabled:opacity-50 text-white px-6 py-2 rounded-lg font-medium transition-all duration-300 flex items-center shadow-lg hover:shadow-xl",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Create Document"]})})]})]})]})}):null}function dd({isOpen:t,onClose:s,document:r}){const{updateDocument:n,loading:a}=Nt(),[l,i]=j.useState({customerName:"",customerPhone:"",customerEmail:"",builderName:"",propertyDetails:"",documentType:"agreement",status:"pending_collection",assignedTo:""}),[o,c]=j.useState({});j.useEffect(()=>{r&&i({customerName:r.customerName,customerPhone:r.customerPhone,customerEmail:r.customerEmail||"",builderName:r.builderName,propertyDetails:r.propertyDetails,documentType:r.documentType,status:r.status,assignedTo:r.assignedTo||""})},[r]);const x=()=>{const m={};return l.customerName.trim()||(m.customerName="Customer name is required"),l.customerPhone.trim()||(m.customerPhone="Phone number is required"),l.builderName.trim()||(m.builderName="Builder name is required"),l.propertyDetails.trim()||(m.propertyDetails="Property details are required"),c(m),Object.keys(m).length===0},u=async m=>{if(m.preventDefault(),!!x())try{await n(r.id,{customerName:l.customerName,customerPhone:l.customerPhone,customerEmail:l.customerEmail||void 0,builderName:l.builderName,propertyDetails:l.propertyDetails,documentType:l.documentType,status:l.status,assignedTo:l.assignedTo||void 0}),s(),c({})}catch(f){console.error("Error updating document:",f)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Q,{className:"w-5 h-5 mr-2 text-blue-600"}),"Edit Document - ",r.documentNumber]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2 text-green-600"}),"Customer Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name *"}),e.jsx("input",{type:"text",value:l.customerName,onChange:m=>i({...l,customerName:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.customerName?"border-red-300":"border-gray-300"}`,placeholder:"Enter customer name"}),o.customerName&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:l.customerPhone,onChange:m=>i({...l,customerPhone:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.customerPhone?"border-red-300":"border-gray-300"}`,placeholder:"Enter phone number"}),o.customerPhone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.customerPhone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:l.customerEmail,onChange:m=>i({...l,customerEmail:m.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(ve,{className:"w-4 h-4 mr-2 text-purple-600"}),"Document Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type *"}),e.jsxs("select",{value:l.documentType,onChange:m=>i({...l,documentType:m.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"agreement",children:"Agreement"}),e.jsx("option",{value:"lease_deed",children:"Lease Deed"}),e.jsx("option",{value:"sale_deed",children:"Sale Deed"}),e.jsx("option",{value:"mutation",children:"Mutation"}),e.jsx("option",{value:"partition_deed",children:"Partition Deed"}),e.jsx("option",{value:"gift_deed",children:"Gift Deed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),e.jsxs("select",{value:l.status,onChange:m=>i({...l,status:m.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"pending_collection",children:"Pending Collection"}),e.jsx("option",{value:"collected",children:"Collected"}),e.jsx("option",{value:"data_entry_pending",children:"Data Entry Pending"}),e.jsx("option",{value:"data_entry_completed",children:"Data Entry Completed"}),e.jsx("option",{value:"registration_pending",children:"Registration Pending"}),e.jsx("option",{value:"registered",children:"Registered"}),e.jsx("option",{value:"ready_for_delivery",children:"Ready for Delivery"}),e.jsx("option",{value:"delivered",children:"Delivered"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Builder Name *"}),e.jsx("input",{type:"text",value:l.builderName,onChange:m=>i({...l,builderName:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.builderName?"border-red-300":"border-gray-300"}`,placeholder:"Enter builder name"}),o.builderName&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.builderName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned To"}),e.jsx("input",{type:"text",value:l.assignedTo,onChange:m=>i({...l,assignedTo:m.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Assign to staff member"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2 text-orange-600"}),"Property Details *"]}),e.jsx("textarea",{value:l.propertyDetails,onChange:m=>i({...l,propertyDetails:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${o.propertyDetails?"border-red-300":"border-gray-300"}`,rows:3,placeholder:"Enter complete property details including address, plot number, etc."}),o.propertyDetails&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.propertyDetails})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Update Document"]})})]})]})]})}):null}const uy={pending_collection:"bg-orange-100 text-orange-800",collected:"bg-blue-100 text-blue-800",data_entry_pending:"bg-yellow-100 text-yellow-800",data_entry_completed:"bg-indigo-100 text-indigo-800",registration_pending:"bg-purple-100 text-purple-800",registered:"bg-green-100 text-green-800",ready_for_delivery:"bg-orange-100 text-orange-800",delivered:"bg-emerald-100 text-emerald-800"};function my(){const t=jt(),{documents:s,loading:r}=Nt(),[n,a]=j.useState(""),[l,i]=j.useState("all"),[o,c]=j.useState(!1),x=s.filter(u=>{const m=u.documentNumber.toLowerCase().includes(n.toLowerCase())||u.customerName.toLowerCase().includes(n.toLowerCase())||u.builderName.toLowerCase().includes(n.toLowerCase()),f=l==="all"||u.status===l;return m&&f});return r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search documents...",value:n,onChange:u=>a(u.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("button",{onClick:()=>c(!o),className:"flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx(Cr,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]}),o&&e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("select",{value:l,onChange:u=>i(u.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending_collection",children:"Pending Collection"}),e.jsx("option",{value:"collected",children:"Collected"}),e.jsx("option",{value:"data_entry_pending",children:"Data Entry Pending"}),e.jsx("option",{value:"data_entry_completed",children:"Data Entry Completed"}),e.jsx("option",{value:"registration_pending",children:"Registration Pending"}),e.jsx("option",{value:"registered",children:"Registered"}),e.jsx("option",{value:"ready_for_delivery",children:"Ready for Delivery"}),e.jsx("option",{value:"delivered",children:"Delivered"})]})}),e.jsx("div",{className:"space-y-3",children:x.map(u=>e.jsx(Mo,{title:u.documentNumber,subtitle:`${u.customerName}  ${u.customerPhone}`,description:`${u.builderName}  ${u.propertyDetails}`,icon:Q,badge:u.status.replace("_"," ").toUpperCase(),badgeColor:uy[u.status],onClick:()=>t(`/documents/${u.id}`),avatar:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-white"})})},u.id))}),x.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:n||l!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first document"})]})]})}function xy(){const[t,s]=Lt.useState(!1);return Lt.useEffect(()=>{const r=()=>{s(window.innerWidth<768)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t}const hy={pending_collection:"bg-gray-100 text-gray-800",collected:"bg-blue-100 text-blue-800",data_entry_pending:"bg-yellow-100 text-yellow-800",data_entry_completed:"bg-indigo-100 text-indigo-800",registration_pending:"bg-purple-100 text-purple-800",registered:"bg-green-100 text-green-800",ready_for_delivery:"bg-orange-100 text-orange-800",delivered:"bg-emerald-100 text-emerald-800"};function py(){const t=jt(),{hasPermission:s}=ee(),{documents:r,loading:n}=Nt(),[a,l]=j.useState(""),[i,o]=j.useState("all"),[c,x]=j.useState(!1),[u,m]=j.useState(!1),[f,h]=j.useState(null);if(xy())return e.jsxs("div",{className:"space-y-6",children:[e.jsx(my,{}),e.jsx(cd,{isOpen:c,onClose:()=>x(!1)}),f&&e.jsx(dd,{isOpen:u,onClose:()=>{m(!1),h(null)},document:f})]});const b=r.filter(k=>{const N=k.documentNumber.toLowerCase().includes(a.toLowerCase())||k.customerName.toLowerCase().includes(a.toLowerCase())||k.builderName.toLowerCase().includes(a.toLowerCase()),S=i==="all"||k.status===i;return N&&S}),v=s("documents","create"),d=s("documents","update"),y=k=>{t(`/documents/${k}`)},p=k=>{h(k),m(!0)},C=k=>{console.log("Downloading document:",k)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Documents"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all your documents and track their progress"})]}),v&&e.jsxs("button",{onClick:()=>x(!0),className:"mt-4 sm:mt-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"New Document"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Documents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Collection"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(k=>k.status==="pending_collection").length})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(fe,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(k=>["collected","data_entry_pending","data_entry_completed","registration_pending"].includes(k.status)).length})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:e.jsx(Ye,{className:"w-6 h-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(k=>k.status==="delivered").length})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-green-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by document number, customer name, or builder...",value:a,onChange:k=>l(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Cr,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:i,onChange:k=>o(k.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending_collection",children:"Pending Collection"}),e.jsx("option",{value:"collected",children:"Collected"}),e.jsx("option",{value:"data_entry_pending",children:"Data Entry Pending"}),e.jsx("option",{value:"data_entry_completed",children:"Data Entry Completed"}),e.jsx("option",{value:"registration_pending",children:"Registration Pending"}),e.jsx("option",{value:"registered",children:"Registered"}),e.jsx("option",{value:"ready_for_delivery",children:"Ready for Delivery"}),e.jsx("option",{value:"delivered",children:"Delivered"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Document"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Customer"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Builder"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Created"}),e.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:b.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:k.documentNumber}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:k.documentType.replace("_"," ")})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:k.customerName}),e.jsx("p",{className:"text-sm text-gray-500",children:k.customerPhone})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ve,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:k.builderName}),e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:k.propertyDetails})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${hy[k.status]}`,children:k.status.replace("_"," ").toUpperCase()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:G(k.createdAt,"MMM dd, yyyy")})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>y(k.id),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Document",children:e.jsx(Ee,{className:"w-4 h-4"})}),d&&e.jsx("button",{onClick:()=>p(k),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Document",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(k.id),className:"p-2 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Download Document",children:e.jsx(Ms,{className:"w-4 h-4"})})]})})]},k.id))})]})}),!n&&b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents found"}),e.jsx("p",{className:"text-gray-500",children:a||i!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first document"})]})]}),e.jsx(cd,{isOpen:c,onClose:()=>x(!1)}),f&&e.jsx(dd,{isOpen:u,onClose:()=>{m(!1),h(null)},document:f})]})}const gy=[],fy={pending_collection:"bg-gray-100 text-gray-800 border-gray-300",collected:"bg-blue-100 text-blue-800 border-blue-300",data_entry_pending:"bg-yellow-100 text-yellow-800 border-yellow-300",data_entry_completed:"bg-indigo-100 text-indigo-800 border-indigo-300",registration_pending:"bg-purple-100 text-purple-800 border-purple-300",registered:"bg-green-100 text-green-800 border-green-300",ready_for_delivery:"bg-orange-100 text-orange-800 border-orange-300",delivered:"bg-emerald-100 text-emerald-800 border-emerald-300"};function yy(){const{id:t}=zm(),s=jt(),{user:r,hasPermission:n}=ee(),{getDocument:a,updateDocument:l,addNote:i}=Nt(),[o,c]=j.useState(a(t)),[x]=j.useState(gy),[u,m]=j.useState(!1),[f,h]=j.useState(""),[g,b]=j.useState(!1);j.useEffect(()=>{if(t){const N=a(t);c(N)}},[t,a]);const v=n("documents","update"),d=n("documents","read");if(!o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Document not found"}),e.jsx("p",{className:"text-gray-500",children:"The requested document could not be found."}),e.jsx("button",{onClick:()=>s("/documents"),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Back to Documents"})]})});const y=async()=>{if(f.trim())try{await i(o.id,f.trim()),c(N=>N?{...N,notes:[...N.notes,f.trim()],updatedAt:new Date}:null),h(""),b(!1)}catch(N){console.error("Error adding note:",N)}},p=N=>e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full border ${fy[N]}`,children:N.replace("_"," ").toUpperCase()}),C=[{status:"pending_collection",label:"Pending Collection",description:"Waiting for field collection"},{status:"collected",label:"Collected",description:"Documents collected from field"},{status:"data_entry_pending",label:"Data Entry Pending",description:"Awaiting data entry"},{status:"data_entry_completed",label:"Data Entry Completed",description:"Data entry completed"},{status:"registration_pending",label:"Registration Pending",description:"Awaiting registration"},{status:"registered",label:"Registered",description:"Document registered successfully"},{status:"ready_for_delivery",label:"Ready for Delivery",description:"Ready for delivery to client"},{status:"delivered",label:"Delivered",description:"Document delivered to client"}],k=C.findIndex(N=>N.status===o.status);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s("/documents"),className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:e.jsx(rx,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.documentNumber}),e.jsxs("p",{className:"text-gray-600 capitalize",children:[o.documentType.replace("_"," ")," Document"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[p(o.status),v&&e.jsxs("button",{onClick:()=>m(!u),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),u?"Cancel Edit":"Edit Document"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Q,{className:"w-5 h-5 mr-2 text-blue-600"}),"Document Information"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Number"}),e.jsx("p",{className:"text-gray-900 font-medium",children:o.documentNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Type"}),e.jsx("p",{className:"text-gray-900 capitalize",children:o.documentType.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Details"}),e.jsx("p",{className:"text-gray-900",children:o.propertyDetails})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned To"}),e.jsx("p",{className:"text-gray-900",children:o.assignedTo||"Not assigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created Date"}),e.jsxs("p",{className:"text-gray-900 flex items-center",children:[e.jsx(fe,{className:"w-4 h-4 mr-2 text-gray-400"}),G(o.createdAt,"MMM dd, yyyy")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Updated"}),e.jsxs("p",{className:"text-gray-900 flex items-center",children:[e.jsx(fe,{className:"w-4 h-4 mr-2 text-gray-400"}),G(o.updatedAt,"MMM dd, yyyy HH:mm")]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-green-600"}),"Customer Information"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:o.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsxs("p",{className:"text-gray-900 flex items-center",children:[e.jsx(Os,{className:"w-4 h-4 mr-2 text-gray-400"}),o.customerPhone]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsxs("p",{className:"text-gray-900 flex items-center",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2 text-gray-400"}),o.customerEmail||"Not provided"]})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ve,{className:"w-5 h-5 mr-2 text-purple-600"}),"Builder Information"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Builder Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:o.builderName})]})})]}),d&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Is,{className:"w-5 h-5 mr-2 text-orange-600"}),"Document Files (",o.files.length,")"]}),v&&e.jsxs("button",{className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 rounded-lg text-sm flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),"Add File"]})]})}),e.jsx("div",{className:"p-6",children:o.files.length>0?e.jsx("div",{className:"space-y-3",children:o.files.map(N=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Uploaded by ",N.uploadedBy,"  ",G(N.uploadedAt,"MMM dd, yyyy")]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(Ms,{className:"w-4 h-4"})}),v&&e.jsx("button",{className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(_a,{className:"w-4 h-4"})})]})]},N.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Is,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No files uploaded"}),e.jsx("p",{className:"text-gray-500",children:"Upload documents, scans, or photos to get started"})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Status Workflow"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:C.map((N,S)=>{const w=S<k,D=S===k;return e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${w?"bg-green-500 text-white":D?"bg-blue-500 text-white":"bg-gray-200 text-gray-500"}`,children:w?e.jsx("div",{className:"w-3 h-3 bg-white rounded-full"}):e.jsx("div",{className:"w-2 h-2 bg-current rounded-full"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`text-sm font-medium ${D?"text-blue-600":w?"text-green-600":"text-gray-500"}`,children:N.label}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N.description})]})]},N.status)})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notes"}),v&&e.jsxs("button",{onClick:()=>b(!0),className:"bg-amber-600 hover:bg-amber-700 text-white px-3 py-1 rounded-lg text-sm flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),"Add Note"]})]})}),e.jsxs("div",{className:"p-6",children:[g&&e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("textarea",{value:f,onChange:N=>h(N.target.value),placeholder:"Add a note...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-3",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-3 py-1 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-1 rounded-lg text-sm transition-colors",children:"Add Note"})]})]}),o.notes.length>0?e.jsx("div",{className:"space-y-3",children:o.notes.map((N,S)=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-gray-900 text-sm",children:N})},S))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ne,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No notes added yet"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Qc,{className:"w-5 h-5 mr-2 text-teal-600"}),"Activity Log"]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:x.map(N=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-teal-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Qc,{className:"w-4 h-4 text-teal-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.action}),e.jsx("span",{className:"text-xs text-gray-500",children:G(N.timestamp,"MMM dd, HH:mm")})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.details}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["by ",N.userName]})]})]},N.id))})})]})]})]})]})}function by({isOpen:t,onClose:s,documentId:r}){const{createPayment:n,loading:a}=Nn(),{documents:l}=Nt(),[i,o]=j.useState({documentId:r||"",agreementValue:"",considerationAmount:"",dhcAmount:"",paidAmount:"",paymentMethod:"cheque",paymentDate:new Date().toISOString().split("T")[0],challanNumber:""}),[c,x]=j.useState({}),u=()=>{const h=parseFloat(i.considerationAmount)||0,g=Math.round(h*.05);o(b=>({...b,dhcAmount:g.toString()}))},m=()=>{const h={};return i.documentId||(h.documentId="Document selection is required"),(!i.agreementValue||parseFloat(i.agreementValue)<=0)&&(h.agreementValue="Valid agreement value is required"),(!i.considerationAmount||parseFloat(i.considerationAmount)<=0)&&(h.considerationAmount="Valid consideration amount is required"),(!i.dhcAmount||parseFloat(i.dhcAmount)<=0)&&(h.dhcAmount="Valid DHC amount is required"),x(h),Object.keys(h).length===0},f=async h=>{if(h.preventDefault(),!!m())try{await n({documentId:i.documentId,agreementValue:parseFloat(i.agreementValue),considerationAmount:parseFloat(i.considerationAmount),dhcAmount:parseFloat(i.dhcAmount),paidAmount:parseFloat(i.paidAmount)||0,paymentMethod:i.paymentMethod,paymentDate:i.paymentDate?new Date(i.paymentDate):void 0,challanNumber:i.challanNumber||void 0}),s(),o({documentId:"",agreementValue:"",considerationAmount:"",dhcAmount:"",paidAmount:"",paymentMethod:"cheque",paymentDate:new Date().toISOString().split("T")[0],challanNumber:""}),x({})}catch(g){console.error("Error creating payment:",g)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(zt,{className:"w-5 h-5 mr-2 text-green-600"}),"Create Payment Record"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:f,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Document *"}),e.jsxs("select",{value:i.documentId,onChange:h=>o({...i,documentId:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.documentId?"border-red-300":"border-gray-300"}`,disabled:!!r,children:[e.jsx("option",{value:"",children:"Select a document"}),l.map(h=>e.jsxs("option",{value:h.id,children:[h.documentNumber," - ",h.customerName]},h.id))]}),c.documentId&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.documentId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agreement Value () *"}),e.jsx("input",{type:"number",value:i.agreementValue,onChange:h=>o({...i,agreementValue:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.agreementValue?"border-red-300":"border-gray-300"}`,placeholder:"Enter agreement value",min:"0"}),c.agreementValue&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.agreementValue})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consideration Amount () *"}),e.jsx("input",{type:"number",value:i.considerationAmount,onChange:h=>o({...i,considerationAmount:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.considerationAmount?"border-red-300":"border-gray-300"}`,placeholder:"Enter consideration amount",min:"0"}),c.considerationAmount&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.considerationAmount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DHC Amount () *"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",value:i.dhcAmount,onChange:h=>o({...i,dhcAmount:h.target.value}),className:`flex-1 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.dhcAmount?"border-red-300":"border-gray-300"}`,placeholder:"DHC amount",min:"0"}),e.jsx("button",{type:"button",onClick:u,className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",title:"Calculate 5% of consideration amount",children:e.jsx(xr,{className:"w-4 h-4"})})]}),c.dhcAmount&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.dhcAmount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paid Amount ()"}),e.jsx("input",{type:"number",value:i.paidAmount,onChange:h=>o({...i,paidAmount:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Amount paid so far",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsxs("select",{value:i.paymentMethod,onChange:h=>o({...i,paymentMethod:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"online",children:"Online Transfer"}),e.jsx("option",{value:"dd",children:"Demand Draft"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),e.jsx("input",{type:"date",value:i.paymentDate,onChange:h=>o({...i,paymentDate:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Challan Number"}),e.jsx("input",{type:"text",value:i.challanNumber,onChange:h=>o({...i,challanNumber:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter challan number if available"})]})]}),i.considerationAmount&&i.dhcAmount&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Consideration Amount:"}),e.jsxs("span",{children:["",parseFloat(i.considerationAmount||"0").toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"DHC Amount:"}),e.jsxs("span",{children:["",parseFloat(i.dhcAmount||"0").toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between font-medium border-t pt-1",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{children:["",(parseFloat(i.considerationAmount||"0")+parseFloat(i.dhcAmount||"0")).toLocaleString("en-IN")]})]}),i.paidAmount&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Paid Amount:"}),e.jsxs("span",{children:["",parseFloat(i.paidAmount).toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Create Payment"]})})]})]})]})}):null}function vy({isOpen:t,onClose:s,payment:r}){const{updatePayment:n,loading:a}=Nn(),{user:l}=ee(),[i,o]=j.useState({agreementValue:"",considerationAmount:"",dhcAmount:"",paidAmount:"",paymentMethod:"cheque",paymentDate:"",challanNumber:""}),[c,x]=j.useState({}),u=(l==null?void 0:l.role)==="main_admin";j.useEffect(()=>{r&&o({agreementValue:r.agreementValue.toString(),considerationAmount:r.considerationAmount.toString(),dhcAmount:r.dhcAmount.toString(),paidAmount:r.paidAmount.toString(),paymentMethod:r.paymentMethod||"cheque",paymentDate:r.paymentDate?r.paymentDate.toISOString().split("T")[0]:"",challanNumber:r.challanNumber||""})},[r]);const m=()=>{const g=parseFloat(i.considerationAmount)||0,b=Math.round(g*.05);o(v=>({...v,dhcAmount:b.toString()}))},f=()=>{const g={};return u&&((!i.agreementValue||parseFloat(i.agreementValue)<=0)&&(g.agreementValue="Valid agreement value is required"),(!i.considerationAmount||parseFloat(i.considerationAmount)<=0)&&(g.considerationAmount="Valid consideration amount is required"),(!i.dhcAmount||parseFloat(i.dhcAmount)<=0)&&(g.dhcAmount="Valid DHC amount is required")),x(g),Object.keys(g).length===0},h=async g=>{if(g.preventDefault(),!!f())try{const b={paidAmount:parseFloat(i.paidAmount)||0,paymentMethod:i.paymentMethod,paymentDate:i.paymentDate?new Date(i.paymentDate):void 0,challanNumber:i.challanNumber||void 0};u&&(b.agreementValue=parseFloat(i.agreementValue),b.considerationAmount=parseFloat(i.considerationAmount),b.dhcAmount=parseFloat(i.dhcAmount)),await n(r.id,b),s(),x({})}catch(b){console.error("Error updating payment:",b)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(zt,{className:"w-5 h-5 mr-2 text-green-600"}),"Edit Payment - ",r.id]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:h,className:"p-6",children:[!u&&e.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Note:"})," You can only edit payment status and details. Agreement values can only be modified by the Main Admin."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agreement Value () *"}),e.jsx("input",{type:"number",value:i.agreementValue,onChange:g=>o({...i,agreementValue:g.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.agreementValue?"border-red-300":"border-gray-300"} ${u?"":"bg-gray-100"}`,placeholder:"Enter agreement value",min:"0",disabled:!u}),c.agreementValue&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.agreementValue})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consideration Amount () *"}),e.jsx("input",{type:"number",value:i.considerationAmount,onChange:g=>o({...i,considerationAmount:g.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.considerationAmount?"border-red-300":"border-gray-300"} ${u?"":"bg-gray-100"}`,placeholder:"Enter consideration amount",min:"0",disabled:!u}),c.considerationAmount&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.considerationAmount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DHC Amount () *"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"number",value:i.dhcAmount,onChange:g=>o({...i,dhcAmount:g.target.value}),className:`flex-1 p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.dhcAmount?"border-red-300":"border-gray-300"} ${u?"":"bg-gray-100"}`,placeholder:"DHC amount",min:"0",disabled:!u}),u&&e.jsx("button",{type:"button",onClick:m,className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",title:"Calculate 5% of consideration amount",children:e.jsx(xr,{className:"w-4 h-4"})})]}),c.dhcAmount&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.dhcAmount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paid Amount ()"}),e.jsx("input",{type:"number",value:i.paidAmount,onChange:g=>o({...i,paidAmount:g.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Amount paid so far",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsxs("select",{value:i.paymentMethod,onChange:g=>o({...i,paymentMethod:g.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"online",children:"Online Transfer"}),e.jsx("option",{value:"dd",children:"Demand Draft"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),e.jsx("input",{type:"date",value:i.paymentDate,onChange:g=>o({...i,paymentDate:g.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Challan Number"}),e.jsx("input",{type:"text",value:i.challanNumber,onChange:g=>o({...i,challanNumber:g.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter challan number if available"})]})]}),i.considerationAmount&&i.dhcAmount&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Consideration Amount:"}),e.jsxs("span",{children:["",parseFloat(i.considerationAmount||"0").toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"DHC Amount:"}),e.jsxs("span",{children:["",parseFloat(i.dhcAmount||"0").toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between font-medium border-t pt-1",children:[e.jsx("span",{children:"Total Amount:"}),e.jsxs("span",{children:["",(parseFloat(i.considerationAmount||"0")+parseFloat(i.dhcAmount||"0")).toLocaleString("en-IN")]})]}),i.paidAmount&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Paid Amount:"}),e.jsxs("span",{children:["",parseFloat(i.paidAmount).toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Update Payment"]})})]})]})]})}):null}const jy={pending:"bg-gray-100 text-gray-800",partial:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",refunded:"bg-red-100 text-red-800"},Ny={pending:pe,partial:ne,completed:te,refunded:ne};function wy(){const{hasPermission:t,user:s}=ee(),{payments:r,loading:n}=Nn(),[a,l]=j.useState(""),[i,o]=j.useState("all"),[c,x]=j.useState(!1),[u,m]=j.useState(!1),[f,h]=j.useState(null),g=r.filter(N=>{var D;const S=N.id.toLowerCase().includes(a.toLowerCase())||N.documentId.toLowerCase().includes(a.toLowerCase())||((D=N.challanNumber)==null?void 0:D.toLowerCase().includes(a.toLowerCase())),w=i==="all"||N.paymentStatus===i;return S&&w}),b=t("payments","create"),v=t("payments","update"),d=(s==null?void 0:s.role)==="main_admin",y=N=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(N),C=(()=>{const N=r.reduce((A,_)=>A+_.totalAmount,0),S=r.reduce((A,_)=>A+_.paidAmount,0),w=r.reduce((A,_)=>A+_.pendingAmount,0),D=r.filter(A=>A.paymentStatus==="completed").length;return{totalPayments:N,paidAmount:S,pendingAmount:w,completedCount:D}})(),k=N=>{h(N),m(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payments"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track all payments and manage financial records"})]}),b&&e.jsxs("button",{onClick:()=>x(!0),className:"mt-4 sm:mt-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"New Payment"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Payments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y(C.totalPayments)})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(ct,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y(C.paidAmount)})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y(C.pendingAmount)})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(pe,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.completedCount})]}),e.jsx("div",{className:"bg-emerald-100 p-3 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-emerald-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by payment ID, document ID, or challan number...",value:a,onChange:N=>l(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Cr,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:i,onChange:N=>o(N.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"partial",children:"Partial"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"refunded",children:"Refunded"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Payment ID"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Document"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Amount Details"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Payment Date"}),e.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:g.map(N=>{const S=Ny[N.paymentStatus];return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:e.jsx(zt,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.id}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Challan: ",N.challanNumber||"N/A"]})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.documentId}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:N.paymentMethod||"N/A"})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsx("span",{className:"font-medium",children:y(N.totalAmount)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Paid:"}),e.jsx("span",{className:"font-medium text-green-600",children:y(N.paidAmount)})]}),N.pendingAmount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Pending:"}),e.jsx("span",{className:"font-medium text-orange-600",children:y(N.pendingAmount)})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${jy[N.paymentStatus]}`,children:N.paymentStatus.toUpperCase()})]})}),e.jsx("td",{className:"px-6 py-4",children:N.paymentDate&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:G(N.paymentDate,"MMM dd, yyyy")})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),v&&e.jsx("button",{onClick:()=>k(N),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(Ye,{className:"w-4 h-4"})})]})})]},N.id)})})]})}),!n&&g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(zt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No payments found"}),e.jsx("p",{className:"text-gray-500",children:a||i!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first payment record"})]})]}),!d&&v&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-amber-800",children:"Limited Edit Access"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"You can update payment status and add notes, but Agreement Value and Consideration Amount can only be modified by the Main Admin."})]})]})}),e.jsx(by,{isOpen:c,onClose:()=>x(!1)}),f&&e.jsx(vy,{isOpen:u,onClose:()=>{m(!1),h(null)},payment:f})]})}function Cy({isOpen:t,onClose:s,documentId:r}){const{createChallan:n,loading:a}=Ka(),{documents:l}=Nt(),[i,o]=j.useState({documentId:r||"",amount:"",notes:""}),[c,x]=j.useState({}),u=()=>{const f={};return i.documentId||(f.documentId="Document selection is required"),(!i.amount||parseFloat(i.amount)<=0)&&(f.amount="Valid amount is required"),x(f),Object.keys(f).length===0},m=async f=>{if(f.preventDefault(),!!u())try{await n({documentId:i.documentId,amount:parseFloat(i.amount),notes:i.notes||void 0}),s(),o({documentId:"",amount:"",notes:""}),x({})}catch(h){console.error("Error creating challan:",h)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(gt,{className:"w-5 h-5 mr-2 text-purple-600"}),"Create New Challan"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:m,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Document *"}),e.jsxs("select",{value:i.documentId,onChange:f=>o({...i,documentId:f.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.documentId?"border-red-300":"border-gray-300"}`,disabled:!!r,children:[e.jsx("option",{value:"",children:"Select a document"}),l.map(f=>e.jsxs("option",{value:f.id,children:[f.documentNumber," - ",f.customerName]},f.id))]}),c.documentId&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.documentId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Challan Amount () *"}),e.jsx("input",{type:"number",value:i.amount,onChange:f=>o({...i,amount:f.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.amount?"border-red-300":"border-gray-300"}`,placeholder:"Enter challan amount",min:"0"}),c.amount&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:f=>o({...i,notes:f.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,placeholder:"Add any notes about this challan..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Create Challan"]})})]})]})]})}):null}function Sy({isOpen:t,onClose:s,challan:r}){const{updateChallan:n,loading:a}=Ka(),[l,i]=j.useState({amount:"",notes:"",status:"draft"}),[o,c]=j.useState({});j.useEffect(()=>{r&&i({amount:r.amount.toString(),notes:r.notes||"",status:r.status})},[r]);const x=()=>{const m={};return(!l.amount||parseFloat(l.amount)<=0)&&(m.amount="Valid amount is required"),c(m),Object.keys(m).length===0},u=async m=>{if(m.preventDefault(),!!x())try{await n(r.id,{amount:parseFloat(l.amount),notes:l.notes||void 0,status:l.status}),s(),c({})}catch(f){console.error("Error updating challan:",f)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(gt,{className:"w-5 h-5 mr-2 text-purple-600"}),"Edit Challan - ",r.challanNumber]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Document: ",e.jsx("span",{className:"font-medium",children:r.documentId})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Challan Number: ",e.jsx("span",{className:"font-medium",children:r.challanNumber})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Challan Amount () *"}),e.jsx("input",{type:"number",value:l.amount,onChange:m=>i({...l,amount:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.amount?"border-red-300":"border-gray-300"}`,placeholder:"Enter challan amount",min:"0",disabled:r.status==="approved"}),o.amount&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:l.status,onChange:m=>i({...l,status:m.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:r.status==="approved",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:l.notes,onChange:m=>i({...l,notes:m.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,placeholder:"Add any notes about this challan..."})]}),r.status==="approved"&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Note:"})," This challan has been approved and cannot be modified."]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a||r.status==="approved",className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Update Challan"]})})]})]})]})}):null}const ud={draft:"bg-gray-100 text-gray-800 border-gray-300",submitted:"bg-blue-100 text-blue-800 border-blue-300",approved:"bg-green-100 text-green-800 border-green-300",rejected:"bg-red-100 text-red-800 border-red-300"},md={draft:pe,submitted:Za,approved:te,rejected:nr};function Ey(){const{hasPermission:t,user:s}=ee(),{challans:r,loading:n,submitChallan:a,approveChallan:l,rejectChallan:i}=Ka(),{documents:o}=Nt(),{tasks:c,updateTaskStatus:x}=qt(),[u,m]=j.useState(""),[f,h]=j.useState("all"),[g,b]=j.useState(!1),[v,d]=j.useState(!1),[y,p]=j.useState(!1),[C,k]=j.useState(null),N=async(T,I)=>{try{await x(T,I)}catch($){console.error("Error updating task status:",$)}},S=c.filter(T=>T.type==="challan_creation"&&(T.status==="pending"||T.status==="in_progress")&&T.assignedTo===(s==null?void 0:s.id)),w=r.filter(T=>{const I=T.challanNumber.toLowerCase().includes(u.toLowerCase())||T.documentId.toLowerCase().includes(u.toLowerCase())||T.filledBy.toLowerCase().includes(u.toLowerCase()),$=f==="all"||T.status===f;return I&&$}),D=t("challans","create")||(s==null?void 0:s.role)==="challan_staff",A=t("challans","update")||(s==null?void 0:s.role)==="challan_staff",_=(s==null?void 0:s.role)==="main_admin"||(s==null?void 0:s.role)==="staff_admin",L=T=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(T),R=(()=>{const T=r.reduce((W,Z)=>W+Z.amount,0),I=r.filter(W=>W.status==="approved").reduce((W,Z)=>W+Z.amount,0),$=r.filter(W=>W.status==="submitted").reduce((W,Z)=>W+Z.amount,0),Y=r.filter(W=>W.status==="draft").reduce((W,Z)=>W+Z.amount,0),B=r.filter(W=>W.status==="rejected").reduce((W,Z)=>W+Z.amount,0);return{total:T,approved:I,pending:$,draft:Y,rejected:B,count:{total:r.length,approved:r.filter(W=>W.status==="approved").length,pending:r.filter(W=>W.status==="submitted").length,draft:r.filter(W=>W.status==="draft").length,rejected:r.filter(W=>W.status==="rejected").length}}})(),O=T=>{k(T),d(!0)},U=T=>{k(T),p(!0)},M=async T=>{try{await a(T)}catch(I){console.error("Error submitting challan:",I)}},P=async T=>{try{await l(T)}catch(I){console.error("Error approving challan:",I)}},F=async T=>{try{await i(T)}catch(I){console.error("Error rejecting challan:",I)}},H=T=>o.find(I=>I.id===T);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Challan Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create, manage and track DHC challan forms"})]}),D&&e.jsxs("button",{onClick:()=>b(!0),className:"mt-4 sm:mt-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"New Challan"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-xl shadow-lg border border-blue-100 p-6 hover:shadow-xl hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:L(R.total)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R.count.total," challans"]})]}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-4 rounded-xl shadow-lg",children:e.jsx(gt,{className:"w-7 h-7 text-white"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-green-50 rounded-xl shadow-lg border border-green-100 p-6 hover:shadow-xl hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Approved"}),e.jsx("p",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:L(R.approved)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R.count.approved," challans"]})]}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-4 rounded-xl shadow-lg",children:e.jsx(te,{className:"w-7 h-7 text-white"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-orange-50 rounded-xl shadow-lg border border-orange-100 p-6 hover:shadow-xl hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:L(R.pending)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R.count.pending," challans"]})]}),e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-4 rounded-xl shadow-lg",children:e.jsx(pe,{className:"w-7 h-7 text-white"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-xl shadow-lg border border-gray-200 p-6 hover:shadow-xl hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Draft"}),e.jsx("p",{className:"text-2xl font-bold bg-gradient-to-r from-gray-600 to-gray-700 bg-clip-text text-transparent",children:L(R.draft)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R.count.draft," challans"]})]}),e.jsx("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 p-4 rounded-xl shadow-lg",children:e.jsx(Q,{className:"w-7 h-7 text-white"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-white to-red-50 rounded-xl shadow-lg border border-red-100 p-6 hover:shadow-xl hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rejected"}),e.jsx("p",{className:"text-2xl font-bold bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent",children:L(R.rejected)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R.count.rejected," challans"]})]}),e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 p-4 rounded-xl shadow-lg",children:e.jsx(nr,{className:"w-7 h-7 text-white"})})]})})]}),S.length>0&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-blue-500 p-2 rounded-lg",children:e.jsx(gt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-3",children:"Your Active Challan Tasks"}),e.jsx("div",{className:"space-y-3",children:S.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border-2 border-blue-100 shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-blue-900 text-lg",children:T.title}),e.jsx("p",{className:"text-blue-700 mt-1",children:T.description}),T.documentId&&e.jsxs("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:[" Document: ",T.documentId]}),T.dueDate&&e.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[" Due: ",G(new Date(T.dueDate),"MMM dd, yyyy")]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-3 py-1 text-sm font-bold rounded-full shadow-sm ${T.status==="pending"?"bg-gray-100 text-gray-800":T.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:T.status.replace("_"," ").toUpperCase()}),T.status==="pending"&&e.jsx("button",{onClick:()=>N(T.id,"in_progress"),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-4 py-2 rounded-lg text-sm font-bold transition-all duration-300 shadow-lg hover:shadow-xl",children:"Start Task"}),T.documentId&&e.jsx("button",{onClick:()=>b(!0),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-4 py-2 rounded-lg text-sm font-bold transition-all duration-300 shadow-lg hover:shadow-xl",children:"Create Challan"})]})]},T.id))})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-400"}),e.jsx("input",{type:"text",placeholder:"Search by challan number, document ID, or filled by...",value:u,onChange:T=>m(T.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-4 focus:ring-blue-200 focus:border-blue-500 transition-all duration-300 text-gray-700 placeholder-gray-400"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-lg",children:e.jsx(Cr,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("select",{value:f,onChange:T=>h(T.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-3 focus:ring-4 focus:ring-blue-200 focus:border-blue-500 transition-all duration-300 text-gray-700 font-medium",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:w.map(T=>{const I=md[T.status],$=H(T.documentId);return e.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 hover:shadow-lg hover:scale-102 transition-all duration-300 overflow-hidden",children:e.jsxs("div",{className:"p-4 relative",children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 ${T.status==="approved"?"bg-gradient-to-r from-green-500 to-emerald-500":T.status==="submitted"?"bg-gradient-to-r from-blue-500 to-indigo-500":T.status==="rejected"?"bg-gradient-to-r from-red-500 to-pink-500":"bg-gradient-to-r from-gray-400 to-gray-500"}`}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(gt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:T.challanNumber}),e.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:[" ",T.documentId]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`p-1 rounded-lg ${T.status==="approved"?"bg-green-100":T.status==="submitted"?"bg-blue-100":T.status==="rejected"?"bg-red-100":"bg-gray-100"}`,children:e.jsx(I,{className:"w-4 h-4"})}),e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-bold rounded-full border shadow-sm ${ud[T.status]}`,children:T.status.toUpperCase()})]})]}),e.jsx("div",{className:"mb-4 p-3 bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:" Amount"}),e.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent",children:L(T.amount)})]})}),$&&e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[e.jsx("div",{className:"bg-blue-100 p-1 rounded-lg",children:e.jsx(X,{className:"w-4 h-4 text-blue-600"})}),e.jsx("span",{className:"font-medium truncate",children:$.customerName})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[e.jsx("div",{className:"bg-purple-100 p-1 rounded-lg",children:e.jsx(ve,{className:"w-4 h-4 text-purple-600"})}),e.jsx("span",{className:"font-medium truncate",children:$.builderName})]}),e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-700",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-lg mt-0.5",children:e.jsx(Pe,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"line-clamp-1 font-medium text-xs",children:$.propertyDetails})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[e.jsx("div",{className:"bg-indigo-100 p-1 rounded-lg",children:e.jsx(X,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("span",{className:"font-medium text-xs",children:["By: ",T.filledBy]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[e.jsx("div",{className:"bg-orange-100 p-1 rounded-lg",children:e.jsx(fe,{className:"w-4 h-4 text-orange-600"})}),e.jsx("span",{className:"font-medium text-xs",children:G(T.filledAt,"MMM dd")})]})]}),T.notes&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1 font-semibold",children:" Notes:"}),e.jsx("p",{className:"text-xs text-gray-700 bg-gradient-to-r from-yellow-50 to-orange-50 p-2 rounded-lg border border-yellow-100 font-medium line-clamp-2",children:T.notes})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>U(T),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-300",title:"View Details",children:e.jsx(Ee,{className:"w-4 h-4"})}),A&&T.status!=="approved"&&e.jsx("button",{onClick:()=>O(T),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all duration-300",title:"Edit Challan",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-all duration-300",title:"Print",children:e.jsx(ed,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-300",title:"Download",children:e.jsx(Ms,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[T.status==="draft"&&A&&e.jsxs("button",{onClick:()=>M(T.id),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-3 py-1 rounded-lg text-xs font-bold transition-all duration-300 flex items-center shadow-md hover:shadow-lg",children:[e.jsx(Za,{className:"w-3 h-3 mr-1"}),"Submit"]}),T.status==="submitted"&&_&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>P(T.id),className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white px-2 py-1 rounded-lg text-xs font-bold transition-all duration-300 flex items-center shadow-md hover:shadow-lg",children:e.jsx(lx,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>F(T.id),className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white px-2 py-1 rounded-lg text-xs font-bold transition-all duration-300 flex items-center shadow-md hover:shadow-lg",children:e.jsx(ce,{className:"w-3 h-3"})})]}),T.status==="rejected"&&A&&e.jsxs("button",{onClick:()=>O(T),className:"bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white px-3 py-1 rounded-lg text-xs font-bold transition-all duration-300 flex items-center shadow-md hover:shadow-lg",children:[e.jsx(pn,{className:"w-3 h-3 mr-1"}),"Revise"]})]})]})]})},T.id)})}),!n&&w.length===0&&e.jsxs("div",{className:"text-center py-16 bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl border-2 border-gray-100",children:[e.jsx("div",{className:"bg-gray-200 p-6 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:e.jsx(gt,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No challans found"}),e.jsx("p",{className:"text-gray-600 mb-6 text-lg",children:u||f!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first challan"}),D&&!u&&f==="all"&&e.jsxs("button",{onClick:()=>b(!0),className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3 rounded-xl flex items-center mx-auto transition-all duration-300 shadow-lg hover:shadow-xl font-bold",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Create First Challan"]})]}),n&&e.jsx("div",{className:"flex items-center justify-center py-16 bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl",children:e.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin shadow-lg"})}),(s==null?void 0:s.role)==="challan_staff"&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-blue-500 p-2 rounded-lg",children:e.jsx(ne,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-3",children:"Challan Staff Guidelines"}),e.jsxs("div",{className:"text-blue-800 space-y-2 font-medium",children:[e.jsx("p",{children:" Create challans for documents that require DHC payment"}),e.jsx("p",{children:" Fill in accurate challan amounts based on consideration value"}),e.jsx("p",{children:" Submit challans for admin approval after completion"}),e.jsx("p",{children:" You can edit draft and rejected challans"}),e.jsx("p",{children:" Approved challans cannot be modified"})]})]})]})}),e.jsx(Cy,{isOpen:g,onClose:()=>b(!1)}),C&&e.jsx(Sy,{isOpen:v,onClose:()=>{d(!1),k(null)},challan:C}),C&&e.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4 ${y?"":"hidden"}`,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto border-2 border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b-2 border-gray-100 bg-gradient-to-r from-purple-50 to-indigo-50",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx("div",{className:"bg-purple-500 p-2 rounded-lg mr-3",children:e.jsx(gt,{className:"w-6 h-6 text-white"})}),"Challan Details - ",C.challanNumber]}),e.jsx("button",{onClick:()=>p(!1),className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all duration-300",children:e.jsx(ce,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg mr-2",children:e.jsx(gt,{className:"w-5 h-5 text-purple-600"})}),"Challan Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Challan Number:"}),e.jsx("p",{className:"font-bold text-lg text-gray-900",children:C.challanNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Document ID:"}),e.jsx("p",{className:"font-bold text-lg text-blue-600",children:C.documentId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Amount:"}),e.jsx("p",{className:"font-bold text-2xl bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:L(C.amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Status:"}),e.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[Lt.createElement(md[C.status],{className:"w-4 h-4"}),e.jsx("span",{className:`inline-flex px-4 py-2 text-sm font-bold rounded-full border-2 shadow-sm ${ud[C.status]}`,children:C.status.toUpperCase()})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-2",children:e.jsx(Q,{className:"w-5 h-5 text-blue-600"})}),"Additional Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Filled By:"}),e.jsx("p",{className:"font-bold text-lg text-gray-900",children:C.filledBy})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Date Filled:"}),e.jsx("p",{className:"font-bold text-lg text-gray-900",children:G(C.filledAt,"MMM dd, yyyy HH:mm")})]}),C.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Notes:"}),e.jsx("p",{className:"font-medium text-gray-800 bg-yellow-50 p-3 rounded-xl border-2 border-yellow-100 mt-2",children:C.notes})]})]})]})]}),H(C.documentId)&&e.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-gray-200",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg mr-2",children:e.jsx(ve,{className:"w-5 h-5 text-green-600"})}),"Related Document Details"]}),(()=>{const T=H(C.documentId);return T?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Customer:"}),e.jsx("p",{className:"font-bold text-lg text-gray-900",children:T.customerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Builder:"}),e.jsx("p",{className:"font-bold text-lg text-gray-900",children:T.builderName})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"text-gray-600 font-semibold",children:"Property:"}),e.jsx("p",{className:"font-medium text-gray-800 bg-gray-50 p-3 rounded-xl border-2 border-gray-100 mt-2",children:T.propertyDetails})]})]}):null})()]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t-2 border-gray-200",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-all duration-300 font-semibold",children:"Close"}),e.jsxs("button",{className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 flex items-center shadow-lg hover:shadow-xl",children:[e.jsx(ed,{className:"w-5 h-5 mr-2"}),"Print Challan"]}),e.jsxs("button",{className:"bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 text-white px-6 py-3 rounded-xl font-bold transition-all duration-300 flex items-center shadow-lg hover:shadow-xl",children:[e.jsx(Ms,{className:"w-5 h-5 mr-2"}),"Download PDF"]})]})]})]})})]})}function ky({isOpen:t,onClose:s,customer:r}){const{updateCustomer:n,loading:a}=vr(),[l,i]=j.useState({name:"",phone:"",email:"",address:""}),[o,c]=j.useState({});j.useEffect(()=>{r&&i({name:r.name,phone:r.phone,email:r.email||"",address:r.address})},[r]);const x=()=>{const m={};return l.name.trim()||(m.name="Customer name is required"),l.phone.trim()||(m.phone="Phone number is required"),l.address.trim()||(m.address="Address is required"),l.email&&!/\S+@\S+\.\S+/.test(l.email)&&(m.email="Please enter a valid email address"),c(m),Object.keys(m).length===0},u=async m=>{if(m.preventDefault(),!!x())try{await n(r.id,{name:l.name,phone:l.phone,email:l.email||void 0,address:l.address}),s(),c({})}catch(f){console.error("Error updating customer:",f)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-blue-600"}),"Edit Customer - ",r.name]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Customer ID: ",e.jsx("span",{className:"font-medium",children:r.id})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Documents: ",e.jsx("span",{className:"font-medium",children:r.documents.length})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(X,{className:"w-4 h-4 inline mr-1"}),"Customer Name *"]}),e.jsx("input",{type:"text",value:l.name,onChange:m=>i({...l,name:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter customer name"}),o.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Os,{className:"w-4 h-4 inline mr-1"}),"Phone Number *"]}),e.jsx("input",{type:"tel",value:l.phone,onChange:m=>i({...l,phone:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.phone?"border-red-300":"border-gray-300"}`,placeholder:"Enter phone number"}),o.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.phone})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ae,{className:"w-4 h-4 inline mr-1"}),"Email Address"]}),e.jsx("input",{type:"email",value:l.email,onChange:m=>i({...l,email:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter email address"}),o.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Pe,{className:"w-4 h-4 inline mr-1"}),"Address *"]}),e.jsx("textarea",{value:l.address,onChange:m=>i({...l,address:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${o.address?"border-red-300":"border-gray-300"}`,rows:3,placeholder:"Enter complete address"}),o.address&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.address})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Update Customer"]})})]})]})]})}):null}function Ty({isOpen:t,onClose:s}){const{createCustomer:r,loading:n}=vr(),[a,l]=j.useState({name:"",phone:"",email:"",address:""}),[i,o]=j.useState({}),c=()=>{const u={};return a.name.trim()||(u.name="Customer name is required"),a.phone.trim()||(u.phone="Phone number is required"),a.address.trim()||(u.address="Address is required"),a.email&&!/\S+@\S+\.\S+/.test(a.email)&&(u.email="Please enter a valid email address"),o(u),Object.keys(u).length===0},x=async u=>{if(u.preventDefault(),!!c())try{await r({name:a.name,phone:a.phone,email:a.email||void 0,address:a.address,documents:[]}),s(),l({name:"",phone:"",email:"",address:""}),o({})}catch(m){console.error("Error creating customer:",m)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-blue-600"}),"Create New Customer"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(X,{className:"w-4 h-4 inline mr-1"}),"Customer Name *"]}),e.jsx("input",{type:"text",value:a.name,onChange:u=>l({...a,name:u.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter customer name"}),i.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Os,{className:"w-4 h-4 inline mr-1"}),"Phone Number *"]}),e.jsx("input",{type:"tel",value:a.phone,onChange:u=>l({...a,phone:u.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.phone?"border-red-300":"border-gray-300"}`,placeholder:"Enter phone number"}),i.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.phone})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Ae,{className:"w-4 h-4 inline mr-1"}),"Email Address"]}),e.jsx("input",{type:"email",value:a.email,onChange:u=>l({...a,email:u.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter email address"}),i.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Pe,{className:"w-4 h-4 inline mr-1"}),"Address *"]}),e.jsx("textarea",{value:a.address,onChange:u=>l({...a,address:u.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${i.address?"border-red-300":"border-gray-300"}`,rows:3,placeholder:"Enter complete address"}),i.address&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.address})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Create Customer"]})})]})]})]})}):null}function _y(){const{hasPermission:t}=ee(),{customers:s}=vr(),[r,n]=j.useState(""),[a,l]=j.useState(!1),[i,o]=j.useState(!1),[c,x]=j.useState(null),u=s.filter(v=>{var d;return v.name.toLowerCase().includes(r.toLowerCase())||v.phone.includes(r)||((d=v.email)==null?void 0:d.toLowerCase().includes(r.toLowerCase()))||v.address.toLowerCase().includes(r.toLowerCase())}),m=t("customers","create"),f=t("customers","update"),h=v=>{x(v),o(!0)},b=(()=>{const v=s.length,d=s.filter(C=>C.documents.length>0).length,y=v-d,p=s.reduce((C,k)=>C+k.documents.length,0);return{totalCustomers:v,withDocuments:d,withoutDocuments:y,totalDocuments:p}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Customers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage customer information and relationships"})]}),m&&e.jsxs("button",{onClick:()=>l(!0),className:"mt-4 sm:mt-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"New Customer"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.totalCustomers})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(X,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"With Documents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.withDocuments})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Without Documents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.withoutDocuments})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(X,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Documents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.totalDocuments})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(X,{className:"w-6 h-6 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-green-900 mb-2",children:"Automatic Customer Creation"}),e.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("p",{children:" Customers are automatically created when you add new documents"}),e.jsx("p",{children:" Customer information is extracted from document details"}),e.jsx("p",{children:" Existing customers are automatically linked to new documents"}),e.jsx("p",{children:" You can manually edit customer information anytime using the edit button"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search customers by name, phone, email, or address...",value:r,onChange:v=>n(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(v=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),f&&e.jsx("button",{onClick:()=>h(v),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(Ye,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Customer ID: ",v.id]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Os,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:v.phone})]}),v.email&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:v.email})]}),e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[e.jsx(Pe,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-2",children:v.address})]})]}),e.jsx("div",{className:"pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[v.documents.length," document",v.documents.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:G(v.createdAt,"MMM dd, yyyy")})]})]})}),v.documents.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Recent Documents:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.documents.slice(0,3).map(d=>e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-full",children:d},d)),v.documents.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",v.documents.length-3," more"]})]})]})]})]})},v.id))}),u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No customers found"}),e.jsx("p",{className:"text-gray-500",children:r?"Try adjusting your search criteria":"Customers will appear here automatically when you create documents"})]}),e.jsx(Ty,{isOpen:a,onClose:()=>l(!1)}),c&&e.jsx(ky,{isOpen:i,onClose:()=>{o(!1),x(null)},customer:c})]})}function Dy({isOpen:t,onClose:s,builder:r}){const{updateBuilder:n,loading:a}=jr(),[l,i]=j.useState({name:"",contactPerson:"",phone:"",email:"",address:"",registrationNumber:""}),[o,c]=j.useState({});j.useEffect(()=>{r&&i({name:r.name,contactPerson:r.contactPerson,phone:r.phone,email:r.email||"",address:r.address,registrationNumber:r.registrationNumber||""})},[r]);const x=()=>{const m={};return l.name.trim()||(m.name="Builder name is required"),l.contactPerson.trim()||(m.contactPerson="Contact person is required"),l.phone.trim()||(m.phone="Phone number is required"),l.address.trim()||(m.address="Address is required"),l.email&&!/\S+@\S+\.\S+/.test(l.email)&&(m.email="Please enter a valid email address"),c(m),Object.keys(m).length===0},u=async m=>{if(m.preventDefault(),!!x())try{await n(r.id,{name:l.name,contactPerson:l.contactPerson,phone:l.phone,email:l.email||void 0,address:l.address,registrationNumber:l.registrationNumber||void 0}),s(),c({})}catch(f){console.error("Error updating builder:",f)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ve,{className:"w-5 h-5 mr-2 text-purple-600"}),"Edit Builder - ",r.name]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(ve,{className:"w-4 h-4 mr-2 text-purple-600"}),"Builder Information"]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Builder ID: ",e.jsx("span",{className:"font-medium",children:r.id})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Documents: ",e.jsx("span",{className:"font-medium",children:r.documents.length})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Builder Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:m=>i({...l,name:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter builder name"}),o.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Number"}),e.jsx("input",{type:"text",value:l.registrationNumber,onChange:m=>i({...l,registrationNumber:m.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter registration number"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2 text-green-600"}),"Contact Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),e.jsx("input",{type:"text",value:l.contactPerson,onChange:m=>i({...l,contactPerson:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.contactPerson?"border-red-300":"border-gray-300"}`,placeholder:"Enter contact person name"}),o.contactPerson&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.contactPerson})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:l.phone,onChange:m=>i({...l,phone:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.phone?"border-red-300":"border-gray-300"}`,placeholder:"Enter phone number"}),o.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:l.email,onChange:m=>i({...l,email:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter email address"}),o.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.email})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2 text-orange-600"}),"Address *"]}),e.jsx("textarea",{value:l.address,onChange:m=>i({...l,address:m.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${o.address?"border-red-300":"border-gray-300"}`,rows:3,placeholder:"Enter complete address"}),o.address&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.address})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Update Builder"]})})]})]})]})}):null}function Ay({isOpen:t,onClose:s}){const{createBuilder:r,loading:n}=jr(),[a,l]=j.useState({name:"",contactPerson:"",phone:"",email:"",address:"",registrationNumber:""}),[i,o]=j.useState({}),c=()=>{const u={};return a.name.trim()||(u.name="Builder name is required"),a.contactPerson.trim()||(u.contactPerson="Contact person is required"),a.phone.trim()||(u.phone="Phone number is required"),a.address.trim()||(u.address="Address is required"),a.email&&!/\S+@\S+\.\S+/.test(a.email)&&(u.email="Please enter a valid email address"),o(u),Object.keys(u).length===0},x=async u=>{if(u.preventDefault(),!!c())try{await r({name:a.name,contactPerson:a.contactPerson,phone:a.phone,email:a.email||void 0,address:a.address,registrationNumber:a.registrationNumber||void 0,documents:[]}),s(),l({name:"",contactPerson:"",phone:"",email:"",address:"",registrationNumber:""}),o({})}catch(m){console.error("Error creating builder:",m)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ve,{className:"w-5 h-5 mr-2 text-purple-600"}),"Create New Builder"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(ve,{className:"w-4 h-4 mr-2 text-purple-600"}),"Builder Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Builder Name *"}),e.jsx("input",{type:"text",value:a.name,onChange:u=>l({...a,name:u.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter builder name"}),i.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Registration Number"}),e.jsx("input",{type:"text",value:a.registrationNumber,onChange:u=>l({...a,registrationNumber:u.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter registration number"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2 text-green-600"}),"Contact Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person *"}),e.jsx("input",{type:"text",value:a.contactPerson,onChange:u=>l({...a,contactPerson:u.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.contactPerson?"border-red-300":"border-gray-300"}`,placeholder:"Enter contact person name"}),i.contactPerson&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.contactPerson})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:a.phone,onChange:u=>l({...a,phone:u.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.phone?"border-red-300":"border-gray-300"}`,placeholder:"Enter phone number"}),i.phone&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:a.email,onChange:u=>l({...a,email:u.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter email address"}),i.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.email})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2 text-orange-600"}),"Address *"]}),e.jsx("textarea",{value:a.address,onChange:u=>l({...a,address:u.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${i.address?"border-red-300":"border-gray-300"}`,rows:3,placeholder:"Enter complete address"}),i.address&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.address})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Create Builder"]})})]})]})]})}):null}function Py(){const{hasPermission:t}=ee(),{builders:s}=jr(),[r,n]=j.useState(""),[a,l]=j.useState(!1),[i,o]=j.useState(!1),[c,x]=j.useState(null),u=s.filter(v=>{var d,y;return v.name.toLowerCase().includes(r.toLowerCase())||v.contactPerson.toLowerCase().includes(r.toLowerCase())||v.phone.includes(r)||((d=v.email)==null?void 0:d.toLowerCase().includes(r.toLowerCase()))||((y=v.registrationNumber)==null?void 0:y.toLowerCase().includes(r.toLowerCase()))}),m=t("builders","create"),f=t("builders","update"),h=v=>{x(v),o(!0)},b=(()=>{const v=s.length,d=s.filter(C=>C.documents.length>0).length,y=v-d,p=s.reduce((C,k)=>C+k.documents.length,0);return{totalBuilders:v,withDocuments:d,withoutDocuments:y,totalDocuments:p}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Builders"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage builder relationships and project information"})]}),m&&e.jsxs("button",{onClick:()=>l(!0),className:"mt-4 sm:mt-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"New Builder"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Builders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.totalBuilders})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Projects"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.withDocuments})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"No Projects"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.withoutDocuments})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Documents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.totalDocuments})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ve,{className:"w-6 h-6 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-purple-900 mb-2",children:"Automatic Builder Creation"}),e.jsxs("div",{className:"text-sm text-purple-800 space-y-1",children:[e.jsx("p",{children:" Builders are automatically created when you add new documents"}),e.jsx("p",{children:" Builder information is extracted from document details"}),e.jsx("p",{children:" Existing builders are automatically linked to new documents"}),e.jsx("p",{children:" You can manually edit builder information and add contact details using the edit button"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search builders by name, contact person, phone, email, or registration number...",value:r,onChange:v=>n(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:u.map(v=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(ve,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Builder ID: ",v.id]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),f&&e.jsx("button",{onClick:()=>h(v),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(Ye,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(X,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:v.contactPerson})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Os,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:v.phone})]}),v.email&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:v.email})]}),v.registrationNumber&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Ig,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:v.registrationNumber})]}),e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[e.jsx(Pe,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-2",children:v.address})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-gray-600",children:[v.documents.length," document",v.documents.length!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:G(v.createdAt,"MMM dd, yyyy")})]})]}),v.documents.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Recent Documents:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.documents.slice(0,4).map(d=>e.jsx("span",{className:"px-2 py-1 bg-indigo-50 text-indigo-700 text-xs rounded-full",children:d},d)),v.documents.length>4&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",v.documents.length-4," more"]})]})]})]})]})},v.id))}),u.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ve,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No builders found"}),e.jsx("p",{className:"text-gray-500",children:r?"Try adjusting your search criteria":"Builders will appear here automatically when you create documents"})]}),e.jsx(Ay,{isOpen:a,onClose:()=>l(!1)}),c&&e.jsx(Dy,{isOpen:i,onClose:()=>{o(!1),x(null)},builder:c})]})}const Al=[{value:"staff_admin",label:"Staff Admin",description:"Can manage documents, payments, and users (except main admin)"},{value:"challan_staff",label:"Challan Staff",description:"Can create and manage challan forms and payment records"},{value:"field_collection_staff",label:"Field Collection Staff",description:"Can update collection status and upload field documents"},{value:"data_entry_staff",label:"Data Entry Staff",description:"Can perform data entry tasks for assigned documents"},{value:"document_delivery_staff",label:"Document Delivery Staff",description:"Can manage document delivery and upload delivery proofs"}];function My({isOpen:t,onClose:s,onCreateUser:r}){var h;const[n,a]=j.useState({name:"",email:"",role:"staff_admin",password:"",confirmPassword:"",isActive:!0}),[l,i]=j.useState({}),[o,c]=j.useState(!1),[x,u]=j.useState(!1),m=()=>{const g={};return n.name.trim()||(g.name="Full name is required"),n.email.trim()?/\S+@\S+\.\S+/.test(n.email)||(g.email="Please enter a valid email address"):g.email="Email address is required",n.password?n.password.length<8?g.password="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(n.password)||(g.password="Password must contain uppercase, lowercase, number, and special character"):g.password="Password is required",n.password!==n.confirmPassword&&(g.confirmPassword="Passwords do not match"),i(g),Object.keys(g).length===0},f=async g=>{if(g.preventDefault(),!!m()){u(!0);try{await r({name:n.name,email:n.email,role:n.role,password:n.password,isActive:n.isActive}),s(),a({name:"",email:"",role:"staff_admin",password:"",confirmPassword:"",isActive:!0}),i({})}catch(b){console.error("Error creating user:",b)}finally{u(!1)}}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-orange-600"}),"Create New User"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:f,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2 text-orange-600"}),"Basic Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:n.name,onChange:g=>a({...n,name:g.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${l.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter full name"}),l.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:n.email,onChange:g=>a({...n,email:g.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${l.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter email address"}),l.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.isActive,onChange:g=>a({...n,isActive:g.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:n.isActive?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(ms,{className:"w-4 h-4 mr-2 text-green-600"}),"Role & Security"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Role *"}),e.jsx("select",{value:n.role,onChange:g=>a({...n,role:g.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Al.map(g=>e.jsx("option",{value:g.value,children:g.label},g.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(h=Al.find(g=>g.value===n.role))==null?void 0:h.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o?"text":"password",value:n.password,onChange:g=>a({...n,password:g.target.value}),className:`w-full p-3 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${l.password?"border-red-300":"border-gray-300"}`,placeholder:"Enter password"}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?e.jsx(hr,{className:"w-4 h-4"}):e.jsx(Ee,{className:"w-4 h-4"})})]}),l.password&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),e.jsx("input",{type:o?"text":"password",value:n.confirmPassword,onChange:g=>a({...n,confirmPassword:g.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${l.confirmPassword?"border-red-300":"border-gray-300"}`,placeholder:"Confirm password"}),l.confirmPassword&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:l.confirmPassword})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password Requirements"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" At least 8 characters long"}),e.jsx("li",{children:" Include uppercase and lowercase letters"}),e.jsx("li",{children:" Include at least one number"}),e.jsx("li",{children:" Include at least one special character (@$!%*?&)"})]})]})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Role Permissions Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:Al.map(g=>e.jsxs("div",{className:`p-3 rounded-lg border ${n.role===g.value?"bg-blue-50 border-blue-200":"bg-white border-gray-200"}`,children:[e.jsx("p",{className:"font-medium text-gray-900",children:g.label}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:g.description})]},g.value))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"bg-gradient-primary hover:opacity-90 disabled:opacity-50 text-white px-6 py-2 rounded-lg font-medium transition-all duration-300 flex items-center shadow-lg hover:shadow-xl",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Create User"]})})]})]})]})}):null}const Iy=[{value:"staff_admin",label:"Staff Admin",description:"Can manage documents, payments, and users (except main admin)"},{value:"challan_staff",label:"Challan Staff",description:"Can create and manage challan forms and payment records"},{value:"field_collection_staff",label:"Field Collection Staff",description:"Can update collection status and upload field documents"},{value:"data_entry_staff",label:"Data Entry Staff",description:"Can perform data entry tasks for assigned documents"},{value:"document_delivery_staff",label:"Document Delivery Staff",description:"Can manage document delivery and upload delivery proofs"}];function Ly({isOpen:t,onClose:s,user:r,onUpdateUser:n,currentUser:a}){const[l,i]=j.useState({name:"",email:"",role:"staff_admin",isActive:!0,changePassword:!1,newPassword:"",confirmPassword:""}),[o,c]=j.useState({}),[x,u]=j.useState(!1),[m,f]=j.useState(!1),h=a.role==="main_admin"&&r.role!=="main_admin",g=a.role==="main_admin"&&r.id!==a.id;j.useEffect(()=>{r&&i({name:r.name,email:r.email,role:r.role,isActive:r.isActive,changePassword:!1,newPassword:"",confirmPassword:""})},[r]);const b=()=>{const d={};return l.name.trim()||(d.name="Full name is required"),l.email.trim()?/\S+@\S+\.\S+/.test(l.email)||(d.email="Please enter a valid email address"):d.email="Email address is required",l.changePassword&&(l.newPassword?l.newPassword.length<8?d.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(l.newPassword)||(d.newPassword="Password must contain uppercase, lowercase, number, and special character"):d.newPassword="New password is required",l.newPassword!==l.confirmPassword&&(d.confirmPassword="Passwords do not match")),c(d),Object.keys(d).length===0},v=async d=>{if(d.preventDefault(),!!b()){f(!0);try{const y={name:l.name,email:l.email,isActive:l.isActive};h&&(y.role=l.role),l.changePassword&&(y.password=l.newPassword),await n(r.id,y),s(),c({})}catch(y){console.error("Error updating user:",y)}finally{f(!1)}}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-blue-600"}),"Edit User - ",r.name]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:v,className:"p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"User ID:"}),e.jsx("span",{className:"ml-2 font-medium",children:r.id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Created:"}),e.jsx("span",{className:"ml-2 font-medium",children:r.createdAt.toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Last Login:"}),e.jsx("span",{className:"ml-2 font-medium",children:r.lastLogin?r.lastLogin.toLocaleString():"Never"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Role:"}),e.jsx("span",{className:"ml-2 font-medium capitalize",children:r.role.replace("_"," ")})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2 text-blue-600"}),"Basic Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:d=>i({...l,name:d.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter full name"}),o.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",value:l.email,onChange:d=>i({...l,email:d.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter email address"}),o.email&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.email})]}),g&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.isActive,onChange:d=>i({...l,isActive:d.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ml-3 text-sm text-gray-700",children:l.isActive?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(ms,{className:"w-4 h-4 mr-2 text-green-600"}),"Role & Security"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User Role *"}),e.jsxs("select",{value:l.role,onChange:d=>i({...l,role:d.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!h,children:[r.role==="main_admin"&&e.jsx("option",{value:"main_admin",children:"Main Admin"}),Iy.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))]}),!h&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Role can only be changed by Main Admin"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:l.changePassword,onChange:d=>i({...l,changePassword:d.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Change Password"})]})}),l.changePassword&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",value:l.newPassword,onChange:d=>i({...l,newPassword:d.target.value}),className:`w-full p-3 pr-10 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.newPassword?"border-red-300":"border-gray-300"}`,placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>u(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?e.jsx(hr,{className:"w-4 h-4"}):e.jsx(Ee,{className:"w-4 h-4"})})]}),o.newPassword&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password *"}),e.jsx("input",{type:x?"text":"password",value:l.confirmPassword,onChange:d=>i({...l,confirmPassword:d.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.confirmPassword?"border-red-300":"border-gray-300"}`,placeholder:"Confirm new password"}),o.confirmPassword&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.confirmPassword})]})]})]})]}),r.role==="main_admin"&&e.jsx("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-900 mb-1",children:"Main Admin Account"}),e.jsx("p",{className:"text-sm text-red-800",children:"This is a Main Admin account. Role cannot be changed and account cannot be deactivated."})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Update User"]})})]})]})]})}):null}const xd=[{module:"documents",label:"Documents",description:"Manage document records and workflow",actions:[{action:"create",label:"Create Documents"},{action:"read",label:"View Documents"},{action:"update",label:"Edit Documents"},{action:"delete",label:"Delete Documents"}]},{module:"payments",label:"Payments",description:"Manage payment records and transactions",actions:[{action:"create",label:"Create Payments"},{action:"read",label:"View Payments"},{action:"update",label:"Edit Payments"},{action:"delete",label:"Delete Payments"}]},{module:"challans",label:"Challans",description:"Manage challan forms and submissions",actions:[{action:"create",label:"Create Challans"},{action:"read",label:"View Challans"},{action:"update",label:"Edit Challans"},{action:"approve",label:"Approve Challans"}]},{module:"customers",label:"Customers",description:"Manage customer information",actions:[{action:"create",label:"Create Customers"},{action:"read",label:"View Customers"},{action:"update",label:"Edit Customers"},{action:"delete",label:"Delete Customers"}]},{module:"builders",label:"Builders",description:"Manage builder information",actions:[{action:"create",label:"Create Builders"},{action:"read",label:"View Builders"},{action:"update",label:"Edit Builders"},{action:"delete",label:"Delete Builders"}]},{module:"users",label:"Users",description:"Manage system users (Staff Admin only)",actions:[{action:"create",label:"Create Users"},{action:"read",label:"View Users"},{action:"update",label:"Edit Users"},{action:"delete",label:"Delete Users"}]}];function Ry({isOpen:t,onClose:s,user:r,onUpdatePermissions:n}){const[a,l]=j.useState([]),[i,o]=j.useState(!1);j.useEffect(()=>{if(r){const g=[];let b=1;xd.forEach(v=>{v.actions.forEach(d=>{const y=r.permissions.find(p=>p.module===v.module&&p.action===d.action);g.push({id:(y==null?void 0:y.id)||b.toString(),module:v.module,action:d.action,granted:(y==null?void 0:y.granted)||!1}),b++})}),l(g)}},[r]);const c=(g,b,v)=>{l(d=>d.map(y=>y.module===g&&y.action===b?{...y,granted:v}:y))},x=(g,b)=>{l(v=>v.map(d=>d.module===g?{...d,granted:b}:d))},u=async g=>{g.preventDefault(),o(!0);try{await n(r.id,a),s()}catch(b){console.error("Error updating permissions:",b)}finally{o(!1)}},m=g=>a.filter(b=>b.module===g),f=g=>{const b=m(g);return b.length>0&&b.every(v=>v.granted)},h=g=>{const b=m(g);return b.some(v=>v.granted)&&!b.every(v=>v.granted)};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ms,{className:"w-5 h-5 mr-2 text-green-600"}),"Manage Permissions - ",r.name]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Role"}),e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:r.role.replace("_"," ")})]})]})}),r.role==="main_admin"&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-900 mb-1",children:"Main Admin Account"}),e.jsx("p",{className:"text-sm text-red-800",children:"Main Admin has full system access. Permissions cannot be modified."})]})]})}),r.role!=="main_admin"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-6",children:xd.map(g=>{const b=m(g.module),v=f(g.module),d=h(g.module);return g.module==="users"&&r.role!=="staff_admin"?null:e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:g.label}),e.jsx("p",{className:"text-sm text-gray-600",children:g.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>x(g.module,!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Grant All"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{type:"button",onClick:()=>x(g.module,!1),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Revoke All"}),e.jsxs("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${v?"bg-green-500 border-green-500":d?"bg-yellow-500 border-yellow-500":"border-gray-300"}`,children:[v&&e.jsx(lx,{className:"w-3 h-3 text-white"}),d&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.actions.map(y=>{const p=b.find(C=>C.action===y.action);return e.jsxs("label",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:(p==null?void 0:p.granted)||!1,onChange:C=>c(g.module,y.action,C.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.label}),e.jsxs("p",{className:"text-xs text-gray-500",children:[g.module,".",y.action]})]})]},y.action)})})})]},g.module)})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Permission Summary"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsxs("p",{children:["Total Permissions: ",a.length]}),e.jsxs("p",{children:["Granted: ",a.filter(g=>g.granted).length]}),e.jsxs("p",{children:["Revoked: ",a.filter(g=>!g.granted).length]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),r.role!=="main_admin"&&e.jsx("button",{type:"submit",disabled:i,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Update Permissions"]})})]})]})]})}):null}const hd=[{type:"document_collection",label:"Document Collection",description:"Field collection of documents from customers"},{type:"data_entry",label:"Data Entry",description:"Entering document data into the system"},{type:"document_delivery",label:"Document Delivery",description:"Delivering completed documents to customers"},{type:"challan_creation",label:"Challan Creation",description:"Creating and managing challan forms"},{type:"payment_processing",label:"Payment Processing",description:"Processing and tracking payments"},{type:"customer_follow_up",label:"Customer Follow Up",description:"Following up with customers for various requirements"},{type:"document_verification",label:"Document Verification",description:"Verifying document accuracy and completeness"},{type:"registration_follow_up",label:"Registration Follow Up",description:"Following up on document registration status"},{type:"quality_check",label:"Quality Check",description:"Quality assurance and review tasks"},{type:"custom",label:"Custom Tasks",description:"General purpose and custom tasks"}];function Oy({isOpen:t,onClose:s,user:r,onUpdatePermissions:n,currentPermissions:a}){const[l,i]=j.useState([]),[o,c]=j.useState(!1);j.useEffect(()=>{if(r&&t){const h=hd.map(g=>a.find(v=>v.taskType===g.type)||{id:`${r.id}-${g.type}`,userId:r.id,taskType:g.type,permissions:{canView:!1,canCreate:!1,canEdit:!1,canDelete:!1,canAssign:!1,canComment:!1,canChangeStatus:!1,canViewAllTasks:!1,canEditPriority:!1,canSetDueDate:!1,canAddAttachments:!1,canViewComments:!1},restrictions:{maxTasksPerDay:10,allowedStatuses:["pending","in_progress","completed"],canOnlyViewOwnTasks:!0}});i(h)}},[r,a,t]);const x=(h,g,b)=>{i(v=>v.map(d=>d.taskType===h?{...d,permissions:{...d.permissions,[g]:b}}:d))},u=(h,g,b)=>{i(v=>v.map(d=>d.taskType===h?{...d,restrictions:{...d.restrictions,[g]:b}}:d))},m=(h,g)=>{i(b=>b.map(v=>v.taskType===h?{...v,permissions:{canView:g,canCreate:g,canEdit:g,canDelete:g&&(r.role==="main_admin"||r.role==="staff_admin"),canAssign:g&&(r.role==="main_admin"||r.role==="staff_admin"),canComment:g,canChangeStatus:g,canViewAllTasks:g&&(r.role==="main_admin"||r.role==="staff_admin"),canEditPriority:g&&(r.role==="main_admin"||r.role==="staff_admin"),canSetDueDate:g,canAddAttachments:g,canViewComments:g}}:v))},f=async h=>{h.preventDefault(),c(!0);try{const g=l.filter(b=>Object.values(b.permissions).some(v=>v===!0));await n(r.id,g),s()}catch(g){console.error("Error updating task permissions:",g)}finally{c(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ms,{className:"w-5 h-5 mr-2 text-green-600"}),"Task Permissions - ",r.name]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:f,className:"p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.email})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Role"}),e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:r.role.replace("_"," ")})]})]})}),e.jsx("div",{className:"space-y-6",children:hd.map(h=>{var v,d;const g=l.find(y=>y.taskType===h.type);if(!g)return null;const b=Object.values(g.permissions).some(y=>y===!0);return e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(tt,{className:"w-5 h-5 mr-2 text-blue-600"}),h.label]}),e.jsx("p",{className:"text-sm text-gray-600",children:h.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>m(h.type,!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Grant All"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{type:"button",onClick:()=>m(h.type,!1),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Revoke All"}),e.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${b?"bg-green-500 border-green-500":"border-gray-300"}`,children:b&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:"Basic Permissions"}),e.jsx("div",{className:"space-y-2",children:[{key:"canView",label:"View Tasks"},{key:"canCreate",label:"Create Tasks"},{key:"canEdit",label:"Edit Tasks"},{key:"canDelete",label:"Delete Tasks"}].map(y=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:g.permissions[y.key],onChange:p=>x(h.type,y.key,p.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:y.label})]},y.key))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:"Advanced Permissions"}),e.jsx("div",{className:"space-y-2",children:[{key:"canAssign",label:"Assign Tasks"},{key:"canChangeStatus",label:"Change Status"},{key:"canEditPriority",label:"Edit Priority"},{key:"canSetDueDate",label:"Set Due Date"}].map(y=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:g.permissions[y.key],onChange:p=>x(h.type,y.key,p.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:y.label})]},y.key))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:"Communication"}),e.jsx("div",{className:"space-y-2",children:[{key:"canComment",label:"Add Comments"},{key:"canViewComments",label:"View Comments"},{key:"canAddAttachments",label:"Add Attachments"},{key:"canViewAllTasks",label:"View All Tasks"}].map(y=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:g.permissions[y.key],onChange:p=>x(h.type,y.key,p.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:y.label})]},y.key))})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:"Restrictions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Max Tasks Per Day"}),e.jsx("input",{type:"number",value:((v=g.restrictions)==null?void 0:v.maxTasksPerDay)||10,onChange:y=>u(h.type,"maxTasksPerDay",parseInt(y.target.value)),className:"w-full p-2 border border-gray-300 rounded text-sm",min:"1",max:"50"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:((d=g.restrictions)==null?void 0:d.canOnlyViewOwnTasks)||!1,onChange:y=>u(h.type,"canOnlyViewOwnTasks",y.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Can only view own tasks"})]})})]})]})]})]},h.type)})}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Permission Guidelines"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Field Collection Staff:"})," Should have permissions for document_collection tasks"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Data Entry Staff:"})," Should have permissions for data_entry tasks"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Challan Staff:"})," Should have permissions for challan_creation tasks"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Document Delivery Staff:"})," Should have permissions for document_delivery tasks"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Admin roles:"})," Can have permissions for multiple task types"]})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Update Permissions"]})})]})]})]})}):null}const Uy={main_admin:"bg-red-100 text-red-800",staff_admin:"bg-orange-100 text-orange-800",challan_staff:"bg-blue-100 text-blue-800",field_collection_staff:"bg-green-100 text-green-800",data_entry_staff:"bg-purple-100 text-purple-800",document_delivery_staff:"bg-indigo-100 text-indigo-800"},Fy={main_admin:"Main Admin",staff_admin:"Staff Admin",challan_staff:"Challan Staff",field_collection_staff:"Field Collection",data_entry_staff:"Data Entry",document_delivery_staff:"Document Delivery"};function zy(){const{hasPermission:t,user:s}=ee(),{users:r,createUser:n,updateUser:a,updateUserPermissions:l,toggleUserStatus:i}=fs(),[o,c]=j.useState(""),[x,u]=j.useState("all"),[m,f]=j.useState("all"),[h,g]=j.useState(!1),[b,v]=j.useState(!1),[d,y]=j.useState(!1),[p,C]=j.useState(!1),[k,N]=j.useState(null),{getUserTaskPermissions:S,updateTaskPermissions:w}=qt(),D=r.filter($=>{const Y=$.name.toLowerCase().includes(o.toLowerCase())||$.email.toLowerCase().includes(o.toLowerCase()),B=x==="all"||$.role===x,W=m==="all"||m==="active"&&$.isActive||m==="inactive"&&!$.isActive;return Y&&B&&W}),A=t("users","create"),_=t("users","update"),L=(s==null?void 0:s.role)==="main_admin",E=async $=>{await n($)},R=$=>{N($),v(!0)},O=async($,Y)=>{await a($,Y)},U=$=>{N($),y(!0)},M=$=>{N($),C(!0)},P=async($,Y)=>{await l($,Y)},F=async($,Y)=>{await w($,Y)},H=async $=>{await i($)},I=(()=>{const $=r.length,Y=r.filter(Z=>Z.isActive).length,B=$-Y,W=r.filter(Z=>Z.lastLogin&&Z.lastLogin>new Date(Date.now()-7*24*60*60*1e3)).length;return{totalUsers:$,activeUsers:Y,inactiveUsers:B,recentLogins:W}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and their permissions"})]}),A&&e.jsxs("button",{onClick:()=>g(!0),className:"mt-4 sm:mt-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"New User"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.totalUsers})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(X,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.activeUsers})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Inactive Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.inactiveUsers})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:e.jsx(nr,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Recent Logins"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:I.recentLogins})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(pe,{className:"w-6 h-6 text-purple-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:o,onChange:$=>c($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Cr,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:x,onChange:$=>u($.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"main_admin",children:"Main Admin"}),e.jsx("option",{value:"staff_admin",children:"Staff Admin"}),e.jsx("option",{value:"challan_staff",children:"Challan Staff"}),e.jsx("option",{value:"field_collection_staff",children:"Field Collection"}),e.jsx("option",{value:"data_entry_staff",children:"Data Entry"}),e.jsx("option",{value:"document_delivery_staff",children:"Document Delivery"})]}),e.jsxs("select",{value:m,onChange:$=>f($.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"User"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Role"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Last Login"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Created"}),e.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:D.map($=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-sm",children:$.name.split(" ").map(Y=>Y[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:$.name}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(Ae,{className:"w-4 h-4 mr-1"}),$.email]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ms,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${Uy[$.role]}`,children:Fy[$.role]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center space-x-2",children:$.isActive?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-700",children:"Active"})]}):e.jsxs(e.Fragment,{children:[e.jsx(nr,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm text-red-700",children:"Inactive"})]})})}),e.jsx("td",{className:"px-6 py-4",children:$.lastLogin?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:G($.lastLogin,"MMM dd, yyyy HH:mm")})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"Never"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:G($.createdAt,"MMM dd, yyyy")})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),_&&e.jsx("button",{onClick:()=>R($),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(Ye,{className:"w-4 h-4"})}),L&&e.jsx("button",{onClick:()=>U($),className:"p-2 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Manage Permissions",children:e.jsx(Cn,{className:"w-4 h-4"})}),L&&e.jsx("button",{onClick:()=>M($),className:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Manage Task Permissions",children:e.jsx(tt,{className:"w-4 h-4"})}),_&&$.role!=="main_admin"&&$.id!==(s==null?void 0:s.id)&&e.jsx("button",{onClick:()=>H($.id),className:`p-2 rounded-lg transition-colors ${$.isActive?"text-gray-500 hover:text-red-600 hover:bg-red-50":"text-gray-500 hover:text-green-600 hover:bg-green-50"}`,title:$.isActive?"Deactivate User":"Activate User",children:$.isActive?e.jsx(nr,{className:"w-4 h-4"}):e.jsx(te,{className:"w-4 h-4"})})]})})]},$.id))})]})}),D.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),e.jsx("p",{className:"text-gray-500",children:o||x!=="all"||m!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first user"})]})]}),L&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ms,{className:"w-6 h-6 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Permission Management"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Main Admin:"})," Full system access - cannot be modified"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Staff Admin:"})," Permissions dynamically assigned by Main Admin"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Challan Staff:"})," Can fill challan details but cannot modify agreement values"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Field Collection Staff:"})," Limited to collection status updates and file uploads"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Data Entry Staff:"})," Limited to data entry tasks for assigned documents"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Document Delivery Staff:"})," Limited to delivery status and proof uploads"]})]})]})]})}),e.jsx(My,{isOpen:h,onClose:()=>g(!1),onCreateUser:E}),k&&e.jsx(Ly,{isOpen:b,onClose:()=>{v(!1),N(null)},user:k,onUpdateUser:O,currentUser:s}),k&&e.jsx(Ry,{isOpen:d,onClose:()=>{y(!1),N(null)},user:k,onUpdatePermissions:P}),k&&e.jsx(Oy,{isOpen:p,onClose:()=>{C(!1),N(null)},user:k,onUpdatePermissions:F,currentPermissions:S(k.id)})]})}function $y(){ee();const{isConnected:t,reconnect:s}=Vt(),[r,n]=j.useState("database"),[a,l]=j.useState(!1),[i,o]=j.useState(!1),[c,x]=j.useState(null),[u,m]=j.useState(!1),[f,h]=j.useState({gmail:{enabled:!1,config:{clientId:"",apiKey:""}},mysql:{enabled:!1,config:{host:"",port:3306,database:"",username:"",password:"",ssl:"preferred"}},appearance:{theme:"light",colorScheme:"orange"}});j.useEffect(()=>{const p=localStorage.getItem("apiConfig");if(p)try{const C=JSON.parse(p);h({...f,...C,appearance:{...f.appearance,...C.appearance}}),C.appearance&&C.appearance.colorScheme&&g(C.appearance.colorScheme)}catch(C){console.error("Error loading saved config:",C)}},[]);const g=p=>{const C=document.documentElement;switch(p){case"orange":C.style.setProperty("--color-primary","#ea580c"),C.style.setProperty("--color-secondary","#dc2626");break;case"blue":C.style.setProperty("--color-primary","#2563eb"),C.style.setProperty("--color-secondary","#1d4ed8");break;case"green":C.style.setProperty("--color-primary","#16a34a"),C.style.setProperty("--color-secondary","#15803d");break;case"purple":C.style.setProperty("--color-primary","#9333ea"),C.style.setProperty("--color-secondary","#7c3aed");break}},b=p=>{h({...f,appearance:{...f.appearance,colorScheme:p}}),g(p)},v=async()=>{l(!0);try{localStorage.setItem("apiConfig",JSON.stringify(f)),f.mysql.enabled&&await s(),alert("Configuration saved successfully!")}catch(p){console.error("Error saving config:",p),alert("Error saving configuration")}finally{l(!1)}},d=async()=>{if(!f.mysql.enabled||!f.mysql.config.host){x({success:!1,message:"Please fill in all required MySQL configuration fields"});return}o(!0),x(null);try{const p=await fetch("/api/test-db-connection.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f.mysql.config)});if(p.ok){const C=await p.json();x({success:C.success,message:C.success?"Database connection successful!":C.error||"Connection failed"})}else x({success:!1,message:"Failed to test connection"})}catch{x({success:!1,message:"Network error while testing connection"})}finally{o(!1)}},y=[{id:"database",label:"MySQL Database",icon:Jc},{id:"gmail",label:"Gmail API",icon:Ae},{id:"security",label:"Security",icon:ms},{id:"notifications",label:"Notifications",icon:Ta},{id:"appearance",label:"Appearance",icon:Zc}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure your application settings and integrations"})]}),e.jsx("div",{className:`rounded-xl p-4 border ${t?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[t?e.jsx(te,{className:"w-5 h-5 text-green-600"}):e.jsx(ne,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:`font-medium ${t?"text-green-900":"text-red-900"}`,children:["Database Status: ",t?"Connected":"Disconnected"]}),e.jsx("p",{className:`text-sm ${t?"text-green-800":"text-red-800"}`,children:t?"Your database is connected and ready to use.":"Configure your MySQL database below to enable data persistence."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("nav",{className:"space-y-2",children:y.map(p=>{const C=p.icon;return e.jsxs("button",{onClick:()=>n(p.id),className:`w-full flex items-center space-x-3 px-4 py-3 text-left rounded-lg transition-colors ${r===p.id?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:p.label})]},p.id)})})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r==="database"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Jc,{className:"w-5 h-5 mr-2 text-blue-600"}),"MySQL Database Configuration"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Configure your MySQL database connection for data persistence"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.mysql.enabled,onChange:p=>h({...f,mysql:{...f.mysql,enabled:p.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:f.mysql.enabled?"Enabled":"Disabled"})]})]}),f.mysql.enabled&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Host *"}),e.jsx("input",{type:"text",value:f.mysql.config.host,onChange:p=>h({...f,mysql:{...f.mysql,config:{...f.mysql.config,host:p.target.value}}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"localhost"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Port"}),e.jsx("input",{type:"number",value:f.mysql.config.port,onChange:p=>h({...f,mysql:{...f.mysql,config:{...f.mysql.config,port:parseInt(p.target.value)}}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"3306"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Database Name *"}),e.jsx("input",{type:"text",value:f.mysql.config.database,onChange:p=>h({...f,mysql:{...f.mysql,config:{...f.mysql.config,database:p.target.value}}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"om_services_db"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),e.jsx("input",{type:"text",value:f.mysql.config.username,onChange:p=>h({...f,mysql:{...f.mysql,config:{...f.mysql.config,username:p.target.value}}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"database_user"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:f.mysql.config.password,onChange:p=>h({...f,mysql:{...f.mysql,config:{...f.mysql.config,password:p.target.value}}}),className:"w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"database_password"}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(hr,{className:"w-4 h-4"}):e.jsx(Ee,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SSL Mode"}),e.jsxs("select",{value:f.mysql.config.ssl,onChange:p=>h({...f,mysql:{...f.mysql,config:{...f.mysql.config,ssl:p.target.value}}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"disabled",children:"Disabled"}),e.jsx("option",{value:"preferred",children:"Preferred"}),e.jsx("option",{value:"required",children:"Required"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:d,disabled:i,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:i?e.jsxs(e.Fragment,{children:[e.jsx(pn,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zg,{className:"w-4 h-4 mr-2"}),"Test Connection"]})}),e.jsxs("button",{onClick:()=>{const p=`-- Om Services Complete Database Schema
-- Generated on ${new Date().toISOString()}
-- This schema includes all tables for the complete Om Services application

CREATE DATABASE IF NOT EXISTS ${f.mysql.config.database};
USE ${f.mysql.config.database};

-- Users table
CREATE TABLE IF NOT EXISTS users (
  id INT PRIMARY KEY AUTO_INCREMENT,
  email VARCHAR(255) UNIQUE NOT NULL,
  name VARCHAR(255) NOT NULL,
  role ENUM('main_admin', 'staff_admin', 'challan_staff', 'field_collection_staff', 'data_entry_staff', 'document_delivery_staff') NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  last_login TIMESTAMP NULL,
  INDEX idx_email (email),
  INDEX idx_role (role),
  INDEX idx_active (is_active)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Documents table
CREATE TABLE IF NOT EXISTS documents (
  id INT PRIMARY KEY AUTO_INCREMENT,
  document_number VARCHAR(100) UNIQUE NOT NULL,
  customer_name VARCHAR(255) NOT NULL,
  customer_phone VARCHAR(20) NOT NULL,
  customer_email VARCHAR(255),
  builder_name VARCHAR(255) NOT NULL,
  property_details TEXT NOT NULL,
  document_type ENUM('agreement', 'lease_deed', 'sale_deed', 'mutation', 'partition_deed', 'gift_deed') NOT NULL,
  status ENUM('pending_collection', 'collected', 'data_entry_pending', 'data_entry_completed', 'registration_pending', 'registered', 'ready_for_delivery', 'delivered') DEFAULT 'pending_collection',
  assigned_to VARCHAR(255),
  collection_date TIMESTAMP NULL,
  data_entry_date TIMESTAMP NULL,
  registration_date TIMESTAMP NULL,
  delivery_date TIMESTAMP NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_document_number (document_number),
  INDEX idx_customer_phone (customer_phone),
  INDEX idx_status (status),
  INDEX idx_document_type (document_type),
  INDEX idx_assigned_to (assigned_to),
  INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Customers table
CREATE TABLE IF NOT EXISTS customers (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  phone VARCHAR(20) UNIQUE NOT NULL,
  email VARCHAR(255),
  address TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_phone (phone),
  INDEX idx_email (email),
  INDEX idx_name (name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Builders table
CREATE TABLE IF NOT EXISTS builders (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL,
  contact_person VARCHAR(255) NOT NULL,
  phone VARCHAR(20) NOT NULL,
  email VARCHAR(255),
  address TEXT NOT NULL,
  registration_number VARCHAR(100),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_name (name),
  INDEX idx_phone (phone),
  INDEX idx_registration_number (registration_number)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Payments table
CREATE TABLE IF NOT EXISTS payments (
  id INT PRIMARY KEY AUTO_INCREMENT,
  document_id INT NOT NULL,
  agreement_value DECIMAL(15,2) NOT NULL,
  consideration_amount DECIMAL(15,2) NOT NULL,
  dhc_amount DECIMAL(15,2) NOT NULL,
  total_amount DECIMAL(15,2) NOT NULL,
  paid_amount DECIMAL(15,2) DEFAULT 0,
  pending_amount DECIMAL(15,2) NOT NULL,
  payment_status ENUM('pending', 'partial', 'completed', 'refunded') DEFAULT 'pending',
  payment_method ENUM('cash', 'cheque', 'online', 'dd'),
  payment_date DATE,
  challan_number VARCHAR(100),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_document_id (document_id),
  INDEX idx_payment_status (payment_status),
  INDEX idx_challan_number (challan_number),
  FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Challans table
CREATE TABLE IF NOT EXISTS challans (
  id INT PRIMARY KEY AUTO_INCREMENT,
  document_id INT NOT NULL,
  challan_number VARCHAR(100) UNIQUE NOT NULL,
  amount DECIMAL(15,2) NOT NULL,
  filled_by VARCHAR(255) NOT NULL,
  filled_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  status ENUM('draft', 'submitted', 'approved', 'rejected') DEFAULT 'draft',
  notes TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_challan_number (challan_number),
  INDEX idx_document_id (document_id),
  INDEX idx_status (status),
  FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Tasks table
CREATE TABLE IF NOT EXISTS tasks (
  id INT PRIMARY KEY AUTO_INCREMENT,
  title VARCHAR(255) NOT NULL,
  description TEXT NOT NULL,
  type ENUM('document_collection', 'data_entry', 'document_delivery', 'challan_creation', 'payment_processing', 'customer_follow_up', 'document_verification', 'registration_follow_up', 'quality_check', 'custom') NOT NULL,
  priority ENUM('low', 'medium', 'high', 'urgent') DEFAULT 'medium',
  status ENUM('pending', 'in_progress', 'on_hold', 'completed', 'cancelled', 'overdue') DEFAULT 'pending',
  assigned_to VARCHAR(255) NOT NULL,
  assigned_by VARCHAR(255) NOT NULL,
  document_id INT,
  customer_id INT,
  builder_id INT,
  due_date TIMESTAMP NULL,
  completed_at TIMESTAMP NULL,
  estimated_hours DECIMAL(4,2),
  actual_hours DECIMAL(4,2),
  tags JSON,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_assigned_to (assigned_to),
  INDEX idx_status (status),
  INDEX idx_type (type),
  INDEX idx_priority (priority),
  FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE SET NULL,
  FOREIGN KEY (customer_id) REFERENCES customers(id) ON DELETE SET NULL,
  FOREIGN KEY (builder_id) REFERENCES builders(id) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Task comments table
CREATE TABLE IF NOT EXISTS task_comments (
  id INT PRIMARY KEY AUTO_INCREMENT,
  task_id INT NOT NULL,
  content TEXT NOT NULL,
  author_id VARCHAR(255) NOT NULL,
  author_name VARCHAR(255) NOT NULL,
  is_internal BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_task_id (task_id),
  FOREIGN KEY (task_id) REFERENCES tasks(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Attendance records table
CREATE TABLE IF NOT EXISTS attendance_records (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  date DATE NOT NULL,
  clock_in_time TIMESTAMP NULL,
  clock_out_time TIMESTAMP NULL,
  status ENUM('present', 'absent', 'late', 'half_day', 'on_leave', 'holiday', 'work_from_home') DEFAULT 'present',
  total_hours DECIMAL(4,2),
  break_time INT DEFAULT 60,
  overtime DECIMAL(4,2) DEFAULT 0,
  location VARCHAR(255),
  notes TEXT,
  approved_by VARCHAR(255),
  approved_at TIMESTAMP NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  UNIQUE KEY unique_user_date (user_id, date),
  INDEX idx_user_id (user_id),
  INDEX idx_date (date),
  INDEX idx_status (status),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Leave requests table
CREATE TABLE IF NOT EXISTS leave_requests (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  leave_type ENUM('sick_leave', 'casual_leave', 'annual_leave', 'maternity_leave', 'paternity_leave', 'emergency_leave') NOT NULL,
  start_date DATE NOT NULL,
  end_date DATE NOT NULL,
  total_days INT NOT NULL,
  reason TEXT NOT NULL,
  status ENUM('pending', 'approved', 'rejected', 'cancelled') DEFAULT 'pending',
  applied_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  reviewed_by VARCHAR(255),
  reviewed_at TIMESTAMP NULL,
  review_comments TEXT,
  INDEX idx_user_id (user_id),
  INDEX idx_status (status),
  INDEX idx_start_date (start_date),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Salary records table
CREATE TABLE IF NOT EXISTS salary_records (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  user_name VARCHAR(255) NOT NULL,
  user_role VARCHAR(50) NOT NULL,
  base_salary DECIMAL(10,2) NOT NULL,
  allowances JSON,
  deductions JSON,
  overtime JSON,
  bonus DECIMAL(10,2) DEFAULT 0,
  gross_salary DECIMAL(10,2) NOT NULL,
  net_salary DECIMAL(10,2) NOT NULL,
  pay_period_month INT NOT NULL,
  pay_period_year INT NOT NULL,
  pay_date DATE NOT NULL,
  status ENUM('draft', 'pending_approval', 'approved', 'paid', 'cancelled') DEFAULT 'draft',
  payment_method ENUM('bank_transfer', 'cash', 'cheque', 'upi') DEFAULT 'bank_transfer',
  bank_details JSON,
  notes TEXT,
  approved_by VARCHAR(255),
  approved_at TIMESTAMP NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_user_id (user_id),
  INDEX idx_pay_period (pay_period_month, pay_period_year),
  INDEX idx_status (status),
  INDEX idx_pay_date (pay_date),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Staff salary configurations table
CREATE TABLE IF NOT EXISTS staff_salary_configs (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  base_salary DECIMAL(10,2) NOT NULL,
  allowances JSON,
  deductions JSON,
  overtime_rate DECIMAL(6,2) DEFAULT 0,
  payment_method ENUM('bank_transfer', 'cash', 'cheque', 'upi') DEFAULT 'bank_transfer',
  bank_details JSON,
  is_active BOOLEAN DEFAULT TRUE,
  effective_from DATE NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_user_id (user_id),
  INDEX idx_active (is_active),
  INDEX idx_effective_from (effective_from),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Document files table
CREATE TABLE IF NOT EXISTS document_files (
  id INT PRIMARY KEY AUTO_INCREMENT,
  document_id INT NOT NULL,
  file_name VARCHAR(255) NOT NULL,
  file_type ENUM('scan', 'photo', 'document') NOT NULL,
  file_url VARCHAR(500) NOT NULL,
  uploaded_by VARCHAR(255) NOT NULL,
  uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_document_id (document_id),
  FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- User permissions table
CREATE TABLE IF NOT EXISTS user_permissions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  module VARCHAR(50) NOT NULL,
  action VARCHAR(50) NOT NULL,
  granted BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  UNIQUE KEY unique_user_permission (user_id, module, action),
  INDEX idx_user_id (user_id),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Task permissions table
CREATE TABLE IF NOT EXISTS task_permissions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  task_type ENUM('document_collection', 'data_entry', 'document_delivery', 'challan_creation', 'payment_processing', 'customer_follow_up', 'document_verification', 'registration_follow_up', 'quality_check', 'custom') NOT NULL,
  permissions JSON NOT NULL,
  restrictions JSON,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  UNIQUE KEY unique_user_task_type (user_id, task_type),
  INDEX idx_user_id (user_id),
  INDEX idx_task_type (task_type),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- App settings table
CREATE TABLE IF NOT EXISTS app_settings (
  id INT PRIMARY KEY AUTO_INCREMENT,
  setting_key VARCHAR(100) UNIQUE NOT NULL,
  setting_value JSON NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_setting_key (setting_key)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Activity logs table
CREATE TABLE IF NOT EXISTS activity_logs (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT,
  user_name VARCHAR(255),
  action VARCHAR(255) NOT NULL,
  module VARCHAR(100) NOT NULL,
  record_id VARCHAR(100),
  details TEXT,
  ip_address VARCHAR(45),
  user_agent TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_user_id (user_id),
  INDEX idx_module (module),
  INDEX idx_action (action),
  INDEX idx_created_at (created_at),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Notifications table
CREATE TABLE IF NOT EXISTS notifications (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id INT NOT NULL,
  title VARCHAR(255) NOT NULL,
  message TEXT NOT NULL,
  type ENUM('info', 'success', 'warning', 'error') DEFAULT 'info',
  is_read BOOLEAN DEFAULT FALSE,
  action_url VARCHAR(500),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  read_at TIMESTAMP NULL,
  INDEX idx_user_id (user_id),
  INDEX idx_is_read (is_read),
  INDEX idx_created_at (created_at),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Insert default admin user
INSERT IGNORE INTO users (email, name, role, password_hash, is_active) 
VALUES ('admin@omservices.com', 'Main Admin', 'main_admin', '$2b$10$rGKqDvQKNGnwxirsQg8OUeEcDNbpTLdU7ErMkqm6wjvLOKqm6wjvL', TRUE);

-- Insert default app settings
INSERT IGNORE INTO app_settings (setting_key, setting_value) VALUES
('gmail_config', '{"enabled": false, "clientId": "", "apiKey": ""}'),
('appearance_config', '{"theme": "light", "colorScheme": "orange"}'),
('notification_config', '{"email": true, "browser": true, "sound": false}'),
('security_config', '{"passwordMinLength": 8, "requireUppercase": true, "requireSpecialChars": true}');

-- Create additional indexes for performance
CREATE INDEX IF NOT EXISTS idx_documents_customer_name ON documents(customer_name);
CREATE INDEX IF NOT EXISTS idx_documents_builder_name ON documents(builder_name);
CREATE INDEX IF NOT EXISTS idx_payments_total_amount ON payments(total_amount);
CREATE INDEX IF NOT EXISTS idx_challans_amount ON challans(amount);
CREATE INDEX IF NOT EXISTS idx_tasks_due_date ON tasks(due_date);
CREATE INDEX IF NOT EXISTS idx_salary_records_net_salary ON salary_records(net_salary);`,C=new Blob([p],{type:"text/sql"}),k=URL.createObjectURL(C),N=document.createElement("a");N.href=k,N.download=`om_services_complete_schema_${new Date().toISOString().split("T")[0]}.sql`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(k)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center",children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Download Schema"]}),c&&e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg ${c.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[c.success?e.jsx(te,{className:"w-4 h-4"}):e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:c.message})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Database Setup Information"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("p",{children:" Tables will be created automatically when you save the configuration"}),e.jsx("p",{children:" A default admin user will be created: admin@omservices.com / password123"}),e.jsx("p",{children:" All existing data will be preserved if tables already exist"}),e.jsx("p",{children:" Make sure your MySQL user has CREATE, INSERT, UPDATE, DELETE permissions"})]})]})]})]}),r==="gmail"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Ae,{className:"w-5 h-5 mr-2 text-red-600"}),"Gmail API Configuration"]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Configure Gmail API for inbox integration"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f.gmail.enabled,onChange:p=>h({...f,gmail:{...f.gmail,enabled:p.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:f.gmail.enabled?"Enabled":"Disabled"})]})]}),f.gmail.enabled&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google OAuth 2.0 Client ID *"}),e.jsx("input",{type:"text",value:f.gmail.config.clientId,onChange:p=>h({...f,gmail:{...f.gmail,config:{...f.gmail.config,clientId:p.target.value}}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"your-client-id.googleusercontent.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:u?"text":"password",value:f.gmail.config.apiKey,onChange:p=>h({...f,gmail:{...f.gmail,config:{...f.gmail.config,apiKey:p.target.value}}}),className:"w-full p-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"AIza..."}),e.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?e.jsx(hr,{className:"w-4 h-4"}):e.jsx(Ee,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-red-900 mb-3",children:"Gmail API Setup Instructions"}),e.jsxs("div",{className:"text-sm text-red-800 space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"1. Google Cloud Console Setup:"}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsxs("li",{children:[" Go to ",e.jsx("a",{href:"https://console.cloud.google.com",target:"_blank",className:"text-blue-600 hover:text-blue-700",children:"Google Cloud Console"})]}),e.jsx("li",{children:" Create a new project or select existing one"}),e.jsx("li",{children:' Enable Gmail API in "APIs & Services"  "Library"'})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"2. Create OAuth 2.0 Credentials:"}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:' Go to "APIs & Services"  "Credentials"'}),e.jsx("li",{children:' Click "Create Credentials"  "OAuth 2.0 Client IDs"'}),e.jsx("li",{children:' Choose "Web application"'}),e.jsx("li",{children:" Add authorized origins: http://localhost:5173 and your production domain"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"3. Create API Key:"}),e.jsxs("ul",{className:"ml-4 space-y-1",children:[e.jsx("li",{children:' In "Credentials", click "Create Credentials"  "API Key"'}),e.jsx("li",{children:" Restrict the key to Gmail API for security"})]})]})]})]})]})]}),r==="security"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(ms,{className:"w-5 h-5 mr-2 text-green-600"}),"Security Settings"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"Security Features"}),e.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("p",{children:" Role-based access control (RBAC) system"}),e.jsx("p",{children:" Secure password hashing with bcrypt"}),e.jsx("p",{children:" Session-based authentication"}),e.jsx("p",{children:" Permission-based feature access"}),e.jsx("p",{children:" Audit logging for all actions"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Password Policy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Minimum password length"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"8 characters"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Require uppercase letters"}),e.jsx(te,{className:"w-4 h-4 text-green-600"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Require special characters"}),e.jsx(te,{className:"w-4 h-4 text-green-600"})]})]})]})]})]}),r==="notifications"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Ta,{className:"w-5 h-5 mr-2 text-yellow-600"}),"Notification Settings"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Email Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",defaultChecked:!0}),e.jsx("span",{className:"text-sm text-gray-700",children:"New document assignments"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",defaultChecked:!0}),e.jsx("span",{className:"text-sm text-gray-700",children:"Payment status updates"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Task deadline reminders"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"System Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",defaultChecked:!0}),e.jsx("span",{className:"text-sm text-gray-700",children:"Browser notifications"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",defaultChecked:!0}),e.jsx("span",{className:"text-sm text-gray-700",children:"Sound alerts"})]})]})]})]})]}),r==="appearance"&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[e.jsx(Zc,{className:"w-5 h-5 mr-2 text-purple-600"}),"Appearance Settings"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Theme"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-500 transition-colors",children:[e.jsx("div",{className:"w-full h-20 bg-white border border-gray-200 rounded mb-3"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Light Theme"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Clean and bright interface"})]}),e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-500 transition-colors opacity-50",children:[e.jsx("div",{className:"w-full h-20 bg-gray-800 border border-gray-600 rounded mb-3"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Dark Theme"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Coming soon"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Color Scheme"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx("button",{onClick:()=>b("orange"),className:`w-12 h-12 bg-gradient-to-br from-orange-600 to-red-600 rounded-lg cursor-pointer border-2 transition-colors ${f.appearance.colorScheme==="orange"?"border-orange-600":"border-transparent hover:border-orange-600"}`,title:"Orange Theme"}),e.jsx("button",{onClick:()=>b("blue"),className:`w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg cursor-pointer border-2 transition-colors ${f.appearance.colorScheme==="blue"?"border-blue-600":"border-transparent hover:border-blue-600"}`,title:"Blue Theme"}),e.jsx("button",{onClick:()=>b("green"),className:`w-12 h-12 bg-gradient-to-br from-green-600 to-emerald-600 rounded-lg cursor-pointer border-2 transition-colors ${f.appearance.colorScheme==="green"?"border-green-600":"border-transparent hover:border-green-600"}`,title:"Green Theme"}),e.jsx("button",{onClick:()=>b("purple"),className:`w-12 h-12 bg-gradient-to-br from-purple-600 to-pink-600 rounded-lg cursor-pointer border-2 transition-colors ${f.appearance.colorScheme==="purple"?"border-purple-600":"border-transparent hover:border-purple-600"}`,title:"Purple Theme"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Select a color scheme to customize the application's primary colors"})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:v,disabled:a,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx(pn,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})})})})]})})]})]})}const Hy=[],By={pending_collection:"bg-orange-100 text-orange-800 border-orange-300",collected:"bg-green-100 text-green-800 border-green-300",data_entry_pending:"bg-blue-100 text-blue-800 border-blue-300",data_entry_completed:"bg-indigo-100 text-indigo-800 border-indigo-300",registration_pending:"bg-purple-100 text-purple-800 border-purple-300",registered:"bg-emerald-100 text-emerald-800 border-emerald-300",ready_for_delivery:"bg-cyan-100 text-cyan-800 border-cyan-300",delivered:"bg-gray-100 text-gray-800 border-gray-300"};function Vy(){const{user:t}=ee(),{tasks:s,updateTaskStatus:r}=qt(),[n,a]=j.useState(""),[l]=j.useState(Hy),[i,o]=j.useState(null),[c,x]=j.useState(!1),[u,m]=j.useState(""),f=async(p,C)=>{try{await r(p,C)}catch(k){console.error("Error updating task status:",k)}},h=s.filter(p=>p.type==="document_collection"&&(p.status==="pending"||p.status==="in_progress")),g=l.filter(p=>p.documentNumber.toLowerCase().includes(n.toLowerCase())||p.customerName.toLowerCase().includes(n.toLowerCase())||p.propertyDetails.toLowerCase().includes(n.toLowerCase())),b=p=>{o(p),x(!0)},v=()=>{i&&(console.log("Marking as collected:",i.id,u),x(!1),o(null),m(""))},y=(()=>{const p=l.filter(N=>N.status==="pending_collection").length,C=l.filter(N=>N.status==="collected").length,k=l.filter(N=>N.notes.some(S=>S.toLowerCase().includes("priority")||S.toLowerCase().includes("urgent"))).length;return{pending:p,completed:C,urgent:k,total:l.length}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-primary rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Field Collection Tasks"}),e.jsxs("p",{className:"text-orange-100",children:["Welcome ",t==null?void 0:t.name,"! You have ",y.pending," pending collections today."]})]}),e.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:e.jsx(Pe,{className:"w-8 h-8"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Collections"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.pending})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(pe,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed Today"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.completed})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Urgent Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.urgent})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:e.jsx(ne,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.total})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-blue-600"})})]})})]}),h.length>0&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Pe,{className:"w-6 h-6 text-orange-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-orange-900 mb-2",children:"Active Collection Tasks"}),e.jsx("div",{className:"space-y-2",children:h.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-900",children:p.title}),e.jsx("p",{className:"text-sm text-orange-700",children:p.description}),p.documentId&&e.jsxs("p",{className:"text-xs text-orange-600",children:["Document: ",p.documentId]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p.status==="pending"?"bg-gray-100 text-gray-800":p.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:p.status.replace("_"," ").toUpperCase()}),p.status==="pending"&&e.jsx("button",{onClick:()=>f(p.id,"in_progress"),className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors",children:"Start Task"})]})]},p.id))})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by document number, customer name, or property details...",value:n,onChange:p=>a(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:g.map(p=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(Q,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.documentNumber}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:p.documentType.replace("_"," ")})]})]}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full border ${By[p.status]}`,children:p.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(X,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:p.customerName}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{children:p.customerPhone})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ve,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:p.builderName})]}),e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[e.jsx(Pe,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-2",children:p.propertyDetails})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:["Created: ",G(p.createdAt,"MMM dd, yyyy")]})]})]}),p.notes.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Notes:"}),e.jsx("div",{className:"space-y-1",children:p.notes.map((C,k)=>e.jsx("div",{className:"p-2 bg-gray-50 rounded text-sm text-gray-700",children:C},k))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Os,{className:"w-4 h-4 text-blue-500"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors",children:"Call Customer"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),p.status==="pending_collection"&&e.jsxs("button",{onClick:()=>b(p),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"Mark Collected"]})]})]})]})},p.id))}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No collection tasks found"}),e.jsx("p",{className:"text-gray-500",children:n?"Try adjusting your search criteria":"All collections are up to date!"})]}),c&&i&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Mark as Collected: ",i.documentNumber]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collection Notes"}),e.jsx("textarea",{value:u,onChange:p=>m(p.target.value),placeholder:"Add any notes about the collection...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(ax,{className:"w-4 h-4 mr-2"}),"Take Photo"]}),e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Upload File"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:v,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Confirm Collection"})]})]})})})]})}const qy=[],Wy={pending_collection:"bg-gray-100 text-gray-800 border-gray-300",collected:"bg-blue-100 text-blue-800 border-blue-300",data_entry_pending:"bg-yellow-100 text-yellow-800 border-yellow-300",data_entry_completed:"bg-indigo-100 text-indigo-800 border-indigo-300",registration_pending:"bg-purple-100 text-purple-800 border-purple-300",registered:"bg-emerald-100 text-emerald-800 border-emerald-300",ready_for_delivery:"bg-orange-100 text-orange-800 border-orange-300",delivered:"bg-green-100 text-green-800 border-green-300"};function Yy(){const{user:t}=ee(),{tasks:s,updateTaskStatus:r}=qt(),[n,a]=j.useState(""),[l]=j.useState(qy),[i,o]=j.useState(null),[c,x]=j.useState(!1),[u,m]=j.useState(""),f=async(p,C)=>{try{await r(p,C)}catch(k){console.error("Error updating task status:",k)}},h=s.filter(p=>p.type==="document_delivery"&&(p.status==="pending"||p.status==="in_progress")),g=l.filter(p=>p.documentNumber.toLowerCase().includes(n.toLowerCase())||p.customerName.toLowerCase().includes(n.toLowerCase())||p.propertyDetails.toLowerCase().includes(n.toLowerCase())),b=p=>{o(p),x(!0)},v=()=>{i&&(console.log("Marking as delivered:",i.id,u),x(!1),o(null),m(""))},y=(()=>{const p=l.filter(N=>N.status==="ready_for_delivery").length,C=l.filter(N=>N.status==="delivered").length,k=l.filter(N=>N.notes.some(S=>S.toLowerCase().includes("urgent"))).length;return{ready:p,delivered:C,urgent:k,total:l.length}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-primary rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Document Delivery Tasks"}),e.jsxs("p",{className:"text-orange-100",children:["Welcome ",t==null?void 0:t.name,"! You have ",y.ready," documents ready for delivery."]})]}),e.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:e.jsx(Ns,{className:"w-8 h-8"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ready for Delivery"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.ready})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(Ug,{className:"w-6 h-6 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Delivered Today"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.delivered})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Urgent Deliveries"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.urgent})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:e.jsx(ne,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.total})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Ns,{className:"w-6 h-6 text-blue-600"})})]})})]}),h.length>0&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ns,{className:"w-6 h-6 text-green-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-green-900 mb-2",children:"Active Delivery Tasks"}),e.jsx("div",{className:"space-y-2",children:h.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-green-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:p.title}),e.jsx("p",{className:"text-sm text-green-700",children:p.description}),p.documentId&&e.jsxs("p",{className:"text-xs text-green-600",children:["Document: ",p.documentId]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p.status==="pending"?"bg-gray-100 text-gray-800":p.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:p.status.replace("_"," ").toUpperCase()}),p.status==="pending"&&e.jsx("button",{onClick:()=>f(p.id,"in_progress"),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors",children:"Start Task"})]})]},p.id))})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by document number, customer name, or property details...",value:n,onChange:p=>a(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:g.map(p=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center",children:e.jsx(Q,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.documentNumber}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:p.documentType.replace("_"," ")})]})]}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full border ${Wy[p.status]}`,children:p.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(X,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:p.customerName}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{children:p.customerPhone})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ve,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:p.builderName})]}),e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[e.jsx(Pe,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-2",children:p.propertyDetails})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:["Last Updated: ",G(p.updatedAt,"MMM dd, yyyy")]})]})]}),p.notes.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Delivery Instructions:"}),e.jsx("div",{className:"space-y-1",children:p.notes.map((C,k)=>e.jsx("div",{className:`p-2 rounded text-sm ${C.toLowerCase().includes("urgent")?"bg-red-50 text-red-700 border border-red-200":"bg-gray-50 text-gray-700"}`,children:C},k))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Os,{className:"w-4 h-4 text-green-500"}),e.jsx("button",{className:"text-green-600 hover:text-green-700 text-sm font-medium transition-colors",children:"Call Customer"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),p.status==="ready_for_delivery"&&e.jsxs("button",{onClick:()=>b(p),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(Ns,{className:"w-4 h-4 mr-1"}),"Mark Delivered"]})]})]})]})},p.id))}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ns,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No delivery tasks found"}),e.jsx("p",{className:"text-gray-500",children:n?"Try adjusting your search criteria":"All deliveries are up to date!"})]}),c&&i&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Mark as Delivered: ",i.documentNumber]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Notes"}),e.jsx("textarea",{value:u,onChange:p=>m(p.target.value),placeholder:"Add delivery confirmation details, recipient name, etc...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(ax,{className:"w-4 h-4 mr-2"}),"Photo Proof"]}),e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(Is,{className:"w-4 h-4 mr-2"}),"Upload Receipt"]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Important:"})," Please ensure the customer has received all documents and get proper acknowledgment."]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:v,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Confirm Delivery"})]})]})})})]})}const Gy=[],Xy={pending_collection:"bg-gray-100 text-gray-800 border-gray-300",collected:"bg-blue-100 text-blue-800 border-blue-300",data_entry_pending:"bg-yellow-100 text-yellow-800 border-yellow-300",data_entry_completed:"bg-green-100 text-green-800 border-green-300",registration_pending:"bg-purple-100 text-purple-800 border-purple-300",registered:"bg-emerald-100 text-emerald-800 border-emerald-300",ready_for_delivery:"bg-orange-100 text-orange-800 border-orange-300",delivered:"bg-gray-100 text-gray-800 border-gray-300"};function Qy(){const{user:t}=ee(),{tasks:s,updateTaskStatus:r}=qt(),[n,a]=j.useState(""),[l]=j.useState(Gy),[i,o]=j.useState(null),[c,x]=j.useState(!1),[u,m]=j.useState({customerName:"",customerPhone:"",customerEmail:"",builderName:"",propertyDetails:"",agreementValue:"",considerationAmount:"",notes:""}),f=async(p,C)=>{try{await r(p,C)}catch(k){console.error("Error updating task status:",k)}},h=s.filter(p=>p.type==="data_entry"&&(p.status==="pending"||p.status==="in_progress")),g=l.filter(p=>p.documentNumber.toLowerCase().includes(n.toLowerCase())||p.customerName.toLowerCase().includes(n.toLowerCase())||p.propertyDetails.toLowerCase().includes(n.toLowerCase())),b=p=>{o(p),m({customerName:p.customerName,customerPhone:p.customerPhone,customerEmail:p.customerEmail||"",builderName:p.builderName,propertyDetails:p.propertyDetails,agreementValue:"",considerationAmount:"",notes:""}),x(!0)},v=()=>{i&&(console.log("Saving data entry:",i.id,u),x(!1),o(null),m({customerName:"",customerPhone:"",customerEmail:"",builderName:"",propertyDetails:"",agreementValue:"",considerationAmount:"",notes:""}))},y=(()=>{const p=l.filter(N=>N.status==="data_entry_pending").length,C=l.filter(N=>N.status==="data_entry_completed").length,k=l.filter(N=>N.notes.some(S=>S.toLowerCase().includes("priority")||S.toLowerCase().includes("urgent"))).length;return{pending:p,completed:C,urgent:k,total:l.length}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-primary rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Data Entry Tasks"}),e.jsxs("p",{className:"text-orange-100",children:["Welcome ",t==null?void 0:t.name,"! You have ",y.pending," documents waiting for data entry."]})]}),e.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-lg",children:e.jsx(Ye,{className:"w-8 h-8"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Entry"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.pending})]}),e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:e.jsx(pe,{className:"w-6 h-6 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed Today"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.completed})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Priority Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.urgent})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:e.jsx(ne,{className:"w-6 h-6 text-red-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.total})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-blue-600"})})]})})]}),h.length>0&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ye,{className:"w-6 h-6 text-orange-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-orange-900 mb-2",children:"Active Data Entry Tasks"}),e.jsx("div",{className:"space-y-2",children:h.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-900",children:p.title}),e.jsx("p",{className:"text-sm text-orange-700",children:p.description}),p.documentId&&e.jsxs("p",{className:"text-xs text-orange-600",children:["Document: ",p.documentId]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p.status==="pending"?"bg-gray-100 text-gray-800":p.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:p.status.replace("_"," ").toUpperCase()}),p.status==="pending"&&e.jsx("button",{onClick:()=>f(p.id,"in_progress"),className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 rounded text-xs font-medium transition-colors",children:"Start Task"})]})]},p.id))})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by document number, customer name, or property details...",value:n,onChange:p=>a(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:g.map(p=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center",children:e.jsx(Q,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.documentNumber}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:p.documentType.replace("_"," ")})]})]}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full border ${Xy[p.status]}`,children:p.status.replace("_"," ").toUpperCase()})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(X,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:p.customerName}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{children:p.customerPhone})]}),p.customerEmail&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:p.customerEmail})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(ve,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:p.builderName})]}),e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-gray-600",children:[e.jsx(Pe,{className:"w-4 h-4 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-2",children:p.propertyDetails})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:["Last Updated: ",G(p.updatedAt,"MMM dd, yyyy")]})]})]}),p.files.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Available Files:"}),e.jsx("div",{className:"space-y-2",children:p.files.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:C.name})]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm",children:"View"})]},C.id))})]}),p.notes.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Notes:"}),e.jsx("div",{className:"space-y-1",children:p.notes.map((C,k)=>e.jsx("div",{className:`p-2 rounded text-sm ${C.toLowerCase().includes("priority")||C.toLowerCase().includes("urgent")?"bg-red-50 text-red-700 border border-red-200":"bg-gray-50 text-gray-700"}`,children:C},k))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsx(Is,{className:"w-4 h-4"}),e.jsxs("span",{children:[p.files.length," file",p.files.length!==1?"s":""," available"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),p.status==="data_entry_pending"&&e.jsxs("button",{onClick:()=>b(p),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(Ye,{className:"w-4 h-4 mr-1"}),"Start Entry"]})]})]})]})},p.id))}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ye,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No data entry tasks found"}),e.jsx("p",{className:"text-gray-500",children:n?"Try adjusting your search criteria":"All data entry tasks are complete!"})]}),c&&i&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Data Entry: ",i.documentNumber]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Name"}),e.jsx("input",{type:"text",value:u.customerName,onChange:p=>m({...u,customerName:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter customer name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:u.customerPhone,onChange:p=>m({...u,customerPhone:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:u.customerEmail,onChange:p=>m({...u,customerEmail:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Builder Name"}),e.jsx("input",{type:"text",value:u.builderName,onChange:p=>m({...u,builderName:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter builder name"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Details"}),e.jsx("textarea",{value:u.propertyDetails,onChange:p=>m({...u,propertyDetails:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,placeholder:"Enter property details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agreement Value ()"}),e.jsx("input",{type:"number",value:u.agreementValue,onChange:p=>m({...u,agreementValue:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter agreement value"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Consideration Amount ()"}),e.jsx("input",{type:"number",value:u.considerationAmount,onChange:p=>m({...u,considerationAmount:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter consideration amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),e.jsx("textarea",{value:u.notes,onChange:p=>m({...u,notes:p.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,placeholder:"Add any additional notes..."})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[e.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:v,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Save & Complete"]})]})]})})})]})}function pd({isOpen:t,onClose:s}){const{createTask:r,loading:n}=qt(),{users:a}=fs(),{documents:l}=Nt(),{customers:i}=vr();jr();const[o,c]=j.useState({title:"",description:"",type:"custom",priority:"medium",assignedTo:"",documentId:"",customerId:"",builderId:"",dueDate:"",estimatedHours:"",tags:""}),[x,u]=j.useState({}),m=()=>{const h={};return o.title.trim()||(h.title="Task title is required"),o.description.trim()||(h.description="Task description is required"),o.assignedTo||(h.assignedTo="Please assign the task to someone"),u(h),Object.keys(h).length===0},f=async h=>{if(h.preventDefault(),!!m())try{const g={title:o.title,description:o.description,type:o.type,priority:o.priority,assignedTo:o.assignedTo,documentId:o.documentId||void 0,customerId:o.customerId||void 0,builderId:o.builderId||void 0,dueDate:o.dueDate?new Date(o.dueDate):void 0,estimatedHours:o.estimatedHours?parseFloat(o.estimatedHours):void 0,tags:o.tags?o.tags.split(",").map(b=>b.trim()).filter(Boolean):[]};await r(g),s(),c({title:"",description:"",type:"custom",priority:"medium",assignedTo:"",documentId:"",customerId:"",builderId:"",dueDate:"",estimatedHours:"",tags:""}),u({})}catch(g){console.error("Error creating task:",g)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(tt,{className:"w-5 h-5 mr-2 text-blue-600"}),"Create New Task"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:f,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(tt,{className:"w-4 h-4 mr-2 text-blue-600"}),"Task Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Title *"}),e.jsx("input",{type:"text",value:o.title,onChange:h=>c({...o,title:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.title?"border-red-300":"border-gray-300"}`,placeholder:"Enter task title"}),x.title&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Type"}),e.jsxs("select",{value:o.type,onChange:h=>c({...o,type:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"custom",children:"Custom Task"}),e.jsx("option",{value:"document_collection",children:"Document Collection"}),e.jsx("option",{value:"data_entry",children:"Data Entry"}),e.jsx("option",{value:"document_delivery",children:"Document Delivery"}),e.jsx("option",{value:"challan_creation",children:"Challan Creation"}),e.jsx("option",{value:"payment_processing",children:"Payment Processing"}),e.jsx("option",{value:"customer_follow_up",children:"Customer Follow Up"}),e.jsx("option",{value:"document_verification",children:"Document Verification"}),e.jsx("option",{value:"registration_follow_up",children:"Registration Follow Up"}),e.jsx("option",{value:"quality_check",children:"Quality Check"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:o.priority,onChange:h=>c({...o,priority:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:o.description,onChange:h=>c({...o,description:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${x.description?"border-red-300":"border-gray-300"}`,rows:4,placeholder:"Describe the task in detail..."}),x.description&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.description})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2 text-green-600"}),"Assignment & Details"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign To *"}),e.jsxs("select",{value:o.assignedTo,onChange:h=>c({...o,assignedTo:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.assignedTo?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select user"}),a.filter(h=>h.isActive).map(h=>e.jsxs("option",{value:h.id,children:[h.name," (",h.role.replace("_"," "),")"]},h.id))]}),x.assignedTo&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.assignedTo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),e.jsx("input",{type:"datetime-local",value:o.dueDate,onChange:h=>c({...o,dueDate:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Hours"}),e.jsx("input",{type:"number",value:o.estimatedHours,onChange:h=>c({...o,estimatedHours:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.5",step:"0.5",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Related Document"}),e.jsxs("select",{value:o.documentId,onChange:h=>c({...o,documentId:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select document (optional)"}),l.map(h=>e.jsxs("option",{value:h.id,children:[h.documentNumber," - ",h.customerName]},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Related Customer"}),e.jsxs("select",{value:o.customerId,onChange:h=>c({...o,customerId:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select customer (optional)"}),i.map(h=>e.jsxs("option",{value:h.id,children:[h.name," - ",h.phone]},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),e.jsx("input",{type:"text",value:o.tags,onChange:h=>c({...o,tags:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"urgent, follow-up, priority (comma separated)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate multiple tags with commas"})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Task Assignment Guidelines"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Document Collection:"})," Assign to Field Collection Staff"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Data Entry:"})," Assign to Data Entry Staff"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Challan Creation:"})," Assign to Challan Staff"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Document Delivery:"})," Assign to Document Delivery Staff"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Custom Tasks:"})," Can be assigned to any staff member"]})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Create Task"]})})]})]})]})}):null}const Ky={pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",on_hold:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",overdue:"bg-red-100 text-red-800"};function Jy(){const t=jt(),{user:s}=ee(),{tasks:r,updateTaskStatus:n,loading:a}=qt(),[l,i]=j.useState(""),[o,c]=j.useState(!1),[x,u]=j.useState("all"),m=r.filter(g=>{if(!((s==null?void 0:s.role)==="main_admin"||(s==null?void 0:s.role)==="staff_admin"||g.assignedTo===(s==null?void 0:s.id)))return!1;const v=g.title.toLowerCase().includes(l.toLowerCase())||g.description.toLowerCase().includes(l.toLowerCase()),d=x==="all"||g.status===x;return v&&d}),f=async(g,b)=>{try{await n(g,b)}catch(v){console.error("Error updating task status:",v)}},h=g=>g.assignedTo!==(s==null?void 0:s.id)&&(s==null?void 0:s.role)!=="main_admin"&&(s==null?void 0:s.role)!=="staff_admin"?null:e.jsxs("div",{className:"flex items-center space-x-1",children:[g.status==="pending"&&e.jsx("button",{onClick:b=>{b.stopPropagation(),f(g.id,"in_progress")},className:"p-1 rounded bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors",children:e.jsx(Tt,{className:"w-3 h-3"})}),g.status==="in_progress"&&e.jsx("button",{onClick:b=>{b.stopPropagation(),f(g.id,"completed")},className:"p-1 rounded bg-green-100 text-green-600 hover:bg-green-200 transition-colors",children:e.jsx(te,{className:"w-3 h-3"})})]});return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tasks...",value:l,onChange:g=>i(g.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("button",{onClick:()=>c(!o),className:"flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx(Cr,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]}),o&&e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("select",{value:x,onChange:g=>u(g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"on_hold",children:"On Hold"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"overdue",children:"Overdue"})]})}),e.jsx("div",{className:"space-y-3",children:m.map(g=>{const b=g.dueDate&&new Date(g.dueDate)<new Date&&g.status!=="completed",v=b?"overdue":g.status;return e.jsx(Mo,{title:g.title,subtitle:`Assigned to: ${g.assignedTo}`,description:g.description,icon:tt,badge:b?"OVERDUE":g.status.replace("_"," ").toUpperCase(),badgeColor:Ky[v],onClick:()=>t(`/tasks/${g.id}`),actions:h(g)},g.id)})}),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-gray-500 text-sm",children:l||x!=="all"?"Try adjusting your search or filter criteria":"All tasks are complete!"})]})]})}function Zy(){const[t,s]=Lt.useState(!1);return Lt.useEffect(()=>{const r=()=>{s(window.innerWidth<768)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t}const eb={document_collection:"bg-blue-100 text-blue-800",data_entry:"bg-green-100 text-green-800",document_delivery:"bg-purple-100 text-purple-800",challan_creation:"bg-orange-100 text-orange-800",payment_processing:"bg-emerald-100 text-emerald-800",customer_follow_up:"bg-yellow-100 text-yellow-800",document_verification:"bg-indigo-100 text-indigo-800",registration_follow_up:"bg-pink-100 text-pink-800",quality_check:"bg-cyan-100 text-cyan-800",custom:"bg-gray-100 text-gray-800"},tb={low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"},sb={pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",on_hold:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",overdue:"bg-red-100 text-red-800"},rb={pending:pe,in_progress:Tt,on_hold:Ja,completed:te,cancelled:ce,overdue:ne};function nb(){const t=jt(),{user:s,hasPermission:r}=ee(),{tasks:n,getTasksByUser:a,getTaskStats:l,hasTaskPermission:i,updateTaskStatus:o,getTaskRedirectUrl:c,loading:x}=qt(),[u,m]=j.useState(""),[f,h]=j.useState("all"),[g,b]=j.useState("all"),[v,d]=j.useState("all"),[y,p]=j.useState("all"),[C,k]=j.useState(!1);if(Zy())return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Jy,{}),e.jsx(pd,{isOpen:C,onClose:()=>k(!1)})]});const S=(s==null?void 0:s.role)==="main_admin",w=(s==null?void 0:s.role)==="staff_admin",D=S||w||r("tasks","create"),A=n.filter(M=>{if(!S&&!w){const $=i(M.type,"canView"),Y=M.assignedTo===(s==null?void 0:s.id);if(!$&&!Y)return!1}const P=M.title.toLowerCase().includes(u.toLowerCase())||M.description.toLowerCase().includes(u.toLowerCase())||M.tags.some($=>$.toLowerCase().includes(u.toLowerCase())),F=f==="all"||M.type===f,H=g==="all"||M.status===g,T=v==="all"||M.priority===v,I=y==="all"||y==="me"&&M.assignedTo===(s==null?void 0:s.id)||y==="others"&&M.assignedTo!==(s==null?void 0:s.id);return P&&F&&H&&T&&I}),_=l(),L=s?a(s.id):[],E=async(M,P)=>{try{await o(M,P)}catch(F){console.error("Error updating task status:",F)}},R=M=>{const P=c(M);t(P)},O=M=>M.replace("_"," ").replace(/\b\w/g,P=>P.toUpperCase()),U=M=>M.dueDate&&new Date(M.dueDate)<new Date&&M.status!=="completed";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Task Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track all tasks across the organization"})]}),D&&e.jsxs("button",{onClick:()=>k(!0),className:"mt-4 sm:mt-0 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"New Task"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.totalTasks})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(tt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.pendingTasks})]}),e.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:e.jsx(pe,{className:"w-6 h-6 text-gray-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.inProgressTasks})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(Tt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.completedTasks})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.overdueTasks})]}),e.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:e.jsx(ne,{className:"w-6 h-6 text-red-600"})})]})})]}),!S&&!w&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"My Tasks Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Assigned to Me"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:L.length})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold text-orange-600",children:L.filter(M=>M.status==="pending").length})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:L.filter(M=>M.status==="in_progress").length})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:L.filter(M=>U(M)).length})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search tasks...",value:u,onChange:M=>m(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:f,onChange:M=>h(M.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"document_collection",children:"Document Collection"}),e.jsx("option",{value:"data_entry",children:"Data Entry"}),e.jsx("option",{value:"document_delivery",children:"Document Delivery"}),e.jsx("option",{value:"challan_creation",children:"Challan Creation"}),e.jsx("option",{value:"payment_processing",children:"Payment Processing"}),e.jsx("option",{value:"customer_follow_up",children:"Customer Follow Up"}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsxs("select",{value:g,onChange:M=>b(M.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"on_hold",children:"On Hold"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"overdue",children:"Overdue"})]}),e.jsxs("select",{value:v,onChange:M=>d(M.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Priority"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"urgent",children:"Urgent"})]}),e.jsxs("select",{value:y,onChange:M=>p(M.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Tasks"}),e.jsx("option",{value:"me",children:"My Tasks"}),e.jsx("option",{value:"others",children:"Others' Tasks"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[x?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"divide-y divide-gray-200",children:A.map(M=>{const P=rb[M.status],F=U(M),H=F?"overdue":M.status;return e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 hover:text-blue-600 cursor-pointer transition-colors",onClick:()=>R(M),children:M.title}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${eb[M.type]}`,children:O(M.type)}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${tb[M.priority]}`,children:M.priority.toUpperCase()}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${sb[H]}`,children:F?"OVERDUE":M.status.replace("_"," ").toUpperCase()})]})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:M.description}),e.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:["Assigned to: ",M.assignedTo]})]}),M.dueDate&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsxs("span",{className:F?"text-red-600 font-medium":"",children:["Due: ",G(new Date(M.dueDate),"MMM dd, yyyy")]})]}),M.tags.length>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(cx,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex space-x-1",children:[M.tags.slice(0,2).map((T,I)=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:T},I)),M.tags.length>2&&e.jsxs("span",{className:"text-gray-400",children:["+",M.tags.length-2]})]})]}),M.comments.length>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ix,{className:"w-4 h-4"}),e.jsxs("span",{children:[M.comments.length," comments"]})]}),M.attachments.length>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_i,{className:"w-4 h-4"}),e.jsxs("span",{children:[M.attachments.length," files"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>R(M),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Go to Work Page",children:e.jsx(Ee,{className:"w-4 h-4"})}),(M.assignedTo===(s==null?void 0:s.id)||S||w)&&e.jsxs(e.Fragment,{children:[M.status==="pending"&&e.jsx("button",{onClick:()=>E(M.id,"in_progress"),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Start Task",children:e.jsx(Tt,{className:"w-4 h-4"})}),M.status==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>E(M.id,"on_hold"),className:"p-2 text-gray-500 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors",title:"Put on Hold",children:e.jsx(Ja,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(M.id,"completed"),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Complete Task",children:e.jsx(te,{className:"w-4 h-4"})})]}),M.status==="on_hold"&&e.jsx("button",{onClick:()=>E(M.id,"in_progress"),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Resume Task",children:e.jsx(Tt,{className:"w-4 h-4"})})]}),e.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:e.jsx(Ao,{className:"w-4 h-4"})})]})]})},M.id)})}),!x&&A.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-gray-500",children:u||f!=="all"||g!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first task"})]})]}),e.jsx(pd,{isOpen:C,onClose:()=>k(!1)})]})}const ab={pending:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",on_hold:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",overdue:"bg-red-100 text-red-800"},lb={low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"},ib={pending:pe,in_progress:Tt,on_hold:Ja,completed:te,cancelled:ne,overdue:ne};function ob(){const{id:t}=zm(),s=jt(),{tasks:r,updateTaskStatus:n,addTaskComment:a,loading:l}=qt(),{user:i}=ee(),[o,c]=j.useState(r.find(N=>N.id===t)),[x,u]=j.useState(""),[m,f]=j.useState(!1);j.useEffect(()=>{const N=r.find(S=>S.id===t);c(N)},[t,r]);const h=(o==null?void 0:o.assignedTo)===(i==null?void 0:i.id),g=(i==null?void 0:i.role)==="main_admin"||(i==null?void 0:i.role)==="staff_admin",b=h||g,v=(o==null?void 0:o.dueDate)&&new Date(o.dueDate)<new Date&&o.status!=="completed";if(!o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(tt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Task not found"}),e.jsx("p",{className:"text-gray-500",children:"The requested task could not be found."}),e.jsx("button",{onClick:()=>s("/tasks"),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Back to Tasks"})]})});const d=async N=>{try{await n(o.id,N),c(S=>S?{...S,status:N,updatedAt:new Date}:null)}catch(S){console.error("Error updating task status:",S)}},y=async()=>{if(x.trim())try{await a(o.id,x.trim(),m),c(N=>N?{...N,comments:[...N.comments,{id:`COMMENT${Date.now()}`,content:x.trim(),authorId:(i==null?void 0:i.id)||"",authorName:(i==null?void 0:i.name)||"",createdAt:new Date,isInternal:m}],updatedAt:new Date}:null),u(""),f(!1)}catch(N){console.error("Error adding comment:",N)}},p=N=>N.replace("_"," ").replace(/\b\w/g,S=>S.toUpperCase()),C=ib[o.status],k=v?"overdue":o.status;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s("/tasks"),className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors",children:e.jsx(rx,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o.title}),e.jsxs("p",{className:"text-gray-600 capitalize",children:[p(o.type)," Task"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${ab[k]}`,children:v?"OVERDUE":o.status.replace("_"," ").toUpperCase()})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${lb[o.priority]}`,children:o.priority.toUpperCase()}),e.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors",children:e.jsx(Ao,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Description"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:o.description})]}),b&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[o.status==="pending"&&e.jsxs("button",{onClick:()=>d("in_progress"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(Tt,{className:"w-4 h-4 mr-1"}),"Start Task"]}),o.status==="in_progress"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>d("on_hold"),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(Ja,{className:"w-4 h-4 mr-1"}),"Put on Hold"]}),e.jsxs("button",{onClick:()=>d("completed"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"Complete"]})]}),o.status==="on_hold"&&e.jsxs("button",{onClick:()=>d("in_progress"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(Tt,{className:"w-4 h-4 mr-1"}),"Resume"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ix,{className:"w-5 h-5 mr-2"}),"Comments (",o.comments.length,")"]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[o.comments.map(N=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:N.authorName}),e.jsx("span",{className:"text-sm text-gray-500",children:G(N.createdAt,"MMM dd, yyyy HH:mm")}),N.isInternal&&e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"Internal"})]}),e.jsx("p",{className:"text-gray-700",children:N.content})]})]},N.id)),o.comments.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No comments yet"})]}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:x,onChange:N=>u(N.target.value),placeholder:"Add a comment...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:N=>f(N.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Internal comment"})]}),e.jsxs("button",{onClick:y,disabled:!x.trim()||l,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center",children:[e.jsx(Za,{className:"w-4 h-4 mr-1"}),"Add Comment"]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Task Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Type:"}),e.jsx("p",{className:"font-medium",children:p(o.type)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Assigned to:"}),e.jsx("p",{className:"font-medium",children:o.assignedTo})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Created by:"}),e.jsx("p",{className:"font-medium",children:o.assignedBy})]}),o.dueDate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Due date:"}),e.jsxs("p",{className:`font-medium ${v?"text-red-600":""}`,children:[G(new Date(o.dueDate),"MMM dd, yyyy HH:mm"),v&&e.jsx("span",{className:"ml-2 text-red-600 text-sm",children:"(Overdue)"})]})]}),o.estimatedHours&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Estimated hours:"}),e.jsxs("p",{className:"font-medium",children:[o.estimatedHours,"h"]})]}),o.actualHours&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Actual hours:"}),e.jsxs("p",{className:"font-medium",children:[o.actualHours,"h"]})]})]})]}),o.tags.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(cx,{className:"w-5 h-5 mr-2"}),"Tags"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.tags.map((N,S)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:N},S))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Related Items"}),e.jsxs("div",{className:"space-y-3",children:[o.documentId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Document:"}),e.jsx("p",{className:"font-medium text-blue-600 hover:text-blue-700 cursor-pointer",children:o.documentId})]}),o.customerId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Customer:"}),e.jsx("p",{className:"font-medium text-blue-600 hover:text-blue-700 cursor-pointer",children:o.customerId})]}),o.builderId&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Builder:"}),e.jsx("p",{className:"font-medium text-blue-600 hover:text-blue-700 cursor-pointer",children:o.builderId})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Timeline"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Created:"}),e.jsx("p",{className:"text-sm",children:G(o.createdAt,"MMM dd, yyyy HH:mm")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last updated:"}),e.jsx("p",{className:"text-sm",children:G(o.updatedAt,"MMM dd, yyyy HH:mm")})]}),o.completedAt&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Completed:"}),e.jsx("p",{className:"text-sm",children:G(o.completedAt,"MMM dd, yyyy HH:mm")})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(_i,{className:"w-5 h-5 mr-2"}),"Attachments (",o.attachments.length,")"]}),o.attachments.length>0?e.jsx("div",{className:"space-y-2",children:o.attachments.map(N=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 rounded border",children:[e.jsx(_i,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 flex-1",children:N.name}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm",children:"Download"})]},N.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No attachments"})]})]})]})]})}function cb(){var L,E,R;const{messages:t,loading:s,isConnected:r,unreadCount:n,currentUser:a,error:l,connectGmail:i,disconnectGmail:o,fetchMessages:c,markAsRead:x,markAsUnread:u,starMessage:m,unstarMessage:f,deleteMessage:h,sendReply:g}=Nr(),[b,v]=j.useState(""),[d,y]=j.useState(null),[p,C]=j.useState(!1),[k,N]=j.useState(""),[S,w]=j.useState("all"),D=t.filter(O=>{const U=O.subject.toLowerCase().includes(b.toLowerCase())||O.from.toLowerCase().includes(b.toLowerCase())||O.body.toLowerCase().includes(b.toLowerCase()),M=S==="all"||S==="unread"&&!O.isRead||S==="starred"&&O.isStarred;return U&&M}),A=async O=>{y(O),O.isRead||await x(O.id)},_=async()=>{d&&k.trim()&&(await g(d.id,k),N(""),C(!1))};return r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(Ae,{className:"w-7 h-7 mr-3 text-red-600"}),"Gmail Inbox"]}),a&&e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-green-100 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-800 font-medium",children:((R=(E=(L=a.getBasicProfile)==null?void 0:L.call(a))==null?void 0:E.getEmail)==null?void 0:R.call(E))||"Connected"})]})]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[n," unread message",n!==1?"s":"","  ",t.length," total"]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:c,disabled:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(pn,{className:`w-4 h-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:o,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]}),l&&r&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-900 mb-1",children:"Gmail API Warning"}),e.jsx("p",{className:"text-sm text-yellow-800",children:l})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search emails...",value:b,onChange:O=>v(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w("all"),className:`px-3 py-1 text-sm rounded-full transition-colors ${S==="all"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All"}),e.jsxs("button",{onClick:()=>w("unread"),className:`px-3 py-1 text-sm rounded-full transition-colors ${S==="unread"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:["Unread (",n,")"]}),e.jsx("button",{onClick:()=>w("starred"),className:`px-3 py-1 text-sm rounded-full transition-colors ${S==="starred"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Starred"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 max-h-[70vh] overflow-y-auto",children:[s?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"divide-y divide-gray-200",children:D.map(O=>e.jsx("div",{onClick:()=>A(O),className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${(d==null?void 0:d.id)===O.id?"bg-blue-50 border-r-4 border-blue-500":""} ${O.isRead?"":"bg-blue-25"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-pink-600 rounded-full flex items-center justify-center",children:e.jsx(X,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:`text-sm truncate ${O.isRead?"text-gray-700":"font-semibold text-gray-900"}`,children:O.from.split("@")[0]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[O.isStarred&&e.jsx(sd,{className:"w-4 h-4 text-yellow-500 fill-current"}),!O.isRead&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),e.jsx("p",{className:`text-sm mb-1 truncate ${O.isRead?"text-gray-600":"font-medium text-gray-900"}`,children:O.subject}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[O.body.substring(0,60),"..."]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:G(O.date,"MMM dd, HH:mm")})]})]})},O.id))}),!s&&D.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ae,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No messages found"}),e.jsx("p",{className:"text-gray-500",children:b||S!=="all"?"Try adjusting your search or filter criteria":"Your inbox is empty"})]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:d?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:d.subject}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:d.from})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4"}),e.jsx("span",{children:G(d.date,"MMM dd, yyyy HH:mm")})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>d.isStarred?f(d.id):m(d.id),className:`p-2 rounded-lg transition-colors ${d.isStarred?"text-yellow-500 hover:bg-yellow-50":"text-gray-400 hover:text-yellow-500 hover:bg-yellow-50"}`,children:e.jsx(sd,{className:`w-5 h-5 ${d.isStarred?"fill-current":""}`})}),e.jsx("button",{onClick:()=>d.isRead?u(d.id):x(d.id),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:d.isRead?e.jsx(hr,{className:"w-5 h-5"}):e.jsx(Ee,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>h(d.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(_a,{className:"w-5 h-5"})})]})]}),d.labels.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:d.labels.map(O=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:O},O))})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:d.body})})}),e.jsx("div",{className:"p-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>C(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(Fg,{className:"w-4 h-4 mr-2"}),"Reply"]}),e.jsxs("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(Mg,{className:"w-4 h-4 mr-2"}),"Forward"]}),e.jsxs("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(kg,{className:"w-4 h-4 mr-2"}),"Archive"]})]})})]}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ae,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a message"}),e.jsx("p",{className:"text-gray-500",children:"Choose a message from the list to view its contents"})]})})})]}),p&&d&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Reply to ",d.from]}),e.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Subject: Re: ",d.subject]})}),e.jsx("textarea",{value:k,onChange:O=>N(O.target.value),placeholder:"Type your reply...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:8})]}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:_,disabled:!k.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:[e.jsx(Za,{className:"w-4 h-4 mr-2"}),"Send Reply"]})]})]})})]}):e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center max-w-md",children:[l&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-900 mb-1",children:"Gmail Connection Error"}),e.jsx("p",{className:"text-sm text-red-800",children:l})]})]})}),e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-red-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ae,{className:"w-12 h-12 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Connect Your Gmail"}),e.jsx("p",{className:"text-gray-600 mb-6",children:l?"There was an issue connecting to Gmail. Please try again or contact your administrator.":"Sign in with your Google account to access your Gmail inbox directly from the admin panel."}),e.jsx("button",{onClick:i,disabled:s,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-8 py-3 rounded-xl font-medium transition-all duration-300 flex items-center mx-auto shadow-lg hover:shadow-xl",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing In..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-5 h-5 mr-2"}),l?"Retry Connection":"Sign In with Google"]})}),!l&&e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"Secure OAuth2 authentication  Your data stays private"}),e.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg text-left",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Gmail Setup Required"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("p",{children:"1. Set up Google Cloud Console project"}),e.jsx("p",{children:"2. Enable Gmail API"}),e.jsx("p",{children:"3. Create OAuth 2.0 credentials"}),e.jsx("p",{children:"4. Add environment variables:"}),e.jsxs("div",{className:"bg-blue-100 p-2 rounded mt-2 font-mono text-xs",children:[e.jsx("p",{children:"VITE_GOOGLE_CLIENT_ID=your_client_id"}),e.jsx("p",{children:"VITE_GOOGLE_API_KEY=your_api_key"})]})]})]})]})})}function db(){const{user:t}=ee(),{clockIn:s,clockOut:r,getTodayAttendance:n,isUserClockedIn:a,getCurrentWorkingHours:l,loading:i}=wr(),[o,c]=j.useState(new Date),[x,u]=j.useState(""),[m,f]=j.useState(""),[h,g]=j.useState(!1),[b,v]=j.useState(!1),d=n(),y=a(),p=l();j.useEffect(()=>{const w=setInterval(()=>{c(new Date)},1e3);return()=>clearInterval(w)},[]),j.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(w=>{u(`${w.coords.latitude.toFixed(4)}, ${w.coords.longitude.toFixed(4)}`)},()=>{u("Location not available")})},[]);const C=async()=>{try{await s(x,m),g(!1),f("")}catch(w){console.error("Clock in error:",w),alert(w instanceof Error?w.message:"Failed to clock in")}},k=async()=>{try{await r(m),v(!1),f("")}catch(w){console.error("Clock out error:",w),alert(w instanceof Error?w.message:"Failed to clock out")}},N=()=>{const w=o.getHours();return w<12?"Good Morning":w<17?"Good Afternoon":"Good Evening"},S=()=>d?y?"Currently working":"Work completed":"Not clocked in";return e.jsx("div",{className:"bg-gradient-primary-br rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-xl p-6 mb-4",children:[e.jsx(pe,{className:"w-12 h-12 mx-auto mb-4 text-white"}),e.jsx("div",{className:"text-3xl font-bold mb-2",children:G(o,"HH:mm:ss")}),e.jsx("div",{className:"text-orange-100",children:G(o,"EEEE, MMMM dd, yyyy")})]}),e.jsxs("h2",{className:"text-xl font-semibold mb-2",children:[N(),", ",t==null?void 0:t.name,"!"]}),e.jsx("p",{className:"text-orange-100",children:S()})]})}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Today's Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Tt,{className:"w-4 h-4"}),e.jsx("span",{children:"Clock In"})]}),e.jsx("span",{className:"font-medium",children:d!=null&&d.clockInTime?G(d.clockInTime,"HH:mm"):"--:--"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(td,{className:"w-4 h-4"}),e.jsx("span",{children:"Clock Out"})]}),e.jsx("span",{className:"font-medium",children:d!=null&&d.clockOutTime?G(d.clockOutTime,"HH:mm"):"--:--"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dx,{className:"w-4 h-4"}),e.jsx("span",{children:"Working Hours"})]}),e.jsx("span",{className:"font-medium",children:y?`${p.toFixed(1)}h`:d!=null&&d.totalHours?`${d.totalHours.toFixed(1)}h`:"0h"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ag,{className:"w-4 h-4"}),e.jsx("span",{children:"Break Time"})]}),e.jsx("span",{className:"font-medium",children:d!=null&&d.breakTime?`${d.breakTime}m`:"60m"})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"text-center",children:[y?e.jsx("div",{children:b?e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-xl p-4 space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Clock Out Details"}),e.jsx("div",{className:"text-left",children:e.jsxs("p",{className:"text-sm text-blue-100 mb-2",children:["Working for: ",p.toFixed(1)," hours"]})}),e.jsxs("div",{className:"text-left",children:[e.jsx("label",{className:"block text-sm text-blue-100 mb-1",children:"End of Day Notes"}),e.jsx("textarea",{value:m,onChange:w=>f(w.target.value),className:"w-full p-2 rounded text-gray-900 text-sm",rows:2,placeholder:"Summary of today's work..."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:k,disabled:i,className:"flex-1 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:i?"Clocking Out...":"Confirm Clock Out"}),e.jsx("button",{onClick:()=>v(!1),className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>v(!0),disabled:i,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-xl text-lg transition-colors flex items-center justify-center space-x-2 shadow-lg",children:[e.jsx(td,{className:"w-6 h-6"}),e.jsx("span",{children:"Clock Out"})]})}):e.jsx("div",{children:h?e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-xl p-4 space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"Clock In Details"}),e.jsxs("div",{className:"text-left",children:[e.jsx("label",{className:"block text-sm text-blue-100 mb-1",children:"Location"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:x})]})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("label",{className:"block text-sm text-blue-100 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:m,onChange:w=>f(w.target.value),className:"w-full p-2 rounded text-gray-900 text-sm",rows:2,placeholder:"Any notes for today..."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:C,disabled:i,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:i?"Clocking In...":"Confirm Clock In"}),e.jsx("button",{onClick:()=>g(!1),className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg font-medium transition-colors",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>g(!0),disabled:i,className:"w-full bg-white text-blue-600 hover:bg-blue-50 font-bold py-4 px-6 rounded-xl text-lg transition-colors flex items-center justify-center space-x-2 shadow-lg",children:[e.jsx(Tt,{className:"w-6 h-6"}),e.jsx("span",{children:"Clock In"})]})}),d&&e.jsxs("div",{className:"mt-4 text-sm text-blue-100",children:["Status: ",e.jsx("span",{className:"font-medium capitalize",children:d.status.replace("_"," ")})]})]})})]})})}const gd={present:"bg-green-500",absent:"bg-red-500",late:"bg-orange-500",half_day:"bg-yellow-500",on_leave:"bg-blue-500",holiday:"bg-purple-500",work_from_home:"bg-indigo-500"};function ub({userId:t,selectedDate:s,onDateSelect:r}){const{getAttendanceByDateRange:n}=wr(),[a,l]=Lt.useState(s),i=Pi(a),o=Ai(a),c=rf({start:i,end:o}),x=n(i,o,t),u=g=>x.find(b=>Tl(b.date,g)),m=g=>{l(b=>g==="prev"?ay(b,1):xx(b,1))},f=g=>Tl(g,new Date),h=g=>Tl(g,s);return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(fe,{className:"w-5 h-5 mr-2"}),"Attendance Calendar"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>m("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Dg,{className:"w-4 h-4"})}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 min-w-[140px] text-center",children:G(a,"MMMM yyyy")}),e.jsx("button",{onClick:()=>m("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Do,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:g},g)),c.map(g=>{const b=u(g),v=f(g),d=h(g);return e.jsxs("button",{onClick:()=>r(g),className:`
                relative p-2 text-sm rounded-lg transition-colors
                ${d?"bg-blue-500 text-white":v?"bg-blue-100 text-blue-900 font-medium":"hover:bg-gray-100"}
              `,children:[e.jsx("span",{className:"relative z-10",children:G(g,"d")}),b&&e.jsx("div",{className:`
                  absolute bottom-1 left-1/2 transform -translate-x-1/2 w-2 h-2 rounded-full
                  ${gd[b.status]}
                  ${d?"bg-white":""}
                `})]},g.toISOString())})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-3",children:"Legend"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:Object.entries(gd).map(([g,b])=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${b}`}),e.jsx("span",{className:"text-gray-600 capitalize",children:g.replace("_"," ")})]},g))})]})]})}const fd=[{value:"sick_leave",label:"Sick Leave",description:"Medical reasons or illness"},{value:"casual_leave",label:"Casual Leave",description:"Personal work or urgent matters"},{value:"annual_leave",label:"Annual Leave",description:"Vacation or planned time off"},{value:"emergency_leave",label:"Emergency Leave",description:"Unexpected urgent situations"},{value:"maternity_leave",label:"Maternity Leave",description:"Maternity-related time off"},{value:"paternity_leave",label:"Paternity Leave",description:"Paternity-related time off"}];function mb({isOpen:t,onClose:s}){var f;const{submitLeaveRequest:r,loading:n}=wr(),[a,l]=j.useState({leaveType:"casual_leave",startDate:"",endDate:"",reason:""}),[i,o]=j.useState({}),c=()=>{if(a.startDate&&a.endDate){const h=new Date(a.startDate),g=new Date(a.endDate);return sf(g,h)+1}return 0},x=()=>{const h={};if(a.startDate||(h.startDate="Start date is required"),a.endDate||(h.endDate="End date is required"),a.startDate&&a.endDate){const g=new Date(a.startDate);new Date(a.endDate)<g&&(h.endDate="End date must be after start date")}return a.reason.trim()||(h.reason="Reason is required"),o(h),Object.keys(h).length===0},u=async h=>{if(h.preventDefault(),!!x())try{await r({leaveType:a.leaveType,startDate:new Date(a.startDate),endDate:new Date(a.endDate),totalDays:c(),reason:a.reason}),s(),l({leaveType:"casual_leave",startDate:"",endDate:"",reason:""}),o({})}catch(g){console.error("Error submitting leave request:",g)}};if(!t)return null;const m=c();return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(fe,{className:"w-5 h-5 mr-2 text-blue-600"}),"Request Leave"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leave Type *"}),e.jsx("select",{value:a.leaveType,onChange:h=>l({...a,leaveType:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:fd.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(f=fd.find(h=>h.value===a.leaveType))==null?void 0:f.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),e.jsx("input",{type:"date",value:a.startDate,onChange:h=>l({...a,startDate:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.startDate?"border-red-300":"border-gray-300"}`,min:G(new Date,"yyyy-MM-dd")}),i.startDate&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.startDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date *"}),e.jsx("input",{type:"date",value:a.endDate,onChange:h=>l({...a,endDate:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.endDate?"border-red-300":"border-gray-300"}`,min:a.startDate||G(new Date,"yyyy-MM-dd")}),i.endDate&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.endDate})]})]}),m>0&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Total Days:"})," ",m," day",m>1?"s":""]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason *"}),e.jsx("textarea",{value:a.reason,onChange:h=>l({...a,reason:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${i.reason?"border-red-300":"border-gray-300"}`,rows:4,placeholder:"Please provide a detailed reason for your leave request..."}),i.reason&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.reason})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-amber-900 mb-1",children:"Important Notice"}),e.jsxs("ul",{className:"text-sm text-amber-800 space-y-1",children:[e.jsx("li",{children:" Leave requests should be submitted at least 24 hours in advance"}),e.jsx("li",{children:" Emergency leaves can be applied retrospectively with proper documentation"}),e.jsx("li",{children:" Your request will be reviewed by your supervisor"}),e.jsx("li",{children:" You will be notified once your request is approved or rejected"})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Submit Request"]})})]})]})]})})}const yd=[{value:"present",label:"Present",description:"Employee was present for full day"},{value:"absent",label:"Absent",description:"Employee was absent without notice"},{value:"late",label:"Late",description:"Employee arrived late but worked full day"},{value:"half_day",label:"Half Day",description:"Employee worked only half day"},{value:"on_leave",label:"On Leave",description:"Employee was on approved leave"},{value:"work_from_home",label:"Work From Home",description:"Employee worked from home"}];function xb({isOpen:t,onClose:s}){var f;const{markAttendance:r,loading:n}=wr(),{users:a}=fs(),[l,i]=j.useState({userId:"",date:G(new Date,"yyyy-MM-dd"),status:"present",notes:""}),[o,c]=j.useState({}),x=()=>{const h={};return l.userId||(h.userId="Please select a staff member"),l.date||(h.date="Date is required"),c(h),Object.keys(h).length===0},u=async h=>{if(h.preventDefault(),!!x())try{await r(l.userId,new Date(l.date),l.status,l.notes||void 0),s(),i({userId:"",date:G(new Date,"yyyy-MM-dd"),status:"present",notes:""}),c({})}catch(g){console.error("Error marking attendance:",g)}};if(!t)return null;const m=a.find(h=>h.id===l.userId);return e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 mr-2 text-green-600"}),"Mark Attendance"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Staff Member *"}),e.jsxs("select",{value:l.userId,onChange:h=>i({...l,userId:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.userId?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select staff member"}),a.filter(h=>h.isActive).map(h=>e.jsxs("option",{value:h.id,children:[h.name," (",h.role.replace("_"," "),")"]},h.id))]}),o.userId&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.userId})]}),m&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600",children:m.email}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:m.role.replace("_"," ")})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:l.date,onChange:h=>i({...l,date:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${o.date?"border-red-300":"border-gray-300"}`,max:G(new Date,"yyyy-MM-dd")}),o.date&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:o.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attendance Status *"}),e.jsx("select",{value:l.status,onChange:h=>i({...l,status:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:yd.map(h=>e.jsx("option",{value:h.value,children:h.label},h.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(f=yd.find(h=>h.value===l.status))==null?void 0:f.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:l.notes,onChange:h=>i({...l,notes:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,placeholder:"Add any additional notes about this attendance record..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Marking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Mark Attendance"]})})]})]})]})})}const bd={present:"bg-green-100 text-green-800 border-green-300",absent:"bg-red-100 text-red-800 border-red-300",late:"bg-orange-100 text-orange-800 border-orange-300",half_day:"bg-yellow-100 text-yellow-800 border-yellow-300",on_leave:"bg-blue-100 text-blue-800 border-blue-300",holiday:"bg-purple-100 text-purple-800 border-purple-300",work_from_home:"bg-indigo-100 text-indigo-800 border-indigo-300"},hb={present:te,absent:nr,late:ne,half_day:pe,on_leave:fe,holiday:fe,work_from_home:Pe};function pb(){const{user:t,hasPermission:s}=ee(),{users:r}=fs(),{attendanceRecords:n,leaveRequests:a,getTodayAttendance:l,getUserAttendanceStats:i,getAttendanceByDateRange:o,isUserClockedIn:c,getCurrentWorkingHours:x,loading:u}=wr(),[m,f]=j.useState(new Date),[h,g]=j.useState((t==null?void 0:t.id)||""),[b,v]=j.useState("month"),[d,y]=j.useState(!1),[p,C]=j.useState(!1),[k,N]=j.useState(""),S=(t==null?void 0:t.role)==="main_admin"||(t==null?void 0:t.role)==="staff_admin",w=s("attendance","manage")||S,D=()=>{const I=new Date;switch(b){case"today":return{start:I,end:I};case"week":return{start:ny(I,7),end:I};case"month":return{start:Pi(I),end:Ai(I)};default:return{start:Pi(I),end:Ai(I)}}},{start:A,end:_}=D(),L=S?h:(t==null?void 0:t.id)||"",E=i(L,A,_),R=l(L),O=c(L),U=x(L),M=o(A,_,S||t==null?void 0:t.id).filter(I=>I.userName.toLowerCase().includes(k.toLowerCase())||I.userRole.toLowerCase().includes(k.toLowerCase())).sort((I,$)=>$.date.getTime()-I.date.getTime()),P=a.filter(I=>I.status==="pending"),F=a.filter(I=>I.userId===(t==null?void 0:t.id)),H=I=>I?G(I,"HH:mm"):"--:--",T=I=>I?`${I.toFixed(1)}h`:"0h";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Attendance"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track working hours and manage attendance"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>y(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Request Leave"]}),w&&e.jsxs("button",{onClick:()=>C(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Mark Attendance"]})]})]}),e.jsx(db,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Today's Status"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:R?e.jsx("span",{className:`inline-flex px-2 py-1 text-sm font-medium rounded-full ${bd[R.status]}`,children:R.status.replace("_"," ").toUpperCase()}):e.jsx("span",{className:"text-gray-400",children:"Not Marked"})})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Clock In Time"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:H(R==null?void 0:R.clockInTime)})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(pe,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Working Hours"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:T(O?U:R==null?void 0:R.totalHours)})]}),e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:e.jsx(dx,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:[E.attendancePercentage.toFixed(1),"%"]})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(ux,{className:"w-6 h-6 text-orange-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Statistics"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:b,onChange:I=>v(I.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"Last 7 Days"}),e.jsx("option",{value:"month",children:"This Month"})]}),S&&e.jsxs("select",{value:h,onChange:I=>g(I.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Users"}),r.filter(I=>I.isActive).map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:E.presentDays}),e.jsx("p",{className:"text-sm text-green-700",children:"Present Days"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:E.absentDays}),e.jsx("p",{className:"text-sm text-red-700",children:"Absent Days"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:E.lateDays}),e.jsx("p",{className:"text-sm text-orange-700",children:"Late Days"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:T(E.totalHours)}),e.jsx("p",{className:"text-sm text-blue-700",children:"Total Hours"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Leave Requests"}),S&&P.length>0&&e.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-sm font-medium",children:[P.length," Pending"]})]}),e.jsxs("div",{className:"space-y-3",children:[(S?P.slice(0,5):F.slice(0,5)).map(I=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.userName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[I.leaveType.replace("_"," "),"  ",I.totalDays," day",I.totalDays>1?"s":""]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[G(I.startDate,"MMM dd")," - ",G(I.endDate,"MMM dd")]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${I.status==="pending"?"bg-yellow-100 text-yellow-800":I.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:I.status.toUpperCase()})]},I.id)),(S?P:F).length===0&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx(fe,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No leave requests"})]})]})]})]}),e.jsx(ub,{userId:L,selectedDate:m,onDateSelect:f}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Attendance Records"}),e.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search staff...",value:k,onChange:I=>N(I.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),e.jsxs("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm flex items-center transition-colors",children:[e.jsx(Ms,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Staff Member"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Date"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Clock In"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Clock Out"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Hours"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Status"}),e.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:M.map(I=>{const $=hb[I.status];return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.userName}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:I.userRole.replace("_"," ")})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:G(I.date,"MMM dd, yyyy")})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-900",children:H(I.clockInTime)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-900",children:H(I.clockOutTime)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-900",children:T(I.totalHours)}),I.overtime&&I.overtime>0&&e.jsxs("span",{className:"text-green-600 ml-1",children:["(+",T(I.overtime)," OT)"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${bd[I.status]}`,children:I.status.replace("_"," ").toUpperCase()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),w&&e.jsx("button",{className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(Ye,{className:"w-4 h-4"})})]})})]},I.id)})})]})}),M.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No attendance records found"}),e.jsx("p",{className:"text-gray-500",children:k?"Try adjusting your search criteria":"Attendance records will appear here"})]})]}),e.jsx(mb,{isOpen:d,onClose:()=>y(!1)}),w&&e.jsx(xb,{isOpen:p,onClose:()=>C(!1)})]})}function gb({isOpen:t,onClose:s}){const{createSalaryRecord:r,getStaffConfig:n,loading:a}=wn(),{users:l}=fs(),[i,o]=j.useState({userId:"",month:new Date().getMonth()+1,year:new Date().getFullYear(),bonus:0,overtimeHours:0,notes:""}),[c,x]=j.useState({}),u=()=>{const h={};return i.userId||(h.userId="Please select a staff member"),n(i.userId)||(h.userId="Staff member salary not configured"),x(h),Object.keys(h).length===0},m=async h=>{if(h.preventDefault(),!!u())try{const g=l.find(C=>C.id===i.userId),b=n(i.userId);if(!g||!b)return;const v=new Date(i.year,i.month-1,1),d=new Date(i.year,i.month,0),y=new Date(i.year,i.month,5),p=i.overtimeHours>0?[{id:`OT${Date.now()}`,date:d,hours:i.overtimeHours,rate:b.overtimeRate,amount:i.overtimeHours*b.overtimeRate,description:"Manual overtime entry"}]:[];await r({userId:i.userId,userName:g.name,userRole:g.role,overtime:p,bonus:i.bonus,payPeriod:{month:i.month,year:i.year,startDate:v,endDate:d},payDate:y,notes:i.notes}),s(),o({userId:"",month:new Date().getMonth()+1,year:new Date().getFullYear(),bonus:0,overtimeHours:0,notes:""}),x({})}catch(g){console.error("Error creating salary record:",g)}},f=i.userId?n(i.userId):null;return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ct,{className:"w-5 h-5 mr-2 text-green-600"}),"Create Salary Record"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:m,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2 text-blue-600"}),"Basic Information"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Staff Member *"}),e.jsxs("select",{value:i.userId,onChange:h=>o({...i,userId:h.target.value}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${c.userId?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Select staff member"}),l.filter(h=>h.isActive&&h.role!=="main_admin").map(h=>e.jsxs("option",{value:h.id,children:[h.name," (",h.role.replace("_"," "),")"]},h.id))]}),c.userId&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:c.userId})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month *"}),e.jsx("select",{value:i.month,onChange:h=>o({...i,month:parseInt(h.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:12},(h,g)=>e.jsx("option",{value:g+1,children:new Date(2024,g,1).toLocaleString("default",{month:"long"})},g+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year *"}),e.jsxs("select",{value:i.year,onChange:h=>o({...i,year:parseInt(h.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2025,children:"2025"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center",children:[e.jsx(xr,{className:"w-4 h-4 mr-2 text-green-600"}),"Additional Components"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overtime Hours"}),e.jsx("input",{type:"number",value:i.overtimeHours,onChange:h=>o({...i,overtimeHours:parseFloat(h.target.value)||0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",min:"0",step:"0.5"}),f&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Rate: ",f.overtimeRate,"/hour"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bonus Amount ()"}),e.jsx("input",{type:"number",value:i.bonus,onChange:h=>o({...i,bonus:parseFloat(h.target.value)||0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:i.notes,onChange:h=>o({...i,notes:h.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,placeholder:"Add any notes about this salary record..."})]})]})]}),f&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Salary Calculation Preview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Base Components"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Salary:"}),e.jsxs("span",{children:["",f.baseSalary.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Allowances:"}),e.jsxs("span",{children:["",f.allowances.reduce((h,g)=>h+g.amount,0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Overtime:"}),e.jsxs("span",{children:["",(i.overtimeHours*f.overtimeRate).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bonus:"}),e.jsxs("span",{children:["",i.bonus.toLocaleString()]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Deductions"}),e.jsx("div",{className:"space-y-1",children:f.deductions.map((h,g)=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"capitalize",children:[h.type.replace("_"," "),":"]}),e.jsxs("span",{children:["",h.amount.toLocaleString()]})]},g))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Summary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gross Salary:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:["",(f.baseSalary+f.allowances.reduce((h,g)=>h+g.amount,0)+i.overtimeHours*f.overtimeRate+i.bonus).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Deductions:"}),e.jsxs("span",{className:"text-red-600",children:["",f.deductions.reduce((h,g)=>h+g.amount,0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between font-medium border-t pt-1",children:[e.jsx("span",{children:"Net Salary:"}),e.jsxs("span",{className:"text-green-600",children:["",(f.baseSalary+f.allowances.reduce((h,g)=>h+g.amount,0)+i.overtimeHours*f.overtimeRate+i.bonus-f.deductions.reduce((h,g)=>h+g.amount,0)).toLocaleString()]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a||!f,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Create Salary Record"]})})]})]})]})}):null}function fb({isOpen:t,onClose:s,record:r}){const{updateSalaryRecord:n,loading:a}=wn(),[l,i]=j.useState({bonus:0,overtimeHours:0,notes:"",status:"draft"}),[o,c]=j.useState({});j.useEffect(()=>{r&&i({bonus:r.bonus,overtimeHours:r.overtime.reduce((u,m)=>u+m.hours,0),notes:r.notes||"",status:r.status})},[r]);const x=async u=>{var m,f;u.preventDefault();try{const h=l.overtimeHours>0?[{id:`OT${Date.now()}`,date:r.payPeriod.endDate,hours:l.overtimeHours,rate:((m=r.overtime[0])==null?void 0:m.rate)||200,amount:l.overtimeHours*(((f=r.overtime[0])==null?void 0:f.rate)||200),description:"Updated overtime entry"}]:[],g=r.allowances.reduce((p,C)=>p+C.amount,0),b=r.deductions.reduce((p,C)=>p+C.amount,0),v=h.reduce((p,C)=>p+C.amount,0),d=r.baseSalary+g+v+l.bonus,y=d-b;await n(r.id,{bonus:l.bonus,overtime:h,grossSalary:d,netSalary:y,notes:l.notes,status:l.status}),s(),c({})}catch(h){console.error("Error updating salary record:",h)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ct,{className:"w-5 h-5 mr-2 text-green-600"}),"Edit Salary Record - ",r.id]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:x,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Staff: ",e.jsx("span",{className:"font-medium",children:r.userName})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Period: ",e.jsx("span",{className:"font-medium",children:new Date(r.payPeriod.year,r.payPeriod.month-1).toLocaleString("default",{month:"long",year:"numeric"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overtime Hours"}),e.jsx("input",{type:"number",value:l.overtimeHours,onChange:u=>i({...l,overtimeHours:parseFloat(u.target.value)||0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",min:"0",step:"0.5",disabled:r.status==="paid"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bonus Amount ()"}),e.jsx("input",{type:"number",value:l.bonus,onChange:u=>i({...l,bonus:parseFloat(u.target.value)||0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",min:"0",disabled:r.status==="paid"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:l.status,onChange:u=>i({...l,status:u.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:r.status==="paid",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending_approval",children:"Pending Approval"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:l.notes,onChange:u=>i({...l,notes:u.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,placeholder:"Add any notes...",disabled:r.status==="paid"})]}),r.status==="paid"&&e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Note:"})," This salary record has been paid and cannot be modified."]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:a||r.status==="paid",className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Update Record"]})})]})]})]})}):null}const yb=[{value:"house_rent",label:"House Rent Allowance"},{value:"transport",label:"Transport Allowance"},{value:"medical",label:"Medical Allowance"},{value:"food",label:"Food Allowance"},{value:"performance",label:"Performance Allowance"},{value:"special",label:"Special Allowance"},{value:"other",label:"Other Allowance"}],bb=[{value:"tax",label:"Income Tax"},{value:"provident_fund",label:"Provident Fund"},{value:"insurance",label:"Insurance Premium"},{value:"loan",label:"Loan Deduction"},{value:"advance",label:"Advance Deduction"},{value:"late_penalty",label:"Late Penalty"},{value:"other",label:"Other Deduction"}];function vb({isOpen:t,onClose:s,user:r}){const{createStaffConfig:n,updateStaffConfig:a,getStaffConfig:l,loading:i}=wn(),[o,c]=j.useState({baseSalary:0,allowances:[],deductions:[],overtimeRate:0,paymentMethod:"bank_transfer",bankDetails:{accountNumber:"",bankName:"",ifscCode:"",accountHolderName:""}}),[x,u]=j.useState({}),m=l(r.id);j.useEffect(()=>{m&&c({baseSalary:m.baseSalary,allowances:m.allowances,deductions:m.deductions,overtimeRate:m.overtimeRate,paymentMethod:m.paymentMethod,bankDetails:m.bankDetails||{accountNumber:"",bankName:"",ifscCode:"",accountHolderName:""}})},[m]);const f=()=>{c({...o,allowances:[...o.allowances,{id:`ALL${Date.now()}`,type:"house_rent",amount:0,description:""}]})},h=N=>{c({...o,allowances:o.allowances.filter((S,w)=>w!==N)})},g=(N,S,w)=>{const D=[...o.allowances];D[N]={...D[N],[S]:w},c({...o,allowances:D})},b=()=>{c({...o,deductions:[...o.deductions,{id:`DED${Date.now()}`,type:"tax",amount:0,description:""}]})},v=N=>{c({...o,deductions:o.deductions.filter((S,w)=>w!==N)})},d=(N,S,w)=>{const D=[...o.deductions];D[N]={...D[N],[S]:w},c({...o,deductions:D})},y=()=>{const N={};return o.baseSalary<=0&&(N.baseSalary="Base salary must be greater than 0"),o.paymentMethod==="bank_transfer"&&(o.bankDetails.accountNumber||(N.accountNumber="Account number is required for bank transfer"),o.bankDetails.bankName||(N.bankName="Bank name is required"),o.bankDetails.ifscCode||(N.ifscCode="IFSC code is required")),u(N),Object.keys(N).length===0},p=async N=>{if(N.preventDefault(),!!y())try{const S={userId:r.id,baseSalary:o.baseSalary,allowances:o.allowances,deductions:o.deductions,overtimeRate:o.overtimeRate,paymentMethod:o.paymentMethod,bankDetails:o.paymentMethod==="bank_transfer"?o.bankDetails:void 0};m?await a(m.id,S):await n(S),s(),u({})}catch(S){console.error("Error saving staff configuration:",S)}},C=()=>{const N=o.allowances.reduce((S,w)=>S+w.amount,0);return o.baseSalary+N},k=()=>{const N=C(),S=o.deductions.reduce((w,D)=>w+D.amount,0);return N-S};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(ct,{className:"w-5 h-5 mr-2 text-green-600"}),"Salary Configuration - ",r.name]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:p,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(X,{className:"w-4 h-4 mr-2 text-blue-600"}),"Basic Salary Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Salary () *"}),e.jsx("input",{type:"number",value:o.baseSalary,onChange:N=>c({...o,baseSalary:parseFloat(N.target.value)||0}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.baseSalary?"border-red-300":"border-gray-300"}`,placeholder:"Enter base salary",min:"0"}),x.baseSalary&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.baseSalary})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overtime Rate (/hour)"}),e.jsx("input",{type:"number",value:o.overtimeRate,onChange:N=>c({...o,overtimeRate:parseFloat(N.target.value)||0}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter overtime rate",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method *"}),e.jsxs("select",{value:o.paymentMethod,onChange:N=>c({...o,paymentMethod:N.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"upi",children:"UPI"})]})]})]})]}),o.paymentMethod==="bank_transfer"&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(ve,{className:"w-4 h-4 mr-2 text-purple-600"}),"Bank Details"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Holder Name *"}),e.jsx("input",{type:"text",value:o.bankDetails.accountHolderName,onChange:N=>c({...o,bankDetails:{...o.bankDetails,accountHolderName:N.target.value}}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter account holder name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Number *"}),e.jsx("input",{type:"text",value:o.bankDetails.accountNumber,onChange:N=>c({...o,bankDetails:{...o.bankDetails,accountNumber:N.target.value}}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.accountNumber?"border-red-300":"border-gray-300"}`,placeholder:"Enter account number"}),x.accountNumber&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.accountNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Name *"}),e.jsx("input",{type:"text",value:o.bankDetails.bankName,onChange:N=>c({...o,bankDetails:{...o.bankDetails,bankName:N.target.value}}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.bankName?"border-red-300":"border-gray-300"}`,placeholder:"Enter bank name"}),x.bankName&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.bankName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code *"}),e.jsx("input",{type:"text",value:o.bankDetails.ifscCode,onChange:N=>c({...o,bankDetails:{...o.bankDetails,ifscCode:N.target.value.toUpperCase()}}),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.ifscCode?"border-red-300":"border-gray-300"}`,placeholder:"Enter IFSC code"}),x.ifscCode&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.ifscCode})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Allowances"}),e.jsxs("button",{type:"button",onClick:f,className:"bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg text-sm flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),"Add"]})]}),e.jsxs("div",{className:"space-y-3",children:[o.allowances.map((N,S)=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-gray-200 rounded-lg",children:[e.jsx("select",{value:N.type,onChange:w=>g(S,"type",w.target.value),className:"flex-1 p-2 border border-gray-300 rounded text-sm",children:yb.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}),e.jsx("input",{type:"number",value:N.amount,onChange:w=>g(S,"amount",parseFloat(w.target.value)||0),className:"w-24 p-2 border border-gray-300 rounded text-sm",placeholder:"Amount",min:"0"}),e.jsx("button",{type:"button",onClick:()=>h(S),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(_a,{className:"w-4 h-4"})})]},S)),o.allowances.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No allowances added"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Deductions"}),e.jsxs("button",{type:"button",onClick:b,className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded-lg text-sm flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-1"}),"Add"]})]}),e.jsxs("div",{className:"space-y-3",children:[o.deductions.map((N,S)=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border border-gray-200 rounded-lg",children:[e.jsx("select",{value:N.type,onChange:w=>d(S,"type",w.target.value),className:"flex-1 p-2 border border-gray-300 rounded text-sm",children:bb.map(w=>e.jsx("option",{value:w.value,children:w.label},w.value))}),e.jsx("input",{type:"number",value:N.amount,onChange:w=>d(S,"amount",parseFloat(w.target.value)||0),className:"w-24 p-2 border border-gray-300 rounded text-sm",placeholder:"Amount",min:"0"}),e.jsx("button",{type:"button",onClick:()=>v(S),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",children:e.jsx(_a,{className:"w-4 h-4"})})]},S)),o.deductions.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No deductions added"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Salary Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Salary:"}),e.jsxs("span",{children:["",o.baseSalary.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Allowances:"}),e.jsxs("span",{className:"text-green-600",children:["+",o.allowances.reduce((N,S)=>N+S.amount,0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Deductions:"}),e.jsxs("span",{className:"text-red-600",children:["-",o.deductions.reduce((N,S)=>N+S.amount,0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between font-medium border-t pt-2",children:[e.jsx("span",{children:"Net Salary:"}),e.jsxs("span",{className:"text-blue-600",children:["",k().toLocaleString()]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),m?"Update Configuration":"Save Configuration"]})})]})]})]})}):null}function jb({isOpen:t,onClose:s,onGenerate:r}){const{users:n}=fs(),{staffConfigs:a,getSalaryRecordsByPeriod:l,loading:i}=wn(),[o,c]=j.useState({month:new Date().getMonth()+1,year:new Date().getFullYear()}),x=n.filter(v=>v.isActive&&v.role!=="main_admin"),u=x.filter(v=>a.some(d=>d.userId===v.id&&d.isActive)),m=x.filter(v=>!a.some(d=>d.userId===v.id&&d.isActive)),f=l(o.month,o.year),h=f.length>0,g=()=>u.reduce((v,d)=>{const y=a.find(S=>S.userId===d.id&&S.isActive);if(!y)return v;const p=y.allowances.reduce((S,w)=>S+w.amount,0),C=y.deductions.reduce((S,w)=>S+w.amount,0),N=y.baseSalary+p-C;return v+N},0),b=async v=>{v.preventDefault();try{await r(o.month,o.year),s()}catch(d){console.error("Error generating payroll:",d)}};return t?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(xr,{className:"w-5 h-5 mr-2 text-purple-600"}),"Generate Payroll"]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:b,className:"p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Select Pay Period"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month *"}),e.jsx("select",{value:o.month,onChange:v=>c({...o,month:parseInt(v.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:12},(v,d)=>e.jsx("option",{value:d+1,children:new Date(2024,d,1).toLocaleString("default",{month:"long"})},d+1))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year *"}),e.jsxs("select",{value:o.year,onChange:v=>c({...o,year:parseInt(v.target.value)}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2025,children:"2025"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600",children:"Total Staff"}),e.jsx("p",{className:"text-xl font-bold text-blue-900",children:x.length})]}),e.jsx(bt,{className:"w-6 h-6 text-blue-600"})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600",children:"Configured"}),e.jsx("p",{className:"text-xl font-bold text-green-900",children:u.length})]}),e.jsx(bt,{className:"w-6 h-6 text-green-600"})]})}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-600",children:"Not Configured"}),e.jsx("p",{className:"text-xl font-bold text-orange-900",children:m.length})]}),e.jsx(bt,{className:"w-6 h-6 text-orange-600"})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-2 flex items-center",children:[e.jsx(ct,{className:"w-4 h-4 mr-2"}),"Estimated Total Payroll"]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",g().toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["For ",u.length," staff members"]})]}),m.length>0&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-orange-900 mb-2",children:"Unconfigured Staff Members"}),e.jsx("p",{className:"text-sm text-orange-800 mb-2",children:"The following staff members don't have salary configuration:"}),e.jsx("ul",{className:"text-sm text-orange-800 space-y-1",children:m.map(v=>e.jsxs("li",{children:[" ",v.name," (",v.role.replace("_"," "),")"]},v.id))}),e.jsx("p",{className:"text-sm text-orange-800 mt-2",children:"Please configure their salaries before generating payroll."})]})]})}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ne,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-900 mb-1",children:"Payroll Already Exists"}),e.jsxs("p",{className:"text-sm text-red-800",children:["Payroll for ",new Date(o.year,o.month-1).toLocaleString("default",{month:"long",year:"numeric"}),"already exists with ",f.length," records. Generating again will create duplicate records."]})]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Payroll Generation Process"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Salary records will be created for all configured staff"}),e.jsx("li",{children:" Overtime will be calculated from attendance records"}),e.jsx("li",{children:' All records will be created in "Draft" status'}),e.jsx("li",{children:" You can review and edit before approval"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i||u.length===0,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white px-6 py-2 rounded-lg font-medium transition-colors flex items-center",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xr,{className:"w-4 h-4 mr-2"}),"Generate Payroll (",u.length," staff)"]})})]})]})]})}):null}const Nb={draft:"bg-gray-100 text-gray-800 border-gray-300",pending_approval:"bg-yellow-100 text-yellow-800 border-yellow-300",approved:"bg-blue-100 text-blue-800 border-blue-300",paid:"bg-green-100 text-green-800 border-green-300",cancelled:"bg-red-100 text-red-800 border-red-300"},wb={draft:Q,pending_approval:pe,approved:te,paid:nx,cancelled:ne},Cb={bank_transfer:ve,cash:ct,cheque:Q,upi:zt};function Sb(){const{user:t,hasPermission:s}=ee(),{users:r}=fs(),{salaryRecords:n,staffConfigs:a,loading:l,getSalaryStats:i,approveSalary:o,paySalary:c,generatePayroll:x}=wn(),[u,m]=j.useState(""),[f,h]=j.useState("all"),[g,b]=j.useState(new Date().getMonth()+1),[v,d]=j.useState(new Date().getFullYear()),[y,p]=j.useState(!1),[C,k]=j.useState(!1),[N,S]=j.useState(!1),[w,D]=j.useState(!1),[A,_]=j.useState(null),[L,E]=j.useState(null),R=(t==null?void 0:t.role)==="main_admin"||(t==null?void 0:t.role)==="staff_admin",O=s("salary","manage")||R,U=(t==null?void 0:t.role)==="main_admin",M=n.filter(B=>{const W=B.userName.toLowerCase().includes(u.toLowerCase())||B.id.toLowerCase().includes(u.toLowerCase())||B.userRole.toLowerCase().includes(u.toLowerCase()),Z=f==="all"||B.status===f,Sr=B.payPeriod.month===g&&B.payPeriod.year===v;return W&&Z&&Sr}),P=i(),F=B=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(B),H=B=>{_(B),k(!0)},T=B=>{const W=r.find(Z=>Z.id===B);E(W),S(!0)},I=async B=>{try{await o(B)}catch(W){console.error("Error approving salary:",W)}},$=async B=>{try{await c(B)}catch(W){console.error("Error marking as paid:",W)}},Y=async(B,W)=>{try{await x(B,W),b(B),d(W)}catch(Z){console.error("Error generating payroll:",Z)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Salary Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage staff salaries and payroll processing"})]}),e.jsx("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:O&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>D(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(xr,{className:"w-4 h-4 mr-2"}),"Generate Payroll"]}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"New Salary Record"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P.totalStaff})]}),e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(bt,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Payroll"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F(P.totalMonthlySalary)})]}),e.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:e.jsx(ct,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid This Month"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F(P.totalPaidThisMonth)})]}),e.jsx("div",{className:"bg-emerald-100 p-3 rounded-lg",children:e.jsx(te,{className:"w-6 h-6 text-emerald-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Payments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:F(P.totalPendingPayments)})]}),e.jsx("div",{className:"bg-orange-100 p-3 rounded-lg",children:e.jsx(pe,{className:"w-6 h-6 text-orange-600"})})]})})]}),O&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Staff Salary Configuration"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All Configurations"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.filter(B=>B.isActive&&B.role!=="main_admin").map(B=>{const W=a.find(Z=>Z.userId===B.id&&Z.isActive);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:B.name}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:B.role.replace("_"," ")})]})]}),e.jsx("button",{onClick:()=>T(B.id),className:"p-1 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",children:e.jsx(Cn,{className:"w-4 h-4"})})]}),W?e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Base Salary:"}),e.jsx("span",{className:"font-medium",children:F(W.baseSalary)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Allowances:"}),e.jsx("span",{className:"font-medium",children:F(W.allowances.reduce((Z,Sr)=>Z+Sr.amount,0))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"OT Rate:"}),e.jsxs("span",{className:"font-medium",children:["",W.overtimeRate,"/hr"]})]})]}):e.jsxs("div",{className:"text-center py-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Not configured"}),e.jsx("button",{onClick:()=>T(B.id),className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-1",children:"Configure Salary"})]})]},B.id)})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, ID, or role...",value:u,onChange:B=>m(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("select",{value:f,onChange:B=>h(B.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"pending_approval",children:"Pending Approval"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("select",{value:g,onChange:B=>b(parseInt(B.target.value)),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:Array.from({length:12},(B,W)=>e.jsx("option",{value:W+1,children:G(new Date(2024,W,1),"MMMM")},W+1))}),e.jsxs("select",{value:v,onChange:B=>d(parseInt(B.target.value)),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:2024,children:"2024"}),e.jsx("option",{value:2025,children:"2025"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Staff Member"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Period"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Salary Details"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Payment"}),e.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-gray-900",children:"Status"}),e.jsx("th",{className:"text-right px-6 py-4 text-sm font-medium text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:M.map(B=>{const W=wb[B.status],Z=Cb[B.paymentMethod];return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium text-sm",children:B.userName.split(" ").map(Sr=>Sr[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:B.userName}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:B.userRole.replace("_"," ")})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(fe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:G(new Date(B.payPeriod.year,B.payPeriod.month-1),"MMMM yyyy")}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Pay Date: ",G(B.payDate,"MMM dd")]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Base:"}),e.jsx("span",{className:"font-medium",children:F(B.baseSalary)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Gross:"}),e.jsx("span",{className:"font-medium text-blue-600",children:F(B.grossSalary)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Net:"}),e.jsx("span",{className:"font-medium text-green-600",children:F(B.netSalary)})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:B.paymentMethod.replace("_"," ")})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full border ${Nb[B.status]}`,children:B.status.replace("_"," ").toUpperCase()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(Ee,{className:"w-4 h-4"})}),O&&B.status==="draft"&&e.jsx("button",{onClick:()=>H(B),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(Ye,{className:"w-4 h-4"})}),U&&B.status==="pending_approval"&&e.jsx("button",{onClick:()=>I(B.id),className:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Approve Salary",children:e.jsx(te,{className:"w-4 h-4"})}),O&&B.status==="approved"&&e.jsx("button",{onClick:()=>$(B.id),className:"p-2 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Mark as Paid",children:e.jsx(nx,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:e.jsx(Ms,{className:"w-4 h-4"})})]})})]},B.id)})})]})}),!l&&M.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ct,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No salary records found"}),e.jsx("p",{className:"text-gray-500",children:u||f!=="all"?"Try adjusting your search or filter criteria":"Generate payroll to create salary records"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ct,{className:"w-6 h-6 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Salary Management Process"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Configure Staff:"})," Set base salary, allowances, and deductions for each staff member"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Generate Payroll:"})," Automatically calculate salaries based on attendance and overtime"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Review & Approve:"})," Main Admin reviews and approves salary records"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Process Payment:"})," Mark salaries as paid after bank transfer/payment"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Download Reports:"})," Generate payslips and payroll reports"]})]})]})]})}),e.jsx(gb,{isOpen:y,onClose:()=>p(!1)}),A&&e.jsx(fb,{isOpen:C,onClose:()=>{k(!1),_(null)},record:A}),L&&e.jsx(vb,{isOpen:N,onClose:()=>{S(!1),E(null)},user:L}),e.jsx(jb,{isOpen:w,onClose:()=>D(!1),onGenerate:Y})]})}function _e({children:t}){const{user:s}=ee();return s?e.jsx(Gg,{children:t}):e.jsx(Si,{to:"/login",replace:!0})}function Eb(){const{user:t}=ee();return t?e.jsxs(Lp,{children:[e.jsx(je,{path:"/login",element:e.jsx(Si,{to:"/dashboard",replace:!0})}),e.jsx(je,{path:"/dashboard",element:e.jsx(_e,{children:e.jsx(dy,{})})}),e.jsx(je,{path:"/documents",element:e.jsx(_e,{children:e.jsx(py,{})})}),e.jsx(je,{path:"/documents/:id",element:e.jsx(_e,{children:e.jsx(yy,{})})}),e.jsx(je,{path:"/payments",element:e.jsx(_e,{children:e.jsx(wy,{})})}),e.jsx(je,{path:"/challans",element:e.jsx(_e,{children:e.jsx(Ey,{})})}),e.jsx(je,{path:"/customers",element:e.jsx(_e,{children:e.jsx(_y,{})})}),e.jsx(je,{path:"/builders",element:e.jsx(_e,{children:e.jsx(Py,{})})}),e.jsx(je,{path:"/users",element:e.jsx(_e,{children:e.jsx(zy,{})})}),e.jsx(je,{path:"/settings",element:e.jsx(_e,{children:e.jsx($y,{})})}),e.jsx(je,{path:"/collection",element:e.jsx(_e,{children:e.jsx(Vy,{})})}),e.jsx(je,{path:"/delivery",element:e.jsx(_e,{children:e.jsx(Yy,{})})}),e.jsx(je,{path:"/data-entry",element:e.jsx(_e,{children:e.jsx(Qy,{})})}),e.jsx(je,{path:"/tasks",element:e.jsx(_e,{children:e.jsx(nb,{})})}),e.jsx(je,{path:"/tasks/:id",element:e.jsx(_e,{children:e.jsx(ob,{})})}),e.jsx(je,{path:"/inbox",element:e.jsx(_e,{children:e.jsx(cb,{})})}),e.jsx(je,{path:"/attendance",element:e.jsx(_e,{children:e.jsx(pb,{})})}),e.jsx(je,{path:"/salary",element:e.jsx(_e,{children:e.jsx(Sb,{})})}),e.jsx(je,{path:"/",element:e.jsx(Si,{to:"/dashboard",replace:!0})})]}):e.jsx($g,{})}function kb(){return e.jsx(Qp,{children:e.jsx(Jp,{children:e.jsx(gg,{children:e.jsx(eg,{children:e.jsx(sg,{children:e.jsx(ng,{children:e.jsx(lg,{children:e.jsx(og,{children:e.jsx(dg,{children:e.jsx(hg,{children:e.jsx(jg,{children:e.jsx(Cg,{children:e.jsx(Bp,{basename:"/admin",children:e.jsx(Eb,{})})})})})})})})})})})})})})}Pm(document.getElementById("root")).render(e.jsx(j.StrictMode,{children:e.jsx(kb,{})}));
